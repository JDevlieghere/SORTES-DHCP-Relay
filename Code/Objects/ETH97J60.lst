gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00001 ;--------------------------------------------------------
               00002 ; File Created by SDCC : free open source ANSI-C Compiler
               00003 ; Version 2.9.4 #5595 (Dec 17 2009) (UNIX)
               00004 ; This file was generated Mon Mar 15 11:43:30 2010
               00005 ;--------------------------------------------------------
               00006 ; PIC16 port for the Microchip 16-bit core micros
               00007 ;--------------------------------------------------------
               00008         list    p=18f97j60
               00009 
               00010         radix dec
               00011 
               00012 ;--------------------------------------------------------
               00013 ; public variables in this module
               00014 ;--------------------------------------------------------
               00015         global _MACInit
               00016         global _MACIsLinked
               00017         global _MACIsTxReady
               00018         global _MACDiscardRx
               00019         global _MACGetFreeRxSize
               00020         global _MACGetHeader
               00021         global _MACPutHeader
               00022         global _MACFlush
               00023         global _MACSetReadPtrInRx
               00024         global _MACSetWritePtr
               00025         global _MACSetReadPtr
               00026         global _MACCalcRxChecksum
               00027         global _CalcIPBufferChecksum
               00028         global _MACMemCopyAsync
               00029         global _MACIsMemCopyDone
               00030         global _MACGet
               00031         global _MACGetArray
               00032         global _MACPut
               00033         global _MACPutArray
               00034         global _ReadPHYReg
               00035         global _WritePHYReg
               00036         global _MACPowerDown
               00037         global _MACPowerUp
               00038         global _MACPrintHeader
               00039 
               00040 ;--------------------------------------------------------
               00041 ; extern variables in this module
               00042 ;--------------------------------------------------------
               00043         extern __gptrput1
               00044         extern __gptrget2
               00045         extern __gptrget1
               00046         extern _EBSTCONbits
               00047         extern _MISTATbits
               00048         extern _EFLOCONbits
               00049         extern _MACON1bits
               00050         extern _MACON2bits
               00051         extern _MACON3bits
               00052         extern _MACON4bits
               00053         extern _MACLCON1bits
               00054         extern _MACLCON2bits
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00055         extern _MICONbits
               00056         extern _MICMDbits
               00057         extern _EWOLIEbits
               00058         extern _EWOLIRbits
               00059         extern _ERXFCONbits
               00060         extern _EIEbits
               00061         extern _ESTATbits
               00062         extern _ECON2bits
               00063         extern _EIRbits
               00064         extern _EDATAbits
               00065         extern _SSP2CON2bits
               00066         extern _SSP2CON1bits
               00067         extern _SSP2STATbits
               00068         extern _ECCP2DELbits
               00069         extern _ECCP2ASbits
               00070         extern _ECCP3DELbits
               00071         extern _ECCP3ASbits
               00072         extern _RCSTA2bits
               00073         extern _TXSTA2bits
               00074         extern _CCP5CONbits
               00075         extern _CCP4CONbits
               00076         extern _T4CONbits
               00077         extern _ECCP1DELbits
               00078         extern _BAUDCON2bits
               00079         extern _BAUDCTL2bits
               00080         extern _BAUDCONbits
               00081         extern _BAUDCON1bits
               00082         extern _BAUDCTLbits
               00083         extern _BAUDCTL1bits
               00084         extern _PORTAbits
               00085         extern _PORTBbits
               00086         extern _PORTCbits
               00087         extern _PORTDbits
               00088         extern _PORTEbits
               00089         extern _PORTFbits
               00090         extern _PORTGbits
               00091         extern _PORTHbits
               00092         extern _PORTJbits
               00093         extern _LATAbits
               00094         extern _LATBbits
               00095         extern _LATCbits
               00096         extern _LATDbits
               00097         extern _LATEbits
               00098         extern _LATFbits
               00099         extern _LATGbits
               00100         extern _LATHbits
               00101         extern _LATJbits
               00102         extern _DDRAbits
               00103         extern _TRISAbits
               00104         extern _DDRBbits
               00105         extern _TRISBbits
               00106         extern _DDRCbits
               00107         extern _TRISCbits
               00108         extern _DDRDbits
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00109         extern _TRISDbits
               00110         extern _DDREbits
               00111         extern _TRISEbits
               00112         extern _DDRFbits
               00113         extern _TRISFbits
               00114         extern _DDRGbits
               00115         extern _TRISGbits
               00116         extern _DDRHbits
               00117         extern _TRISHbits
               00118         extern _DDRJbits
               00119         extern _TRISJbits
               00120         extern _OSCTUNEbits
               00121         extern _MEMCONbits
               00122         extern _PIE1bits
               00123         extern _PIR1bits
               00124         extern _IPR1bits
               00125         extern _PIE2bits
               00126         extern _PIR2bits
               00127         extern _IPR2bits
               00128         extern _PIE3bits
               00129         extern _PIR3bits
               00130         extern _IPR3bits
               00131         extern _EECON1bits
               00132         extern _RCSTAbits
               00133         extern _RCSTA1bits
               00134         extern _TXSTAbits
               00135         extern _TXSTA1bits
               00136         extern _PSPCONbits
               00137         extern _T3CONbits
               00138         extern _CMCONbits
               00139         extern _CVRCONbits
               00140         extern _ECCP1ASbits
               00141         extern _CCP3CONbits
               00142         extern _ECCP3CONbits
               00143         extern _CCP2CONbits
               00144         extern _ECCP2CONbits
               00145         extern _CCP1CONbits
               00146         extern _ECCP1CONbits
               00147         extern _ADCON2bits
               00148         extern _ADCON1bits
               00149         extern _ADCON0bits
               00150         extern _SSP1CON2bits
               00151         extern _SSPCON2bits
               00152         extern _SSP1CON1bits
               00153         extern _SSPCON1bits
               00154         extern _SSP1STATbits
               00155         extern _SSPSTATbits
               00156         extern _T2CONbits
               00157         extern _T1CONbits
               00158         extern _RCONbits
               00159         extern _WDTCONbits
               00160         extern _ECON1bits
               00161         extern _OSCCONbits
               00162         extern _T0CONbits
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00163         extern _STATUSbits
               00164         extern _INTCON3bits
               00165         extern _INTCON2bits
               00166         extern _INTCONbits
               00167         extern _STKPTRbits
               00168         extern _stdin
               00169         extern _stdout
               00170         extern _AN0String
               00171         extern _AppConfig
               00172         extern _activeUDPSocket
               00173         extern _UDPSocketInfo
               00174         extern _UDPTxCount
               00175         extern _UDPRxCount
               00176         extern _LCDText
               00177         extern _MAADR5
               00178         extern _MAADR6
               00179         extern _MAADR3
               00180         extern _MAADR4
               00181         extern _MAADR1
               00182         extern _MAADR2
               00183         extern _EBSTSD
               00184         extern _EBSTCON
               00185         extern _EBSTCS
               00186         extern _EBSTCSL
               00187         extern _EBSTCSH
               00188         extern _MISTAT
               00189         extern _EFLOCON
               00190         extern _EPAUS
               00191         extern _EPAUSL
               00192         extern _EPAUSH
               00193         extern _MACON1
               00194         extern _MACON2
               00195         extern _MACON3
               00196         extern _MACON4
               00197         extern _MABBIPG
               00198         extern _MAIPG
               00199         extern _MAIPGL
               00200         extern _MAIPGH
               00201         extern _MACLCON1
               00202         extern _MACLCON2
               00203         extern _MAMXFL
               00204         extern _MAMXFLL
               00205         extern _MAMXFLH
               00206         extern _MICON
               00207         extern _MICMD
               00208         extern _MIREGADR
               00209         extern _MIWR
               00210         extern _MIWRL
               00211         extern _MIWRH
               00212         extern _MIRD
               00213         extern _MIRDL
               00214         extern _MIRDH
               00215         extern _EHT0
               00216         extern _EHT1
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00217         extern _EHT2
               00218         extern _EHT3
               00219         extern _EHT4
               00220         extern _EHT5
               00221         extern _EHT6
               00222         extern _EHT7
               00223         extern _EPMM0
               00224         extern _EPMM1
               00225         extern _EPMM2
               00226         extern _EPMM3
               00227         extern _EPMM4
               00228         extern _EPMM5
               00229         extern _EPMM6
               00230         extern _EPMM7
               00231         extern _EPMCS
               00232         extern _EPMCSL
               00233         extern _EPMCSH
               00234         extern _EPMO
               00235         extern _EPMOL
               00236         extern _EPMOH
               00237         extern _EWOLIE
               00238         extern _EWOLIR
               00239         extern _ERXFCON
               00240         extern _EPKTCNT
               00241         extern _EWRPT
               00242         extern _EWRPTL
               00243         extern _EWRPTH
               00244         extern _ETXST
               00245         extern _ETXSTL
               00246         extern _ETXSTH
               00247         extern _ETXND
               00248         extern _ETXNDL
               00249         extern _ETXNDH
               00250         extern _ERXST
               00251         extern _ERXSTL
               00252         extern _ERXSTH
               00253         extern _ERXND
               00254         extern _ERXNDL
               00255         extern _ERXNDH
               00256         extern _ERXRDPT
               00257         extern _ERXRDPTL
               00258         extern _ERXRDPTH
               00259         extern _ERXWRPT
               00260         extern _ERXWRPTL
               00261         extern _ERXWRPTH
               00262         extern _EDMAST
               00263         extern _EDMASTL
               00264         extern _EDMASTH
               00265         extern _EDMAND
               00266         extern _EDMANDL
               00267         extern _EDMANDH
               00268         extern _EDMADST
               00269         extern _EDMADSTL
               00270         extern _EDMADSTH
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00271         extern _EDMACS
               00272         extern _EDMACSL
               00273         extern _EDMACSH
               00274         extern _EIE
               00275         extern _ESTAT
               00276         extern _ECON2
               00277         extern _EIR
               00278         extern _EDATA
               00279         extern _SSP2CON2
               00280         extern _SSP2CON1
               00281         extern _SSP2STAT
               00282         extern _SSP2ADD
               00283         extern _SSP2BUF
               00284         extern _ECCP2DEL
               00285         extern _ECCP2AS
               00286         extern _ECCP3DEL
               00287         extern _ECCP3AS
               00288         extern _RCSTA2
               00289         extern _TXSTA2
               00290         extern _TXREG2
               00291         extern _RCREG2
               00292         extern _SPBRG2
               00293         extern _CCP5CON
               00294         extern _CCPR5
               00295         extern _CCPR5L
               00296         extern _CCPR5H
               00297         extern _CCP4CON
               00298         extern _CCPR4
               00299         extern _CCPR4L
               00300         extern _CCPR4H
               00301         extern _T4CON
               00302         extern _PR4
               00303         extern _TMR4
               00304         extern _ECCP1DEL
               00305         extern _ERDPT
               00306         extern _ERDPTL
               00307         extern _ERDPTH
               00308         extern _BAUDCON2
               00309         extern _BAUDCTL2
               00310         extern _SPBRGH2
               00311         extern _BAUDCON
               00312         extern _BAUDCON1
               00313         extern _BAUDCTL
               00314         extern _BAUDCTL1
               00315         extern _SPBRGH
               00316         extern _SPBRGH1
               00317         extern _PORTA
               00318         extern _PORTB
               00319         extern _PORTC
               00320         extern _PORTD
               00321         extern _PORTE
               00322         extern _PORTF
               00323         extern _PORTG
               00324         extern _PORTH
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00325         extern _PORTJ
               00326         extern _LATA
               00327         extern _LATB
               00328         extern _LATC
               00329         extern _LATD
               00330         extern _LATE
               00331         extern _LATF
               00332         extern _LATG
               00333         extern _LATH
               00334         extern _LATJ
               00335         extern _DDRA
               00336         extern _TRISA
               00337         extern _DDRB
               00338         extern _TRISB
               00339         extern _DDRC
               00340         extern _TRISC
               00341         extern _DDRD
               00342         extern _TRISD
               00343         extern _DDRE
               00344         extern _TRISE
               00345         extern _DDRF
               00346         extern _TRISF
               00347         extern _DDRG
               00348         extern _TRISG
               00349         extern _DDRH
               00350         extern _TRISH
               00351         extern _DDRJ
               00352         extern _TRISJ
               00353         extern _OSCTUNE
               00354         extern _MEMCON
               00355         extern _PIE1
               00356         extern _PIR1
               00357         extern _IPR1
               00358         extern _PIE2
               00359         extern _PIR2
               00360         extern _IPR2
               00361         extern _PIE3
               00362         extern _PIR3
               00363         extern _IPR3
               00364         extern _EECON1
               00365         extern _EECON2
               00366         extern _RCSTA
               00367         extern _RCSTA1
               00368         extern _TXSTA
               00369         extern _TXSTA1
               00370         extern _TXREG
               00371         extern _TXREG1
               00372         extern _RCREG
               00373         extern _RCREG1
               00374         extern _SPBRG
               00375         extern _SPBRG1
               00376         extern _PSPCON
               00377         extern _T3CON
               00378         extern _TMR3L
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00379         extern _TMR3H
               00380         extern _CMCON
               00381         extern _CVRCON
               00382         extern _ECCP1AS
               00383         extern _CCP3CON
               00384         extern _ECCP3CON
               00385         extern _CCPR3
               00386         extern _CCPR3L
               00387         extern _CCPR3H
               00388         extern _CCP2CON
               00389         extern _ECCP2CON
               00390         extern _CCPR2
               00391         extern _CCPR2L
               00392         extern _CCPR2H
               00393         extern _CCP1CON
               00394         extern _ECCP1CON
               00395         extern _CCPR1
               00396         extern _CCPR1L
               00397         extern _CCPR1H
               00398         extern _ADCON2
               00399         extern _ADCON1
               00400         extern _ADCON0
               00401         extern _ADRES
               00402         extern _ADRESL
               00403         extern _ADRESH
               00404         extern _SSP1CON2
               00405         extern _SSPCON2
               00406         extern _SSP1CON1
               00407         extern _SSPCON1
               00408         extern _SSP1STAT
               00409         extern _SSPSTAT
               00410         extern _SSP1ADD
               00411         extern _SSPADD
               00412         extern _SSP1BUF
               00413         extern _SSPBUF
               00414         extern _T2CON
               00415         extern _PR2
               00416         extern _TMR2
               00417         extern _T1CON
               00418         extern _TMR1L
               00419         extern _TMR1H
               00420         extern _RCON
               00421         extern _WDTCON
               00422         extern _ECON1
               00423         extern _OSCCON
               00424         extern _T0CON
               00425         extern _TMR0L
               00426         extern _TMR0H
               00427         extern _STATUS
               00428         extern _FSR2L
               00429         extern _FSR2H
               00430         extern _PLUSW2
               00431         extern _PREINC2
               00432         extern _POSTDEC2
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00433         extern _POSTINC2
               00434         extern _INDF2
               00435         extern _BSR
               00436         extern _FSR1L
               00437         extern _FSR1H
               00438         extern _PLUSW1
               00439         extern _PREINC1
               00440         extern _POSTDEC1
               00441         extern _POSTINC1
               00442         extern _INDF1
               00443         extern _WREG
               00444         extern _FSR0L
               00445         extern _FSR0H
               00446         extern _PLUSW0
               00447         extern _PREINC0
               00448         extern _POSTDEC0
               00449         extern _POSTINC0
               00450         extern _INDF0
               00451         extern _INTCON3
               00452         extern _INTCON2
               00453         extern _INTCON
               00454         extern _PROD
               00455         extern _PRODL
               00456         extern _PRODH
               00457         extern _TABLAT
               00458         extern _TBLPTR
               00459         extern _TBLPTRL
               00460         extern _TBLPTRH
               00461         extern _TBLPTRU
               00462         extern _PC
               00463         extern _PCL
               00464         extern _PCLATH
               00465         extern _PCLATU
               00466         extern _STKPTR
               00467         extern _TOS
               00468         extern _TOSL
               00469         extern _TOSH
               00470         extern _TOSU
               00471         extern _memcpy
               00472         extern _DisplayString
               00473         extern _swaps
               00474         extern _TickGet
               00475         extern _LCDUpdate
               00476 ;--------------------------------------------------------
               00477 ;       Equates to used internal registers
               00478 ;--------------------------------------------------------
  00000FD8     00479 STATUS  equ     0xfd8
  00000FE8     00480 WREG    equ     0xfe8
  00000FE9     00481 FSR0L   equ     0xfe9
  00000FEA     00482 FSR0H   equ     0xfea
  00000FE1     00483 FSR1L   equ     0xfe1
  00000FD9     00484 FSR2L   equ     0xfd9
  00000FEF     00485 INDF0   equ     0xfef
  00000FE5     00486 POSTDEC1        equ     0xfe5
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
  00000FE4     00487 PREINC1 equ     0xfe4
  00000FDB     00488 PLUSW2  equ     0xfdb
  00000FF3     00489 PRODL   equ     0xff3
  00000FF4     00490 PRODH   equ     0xff4
               00491 
               00492 
               00493 ; Internal registers
               00494 .registers      udata_ovr       0x0000
               00495 r0x00   res     1
               00496 r0x01   res     1
               00497 r0x02   res     1
               00498 r0x03   res     1
               00499 r0x04   res     1
               00500 r0x05   res     1
               00501 r0x06   res     1
               00502 r0x07   res     1
               00503 r0x08   res     1
               00504 r0x09   res     1
               00505 r0x0a   res     1
               00506 r0x0b   res     1
               00507 r0x0c   res     1
               00508 
               00509 udata_ETH97J60_0        udata
               00510 _NextPacketLocation     res     2
               00511 
               00512 udata_ETH97J60_1        udata
               00513 _CurrentPacketLocation  res     2
               00514 
               00515 udata_ETH97J60_2        udata
               00516 _WasDiscarded   res     1
               00517 
               00518 udata_ETH97J60_3        udata
               00519 _wTXWatchdog    res     2
               00520 
               00521 udata_ETH97J60_4        udata
               00522 _MACIsLinked_pr_1_1     res     2
               00523 
               00524 udata_ETH97J60_5        udata
               00525 _MACDiscardRx_NewRXRDLocation_1_1       res     2
               00526 
               00527 udata_ETH97J60_6        udata
               00528 _MACGetFreeRxSize_ReadPT_1_1    res     2
               00529 
               00530 udata_ETH97J60_7        udata
               00531 _MACGetFreeRxSize_WritePT_1_1   res     2
               00532 
               00533 udata_ETH97J60_8        udata
               00534 _MACGetHeader_header_1_1        res     20
               00535 
               00536 udata_ETH97J60_9        udata
               00537 _MACFlush_i_2_2 res     1
               00538 
               00539 udata_ETH97J60_10       udata
               00540 _MACSetReadPtrInRx_ReadPT_1_1   res     2
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00541 
               00542 udata_ETH97J60_11       udata
               00543 _CalcIPBufferChecksum_ChunkLen_1_1      res     2
               00544 
               00545 udata_ETH97J60_12       udata
               00546 _CalcIPBufferChecksum_Checksum_1_1      res     4
               00547 
               00548 udata_ETH97J60_13       udata
               00549 _CalcIPBufferChecksum_DataBuffer_1_1    res     20
               00550 
               00551 udata_ETH97J60_14       udata
               00552 _MACMemCopyAsync_destAddr_1_1   res     2
               00553 
               00554 udata_ETH97J60_15       udata
               00555 _MACMemCopyAsync_sourceAddr_1_1 res     2
               00556 
               00557 udata_ETH97J60_16       udata
               00558 _MACMemCopyAsync_ReadSave_1_1   res     2
               00559 
               00560 udata_ETH97J60_17       udata
               00561 _MACMemCopyAsync_WriteSave_1_1  res     2
               00562 
               00563 udata_ETH97J60_18       udata
               00564 _MACGetArray_i_1_1      res     1
               00565 
               00566 udata_ETH97J60_19       udata
               00567 _ReadPHYReg_Result_1_1  res     2
               00568 
               00569 udata_ETH97J60_20       udata
               00570 _WritePHYReg_Data_1_1   res     2
               00571 
               00572 udata_ETH97J60_21       udata
               00573 _MACPrintHeader_header_1_1      res     64
               00574 
               00575 ;--------------------------------------------------------
               00576 ; global & static initialisations
               00577 ;--------------------------------------------------------
               00578 ; I code from now on!
               00579 ; ; Starting pCode block
               00580 S_ETH97J60__MACPrintHeader      code
0000 00581 _MACPrintHeader:
               00582 ;       .line   1452; TCPIP_Stack/ETH97J60.c    void MACPrintHeader(BYTE woffset)
0000 CFD9 FFE5 00583         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00584         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 00585         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 00586         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 00587         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 00588         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 00589         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 00590         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 00591         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 00592         MOVFF   r0x07, POSTDEC1
0028 0E02      00593         MOVLW   0x02
002A CFDB F000 00594         MOVFF   PLUSW2, r0x00
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00595 ;       .line   1458; TCPIP_Stack/ETH97J60.c    ERDPTL = LOW(TXSTART + 1) ;
002E 0E0B      00596         MOVLW   0x0b
0030 6E00      00597         MOVWF   _ERDPTL
               00598 ;       .line   1459; TCPIP_Stack/ETH97J60.c    ERDPTH = HIGH(TXSTART + 1) ;
0032 0E1A      00599         MOVLW   0x1a
0034 6E00      00600         MOVWF   _ERDPTH
               00601 ;       .line   1462; TCPIP_Stack/ETH97J60.c    MACGetArray((BYTE*)&header[0], sizeof(header));
0036 0E00      00602         MOVLW   HIGH(_MACPrintHeader_header_1_1)
0038 6E00      00603         MOVWF   r0x02
003A 0E00      00604         MOVLW   LOW(_MACPrintHeader_header_1_1)
003C 6E00      00605         MOVWF   r0x01
003E 0E80      00606         MOVLW   0x80
0040 6E00      00607         MOVWF   r0x03
0042 0E00      00608         MOVLW   0x00
0044 6EE5      00609         MOVWF   POSTDEC1
0046 0E40      00610         MOVLW   0x40
0048 6EE5      00611         MOVWF   POSTDEC1
004A 5000      00612         MOVF    r0x03, W
004C 6EE5      00613         MOVWF   POSTDEC1
004E 5000      00614         MOVF    r0x02, W
0050 6EE5      00615         MOVWF   POSTDEC1
0052 5000      00616         MOVF    r0x01, W
0054 6EE5      00617         MOVWF   POSTDEC1
0056 EC00 F000 00618         CALL    _MACGetArray
005A 0E05      00619         MOVLW   0x05
005C 26E1      00620         ADDWF   FSR1L, F
               00621 ; ;multiply lit val:0x02 by variable r0x00 and store in r0x00
               00622 ; ;Unrolled 8 X 8 multiplication
               00623 ; ;FIXME: the function does not support result==WREG
               00624 ;       .line   1464; TCPIP_Stack/ETH97J60.c    for(i=0; i<16; i++)
005E 90D8      00625         BCF     STATUS, 0
0060 3600      00626         RLCF    r0x00, F
0062 6A00      00627         CLRF    r0x01
0064 6A00      00628         CLRF    r0x02
0066 6A00      00629         CLRF    r0x03
0068 00630 _00492_DS_:
0068 0E10      00631         MOVLW   0x10
006A 5C00      00632         SUBWF   r0x01, W
006C B0D8      00633         BTFSC   STATUS, 0
006E D000      00634         BRA     _00495_DS_
               00635 ;       .line   1466; TCPIP_Stack/ETH97J60.c    c = (header[i+2*woffset]>>4)&0x0F;
0070 5000      00636         MOVF    r0x00, W
0072 2400      00637         ADDWF   r0x01, W
0074 6E00      00638         MOVWF   r0x04
0076 6A00      00639         CLRF    r0x05
0078 0E00      00640         MOVLW   LOW(_MACPrintHeader_header_1_1)
007A 2600      00641         ADDWF   r0x04, F
007C 0E00      00642         MOVLW   HIGH(_MACPrintHeader_header_1_1)
007E 2200      00643         ADDWFC  r0x05, F
0080 C000 FFE9 00644         MOVFF   r0x04, FSR0L
0084 C000 FFEA 00645         MOVFF   r0x05, FSR0H
0088 CFEF F000 00646         MOVFF   INDF0, r0x04
008C 3800      00647         SWAPF   r0x04, W
008E 0B0F      00648         ANDLW   0x0f
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0090 6E00      00649         MOVWF   r0x04
0092 0E0F      00650         MOVLW   0x0f
0094 1600      00651         ANDWF   r0x04, F
               00652 ;       .line   1467; TCPIP_Stack/ETH97J60.c    LCDText[2*i] = c + (c < 0x0A ? '0' : 'A');
0096 0E00      00653         MOVLW   LOW(_LCDText)
0098 2400      00654         ADDWF   r0x02, W
009A 6E00      00655         MOVWF   r0x05
009C 6A00      00656         CLRF    r0x06
009E 0E00      00657         MOVLW   HIGH(_LCDText)
00A0 2200      00658         ADDWFC  r0x06, F
00A2 0E0A      00659         MOVLW   0x0a
00A4 5C00      00660         SUBWF   r0x04, W
00A6 E200      00661         BC      _00498_DS_
00A8 0E30      00662         MOVLW   0x30
00AA 6E00      00663         MOVWF   r0x07
00AC D000      00664         BRA     _00499_DS_
00AE 00665 _00498_DS_:
00AE 0E41      00666         MOVLW   0x41
00B0 6E00      00667         MOVWF   r0x07
00B2 00668 _00499_DS_:
00B2 5000      00669         MOVF    r0x04, W
00B4 2600      00670         ADDWF   r0x07, F
00B6 C000 FFE9 00671         MOVFF   r0x05, FSR0L
00BA C000 FFEA 00672         MOVFF   r0x06, FSR0H
00BE C000 FFEF 00673         MOVFF   r0x07, INDF0
               00674 ;       .line   1468; TCPIP_Stack/ETH97J60.c    c = header[i+2*woffset]&0x0F;
00C2 5000      00675         MOVF    r0x00, W
00C4 2400      00676         ADDWF   r0x01, W
00C6 6E00      00677         MOVWF   r0x05
00C8 6A00      00678         CLRF    r0x06
00CA 0E00      00679         MOVLW   LOW(_MACPrintHeader_header_1_1)
00CC 2600      00680         ADDWF   r0x05, F
00CE 0E00      00681         MOVLW   HIGH(_MACPrintHeader_header_1_1)
00D0 2200      00682         ADDWFC  r0x06, F
00D2 C000 FFE9 00683         MOVFF   r0x05, FSR0L
00D6 C000 FFEA 00684         MOVFF   r0x06, FSR0H
00DA CFEF F000 00685         MOVFF   INDF0, r0x05
00DE 0E0F      00686         MOVLW   0x0f
00E0 1400      00687         ANDWF   r0x05, W
00E2 6E00      00688         MOVWF   r0x04
               00689 ;       .line   1469; TCPIP_Stack/ETH97J60.c    LCDText[2*i+1] = c + (c < 0x0A ? '0' : 'A');
00E4 2800      00690         INCF    r0x03, W
00E6 6E00      00691         MOVWF   r0x05
00E8 6A00      00692         CLRF    r0x06
00EA 0E00      00693         MOVLW   LOW(_LCDText)
00EC 2600      00694         ADDWF   r0x05, F
00EE 0E00      00695         MOVLW   HIGH(_LCDText)
00F0 2200      00696         ADDWFC  r0x06, F
00F2 0E0A      00697         MOVLW   0x0a
00F4 5C00      00698         SUBWF   r0x04, W
00F6 E200      00699         BC      _00500_DS_
00F8 0E30      00700         MOVLW   0x30
00FA 6E00      00701         MOVWF   r0x07
00FC D000      00702         BRA     _00501_DS_
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00FE 00703 _00500_DS_:
00FE 0E41      00704         MOVLW   0x41
0100 6E00      00705         MOVWF   r0x07
0102 00706 _00501_DS_:
0102 5000      00707         MOVF    r0x07, W
0104 2600      00708         ADDWF   r0x04, F
0106 C000 FFE9 00709         MOVFF   r0x05, FSR0L
010A C000 FFEA 00710         MOVFF   r0x06, FSR0H
010E C000 FFEF 00711         MOVFF   r0x04, INDF0
               00712 ;       .line   1464; TCPIP_Stack/ETH97J60.c    for(i=0; i<16; i++)
0112 2A00      00713         INCF    r0x02, F
0114 2A00      00714         INCF    r0x02, F
0116 2A00      00715         INCF    r0x03, F
0118 2A00      00716         INCF    r0x03, F
011A 2A00      00717         INCF    r0x01, F
011C D000      00718         BRA     _00492_DS_
011E 00719 _00495_DS_:
011E 0000      00720         BANKSEL (_LCDText + 32)
               00721 ;       .line   1471; TCPIP_Stack/ETH97J60.c    LCDText[32]=0;
0120 6B00      00722         CLRF    (_LCDText + 32), B
               00723 ;       .line   1473; TCPIP_Stack/ETH97J60.c    LCDUpdate();
0122 EC00 F000 00724         CALL    _LCDUpdate
0126 CFE4 F000 00725         MOVFF   PREINC1, r0x07
012A CFE4 F000 00726         MOVFF   PREINC1, r0x06
012E CFE4 F000 00727         MOVFF   PREINC1, r0x05
0132 CFE4 F000 00728         MOVFF   PREINC1, r0x04
0136 CFE4 F000 00729         MOVFF   PREINC1, r0x03
013A CFE4 F000 00730         MOVFF   PREINC1, r0x02
013E CFE4 F000 00731         MOVFF   PREINC1, r0x01
0142 CFE4 F000 00732         MOVFF   PREINC1, r0x00
0146 CFE4 FFD9 00733         MOVFF   PREINC1, FSR2L
014A 0012      00734         RETURN  
               00735 
               00736 ; ; Starting pCode block
               00737 S_ETH97J60__MACPowerUp  code
0000 00738 _MACPowerUp:
               00739 ;       .line   1357; TCPIP_Stack/ETH97J60.c    void MACPowerUp(void)
0000 CFD9 FFE5 00740         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00741         MOVFF   FSR1L, FSR2L
0008 0000      00742         BANKSEL _ECON2bits
               00743 ;       .line   1360; TCPIP_Stack/ETH97J60.c    ECON2bits.ETHEN = 1;
000A 8B00      00744         BSF     _ECON2bits, 5, B
000C 00745 _00484_DS_:
000C 0000      00746         BANKSEL _ESTATbits
               00747 ;       .line   1363; TCPIP_Stack/ETH97J60.c    while(!ESTATbits.PHYRDY)
000E B100      00748         BTFSC   _ESTATbits, 0, B
0010 D000      00749         BRA     _00487_DS_
               00750 ;       .line   1366; TCPIP_Stack/ETH97J60.c    ECON1bits.RXEN = 1;
0012 8400      00751         BSF     _ECON1bits, 2
0014 D000      00752         BRA     _00484_DS_
0016 00753 _00487_DS_:
0016 CFE4 FFD9 00754         MOVFF   PREINC1, FSR2L
001A 0012      00755         RETURN  
               00756 
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00757 ; ; Starting pCode block
               00758 S_ETH97J60__MACPowerDown        code
0000 00759 _MACPowerDown:
               00760 ;       .line   1320; TCPIP_Stack/ETH97J60.c    void MACPowerDown(void)
0000 CFD9 FFE5 00761         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00762         MOVFF   FSR1L, FSR2L
               00763 ;       .line   1323; TCPIP_Stack/ETH97J60.c    ECON1bits.RXEN = 0;
0008 9400      00764         BCF     _ECON1bits, 2
000A 00765 _00473_DS_:
000A 0000      00766         BANKSEL _ESTATbits
               00767 ;       .line   1327; TCPIP_Stack/ETH97J60.c    while(ESTATbits.RXBUSY);
000C B500      00768         BTFSC   _ESTATbits, 2, B
000E D000      00769         BRA     _00473_DS_
0010 00770 _00476_DS_:
               00771 ;       .line   1330; TCPIP_Stack/ETH97J60.c    while(ECON1bits.TXRTS);
0010 B600      00772         BTFSC   _ECON1bits, 3
0012 D000      00773         BRA     _00476_DS_
0014 0000      00774         BANKSEL _ECON2bits
               00775 ;       .line   1333; TCPIP_Stack/ETH97J60.c    ECON2bits.ETHEN = 0;
0016 9B00      00776         BCF     _ECON2bits, 5, B
0018 CFE4 FFD9 00777         MOVFF   PREINC1, FSR2L
001C 0012      00778         RETURN  
               00779 
               00780 ; ; Starting pCode block
               00781 S_ETH97J60__WritePHYReg code
0000 00782 _WritePHYReg:
               00783 ;       .line   1251; TCPIP_Stack/ETH97J60.c    void WritePHYReg(BYTE Register, WORD Data)
0000 CFD9 FFE5 00784         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00785         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 00786         MOVFF   r0x00, POSTDEC1
000C 0E02      00787         MOVLW   0x02
000E CFDB F000 00788         MOVFF   PLUSW2, _MIREGADR
0012 0E03      00789         MOVLW   0x03
0014 CFDB F000 00790         MOVFF   PLUSW2, _WritePHYReg_Data_1_1
0018 0E04      00791         MOVLW   0x04
001A CFDB F000 00792         MOVFF   PLUSW2, (_WritePHYReg_Data_1_1 + 1)
               00793 ;       .line   1268; TCPIP_Stack/ETH97J60.c    PRODL = ((WORD_VAL*)&Data)->v[0];
001E C000 F000 00794         MOVFF   _WritePHYReg_Data_1_1, _PRODL
               00795 ;       .line   1269; TCPIP_Stack/ETH97J60.c    PRODH = ((WORD_VAL*)&Data)->v[1];
0022 C000 F000 00796         MOVFF   (_WritePHYReg_Data_1_1 + 1), _PRODH
               00797 ;       .line   1270; TCPIP_Stack/ETH97J60.c    GIESave = INTCON & 0xC0;         // Save GIEH and GIEL bits
0026 0EC0      00798         MOVLW   0xc0
0028 1400      00799         ANDWF   _INTCON, W
002A 6E00      00800         MOVWF   r0x00
               00801 ;       .line   1271; TCPIP_Stack/ETH97J60.c    INTCON &= 0x3F;          // Clear INTCONbits.GIEH and INTCONbits.GIEL
002C 0E3F      00802         MOVLW   0x3f
002E 1600      00803         ANDWF   _INTCON, F
0030 C000 F000 00804         movff _PRODL, _MIWRL
0034 0000      00805         nop
0036 C000 F000 00806         movff _PRODH, _MIWRH
               00807         
               00808 ;       .line   1289; TCPIP_Stack/ETH97J60.c    INTCON |= GIESave;                     // Restore GIEH and GIEL value
003A 5000      00809         MOVF    r0x00, W
003C 1200      00810         IORWF   _INTCON, F
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
003E 00811 _00465_DS_:
003E 0000      00812         BANKSEL _MISTATbits
               00813 ;       .line   1293; TCPIP_Stack/ETH97J60.c    while(MISTATbits.BUSY);
0040 B100      00814         BTFSC   _MISTATbits, 0, B
0042 D000      00815         BRA     _00465_DS_
0044 CFE4 F000 00816         MOVFF   PREINC1, r0x00
0048 CFE4 FFD9 00817         MOVFF   PREINC1, FSR2L
004C 0012      00818         RETURN  
               00819 
               00820 ; ; Starting pCode block
               00821 S_ETH97J60__ReadPHYReg  code
0000 00822 _ReadPHYReg:
               00823 ;       .line   1208; TCPIP_Stack/ETH97J60.c    WORD ReadPHYReg(BYTE Register)
0000 CFD9 FFE5 00824         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00825         MOVFF   FSR1L, FSR2L
0008 0E02      00826         MOVLW   0x02
000A CFDB F000 00827         MOVFF   PLUSW2, _MIREGADR
000E 0000      00828         nop 
               00829 ;       .line   1215; TCPIP_Stack/ETH97J60.c    MICMD = MICMD_MIIRD; Nop();
0010 0E01      00830         MOVLW   0x01
0012 0000      00831         BANKSEL _MICMD
0014 6F00      00832         MOVWF   _MICMD, B
0016 0000      00833         nop 
0018 00834 _00451_DS_:
0018 0000      00835         BANKSEL _MISTATbits
               00836 ;       .line   1219; TCPIP_Stack/ETH97J60.c    while(MISTATbits.BUSY);
001A B100      00837         BTFSC   _MISTATbits, 0, B
001C D000      00838         BRA     _00451_DS_
001E 0000      00839         BANKSEL _MICMD
               00840 ;       .line   1222; TCPIP_Stack/ETH97J60.c    MICMD = 0x00; Nop();
0020 6B00      00841         CLRF    _MICMD, B
0022 0000      00842         nop 
0024 0000      00843         BANKSEL _MIRDL
               00844 ;       .line   1225; TCPIP_Stack/ETH97J60.c    Result.VAL.v[0] = MIRDL;
0026 5100      00845         MOVF    _MIRDL, W, B
0028 0000      00846         BANKSEL _ReadPHYReg_Result_1_1
002A 6F00      00847         MOVWF   _ReadPHYReg_Result_1_1, B
002C 0000      00848         nop 
002E 0000      00849         BANKSEL _MIRDH
               00850 ;       .line   1227; TCPIP_Stack/ETH97J60.c    Result.VAL.v[1] = MIRDH;
0030 5100      00851         MOVF    _MIRDH, W, B
0032 0000      00852         BANKSEL (_ReadPHYReg_Result_1_1 + 1)
0034 6F00      00853         MOVWF   (_ReadPHYReg_Result_1_1 + 1), B
               00854 ;       .line   1229; TCPIP_Stack/ETH97J60.c    return Result2;
0036 C000 FFF3 00855         MOVFF   (_ReadPHYReg_Result_1_1 + 1), PRODL
003A 0000      00856         BANKSEL _ReadPHYReg_Result_1_1
003C 5100      00857         MOVF    _ReadPHYReg_Result_1_1, W, B
003E CFE4 FFD9 00858         MOVFF   PREINC1, FSR2L
0042 0012      00859         RETURN  
               00860 
               00861 ; ; Starting pCode block
               00862 S_ETH97J60__MACPutArray code
0000 00863 _MACPutArray:
               00864 ;       .line   1149; TCPIP_Stack/ETH97J60.c    void MACPutArray(BYTE *val, WORD len)
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0000 CFD9 FFE5 00865         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00866         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 00867         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 00868         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 00869         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 00870         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 00871         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 00872         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 00873         MOVFF   r0x06, POSTDEC1
0024 0E02      00874         MOVLW   0x02
0026 CFDB F000 00875         MOVFF   PLUSW2, r0x00
002A 0E03      00876         MOVLW   0x03
002C CFDB F000 00877         MOVFF   PLUSW2, r0x01
0030 0E04      00878         MOVLW   0x04
0032 CFDB F000 00879         MOVFF   PLUSW2, r0x02
0036 0E05      00880         MOVLW   0x05
0038 CFDB F000 00881         MOVFF   PLUSW2, r0x03
003C 0E06      00882         MOVLW   0x06
003E CFDB F000 00883         MOVFF   PLUSW2, r0x04
0042 00884 _00437_DS_:
               00885 ;       .line   1151; TCPIP_Stack/ETH97J60.c    while(len--)
0042 C000 F000 00886         MOVFF   r0x03, r0x05
0046 C000 F000 00887         MOVFF   r0x04, r0x06
004A 0EFF      00888         MOVLW   0xff
004C 2600      00889         ADDWF   r0x03, F
004E A0D8      00890         BTFSS   STATUS, 0
0050 0600      00891         DECF    r0x04, F
0052 5000      00892         MOVF    r0x05, W
0054 1000      00893         IORWF   r0x06, W
0056 E000      00894         BZ      _00440_DS_
               00895 ;       .line   1167; TCPIP_Stack/ETH97J60.c    EDATA = *val++; 
0058 C000 FFE9 00896         MOVFF   r0x00, FSR0L
005C C000 FFF3 00897         MOVFF   r0x01, PRODL
0060 5000      00898         MOVF    r0x02, W
0062 EC00 F000 00899         CALL    __gptrget1
0066 6E00      00900         MOVWF   _EDATA
0068 2A00      00901         INCF    r0x00, F
006A B0D8      00902         BTFSC   STATUS, 0
006C 2A00      00903         INCF    r0x01, F
006E B0D8      00904         BTFSC   STATUS, 0
0070 2A00      00905         INCF    r0x02, F
0072 D000      00906         BRA     _00437_DS_
0074 00907 _00440_DS_:
0074 CFE4 F000 00908         MOVFF   PREINC1, r0x06
0078 CFE4 F000 00909         MOVFF   PREINC1, r0x05
007C CFE4 F000 00910         MOVFF   PREINC1, r0x04
0080 CFE4 F000 00911         MOVFF   PREINC1, r0x03
0084 CFE4 F000 00912         MOVFF   PREINC1, r0x02
0088 CFE4 F000 00913         MOVFF   PREINC1, r0x01
008C CFE4 F000 00914         MOVFF   PREINC1, r0x00
0090 CFE4 FFD9 00915         MOVFF   PREINC1, FSR2L
0094 0012      00916         RETURN  
               00917 
               00918 ; ; Starting pCode block
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00919 S_ETH97J60__MACPut      code
0000 00920 _MACPut:
               00921 ;       .line   1104; TCPIP_Stack/ETH97J60.c    void MACPut(BYTE val)
0000 CFD9 FFE5 00922         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00923         MOVFF   FSR1L, FSR2L
0008 0E02      00924         MOVLW   0x02
000A CFDB F000 00925         MOVFF   PLUSW2, _EDATA
               00926 ;       .line   1121; TCPIP_Stack/ETH97J60.c    EDATA = val;
000E CFE4 FFD9 00927         MOVFF   PREINC1, FSR2L
0012 0012      00928         RETURN  
               00929 
               00930 ; ; Starting pCode block
               00931 S_ETH97J60__MACGetArray code
0000 00932 _MACGetArray:
               00933 ;       .line   1062; TCPIP_Stack/ETH97J60.c    WORD MACGetArray(BYTE *val, WORD len)
0000 CFD9 FFE5 00934         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00935         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 00936         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 00937         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 00938         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 00939         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 00940         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 00941         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 00942         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 00943         MOVFF   r0x07, POSTDEC1
0028 C000 FFE5 00944         MOVFF   r0x08, POSTDEC1
002C 0E02      00945         MOVLW   0x02
002E CFDB F000 00946         MOVFF   PLUSW2, r0x00
0032 0E03      00947         MOVLW   0x03
0034 CFDB F000 00948         MOVFF   PLUSW2, r0x01
0038 0E04      00949         MOVLW   0x04
003A CFDB F000 00950         MOVFF   PLUSW2, r0x02
003E 0E05      00951         MOVLW   0x05
0040 CFDB F000 00952         MOVFF   PLUSW2, r0x03
0044 0E06      00953         MOVLW   0x06
0046 CFDB F000 00954         MOVFF   PLUSW2, r0x04
               00955 ;       .line   1068; TCPIP_Stack/ETH97J60.c    if(val)
004A 5000      00956         MOVF    r0x00, W
004C 1000      00957         IORWF   r0x01, W
004E 1000      00958         IORWF   r0x02, W
0050 E000      00959         BZ      _00427_DS_
               00960 ;       .line   1070; TCPIP_Stack/ETH97J60.c    while(w--)
0052 C000 F000 00961         MOVFF   r0x03, r0x05
0056 C000 F000 00962         MOVFF   r0x04, r0x06
005A 00963 _00413_DS_:
005A C000 F000 00964         MOVFF   r0x05, r0x07
005E C000 F000 00965         MOVFF   r0x06, r0x08
0062 0EFF      00966         MOVLW   0xff
0064 2600      00967         ADDWF   r0x05, F
0066 A0D8      00968         BTFSS   STATUS, 0
0068 0600      00969         DECF    r0x06, F
006A 5000      00970         MOVF    r0x07, W
006C 1000      00971         IORWF   r0x08, W
006E E000      00972         BZ      _00421_DS_
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00973 ;       .line   1072; TCPIP_Stack/ETH97J60.c    *val++ = EDATA;
0070 C000 FFE5 00974         MOVFF   _EDATA, POSTDEC1
0074 C000 FFE9 00975         MOVFF   r0x00, FSR0L
0078 C000 FFF3 00976         MOVFF   r0x01, PRODL
007C 5000      00977         MOVF    r0x02, W
007E EC00 F000 00978         CALL    __gptrput1
0082 2A00      00979         INCF    r0x00, F
0084 B0D8      00980         BTFSC   STATUS, 0
0086 2A00      00981         INCF    r0x01, F
0088 B0D8      00982         BTFSC   STATUS, 0
008A 2A00      00983         INCF    r0x02, F
008C D000      00984         BRA     _00413_DS_
008E 00985 _00427_DS_:
               00986 ;       .line   1077; TCPIP_Stack/ETH97J60.c    while(w--)
008E C000 F000 00987         MOVFF   r0x03, r0x00
0092 C000 F000 00988         MOVFF   r0x04, r0x01
0096 00989 _00416_DS_:
0096 C000 F000 00990         MOVFF   r0x00, r0x02
009A C000 F000 00991         MOVFF   r0x01, r0x05
009E 0EFF      00992         MOVLW   0xff
00A0 2600      00993         ADDWF   r0x00, F
00A2 A0D8      00994         BTFSS   STATUS, 0
00A4 0600      00995         DECF    r0x01, F
00A6 5000      00996         MOVF    r0x02, W
00A8 1000      00997         IORWF   r0x05, W
00AA E000      00998         BZ      _00421_DS_
               00999 ;       .line   1079; TCPIP_Stack/ETH97J60.c    i = EDATA;
00AC C000 F000 01000         MOVFF   _EDATA, _MACGetArray_i_1_1
00B0 D000      01001         BRA     _00416_DS_
00B2 01002 _00421_DS_:
               01003 ;       .line   1083; TCPIP_Stack/ETH97J60.c    return len;
00B2 C000 FFF3 01004         MOVFF   r0x04, PRODL
00B6 5000      01005         MOVF    r0x03, W
00B8 CFE4 F000 01006         MOVFF   PREINC1, r0x08
00BC CFE4 F000 01007         MOVFF   PREINC1, r0x07
00C0 CFE4 F000 01008         MOVFF   PREINC1, r0x06
00C4 CFE4 F000 01009         MOVFF   PREINC1, r0x05
00C8 CFE4 F000 01010         MOVFF   PREINC1, r0x04
00CC CFE4 F000 01011         MOVFF   PREINC1, r0x03
00D0 CFE4 F000 01012         MOVFF   PREINC1, r0x02
00D4 CFE4 F000 01013         MOVFF   PREINC1, r0x01
00D8 CFE4 F000 01014         MOVFF   PREINC1, r0x00
00DC CFE4 FFD9 01015         MOVFF   PREINC1, FSR2L
00E0 0012      01016         RETURN  
               01017 
               01018 ; ; Starting pCode block
               01019 S_ETH97J60__MACGet      code
0000 01020 _MACGet:
               01021 ;       .line   1037; TCPIP_Stack/ETH97J60.c    BYTE MACGet()
0000 CFD9 FFE5 01022         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01023         MOVFF   FSR1L, FSR2L
               01024 ;       .line   1039; TCPIP_Stack/ETH97J60.c    return EDATA;
0008 5000      01025         MOVF    _EDATA, W
000A CFE4 FFD9 01026         MOVFF   PREINC1, FSR2L
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
000E 0012      01027         RETURN  
               01028 
               01029 ; ; Starting pCode block
               01030 S_ETH97J60__MACIsMemCopyDone    code
0000 01031 _MACIsMemCopyDone:
               01032 ;       .line   1014; TCPIP_Stack/ETH97J60.c    BOOL MACIsMemCopyDone(void)
0000 CFD9 FFE5 01033         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01034         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01035         MOVFF   r0x00, POSTDEC1
               01036 ;       .line   1016; TCPIP_Stack/ETH97J60.c    return !ECON1bits.DMAST;
000C 6A00      01037         CLRF    r0x00
000E BA00      01038         BTFSC   _ECON1bits, 5
0010 2A00      01039         INCF    r0x00, F
0012 5000      01040         MOVF    r0x00, W
0014 80D8      01041         BSF     STATUS, 0
0016 66E8      01042         TSTFSZ  WREG
0018 90D8      01043         BCF     STATUS, 0
001A 6A00      01044         CLRF    r0x00
001C 3600      01045         RLCF    r0x00, F
001E 5000      01046         MOVF    r0x00, W
0020 CFE4 F000 01047         MOVFF   PREINC1, r0x00
0024 CFE4 FFD9 01048         MOVFF   PREINC1, FSR2L
0028 0012      01049         RETURN  
               01050 
               01051 ; ; Starting pCode block
               01052 S_ETH97J60__MACMemCopyAsync     code
0000 01053 _MACMemCopyAsync:
               01054 ;       .line   899; TCPIP_Stack/ETH97J60.c     void MACMemCopyAsync(WORD destAddr, WORD sourceAddr, WORD len)
0000 CFD9 FFE5 01055         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01056         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01057         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01058         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01059         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01060         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 01061         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 01062         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 01063         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 01064         MOVFF   r0x07, POSTDEC1
0028 0E02      01065         MOVLW   0x02
002A CFDB F000 01066         MOVFF   PLUSW2, _MACMemCopyAsync_destAddr_1_1
002E 0E03      01067         MOVLW   0x03
0030 CFDB F000 01068         MOVFF   PLUSW2, (_MACMemCopyAsync_destAddr_1_1 + 1)
0034 0E04      01069         MOVLW   0x04
0036 CFDB F000 01070         MOVFF   PLUSW2, _MACMemCopyAsync_sourceAddr_1_1
003A 0E05      01071         MOVLW   0x05
003C CFDB F000 01072         MOVFF   PLUSW2, (_MACMemCopyAsync_sourceAddr_1_1 + 1)
0040 0E06      01073         MOVLW   0x06
0042 CFDB F000 01074         MOVFF   PLUSW2, r0x00
0046 0E07      01075         MOVLW   0x07
0048 CFDB F000 01076         MOVFF   PLUSW2, r0x01
               01077 ;       .line   902; TCPIP_Stack/ETH97J60.c     BOOL UpdateWritePointer = FALSE;
004C 6A00      01078         CLRF    r0x02
               01079 ;       .line   903; TCPIP_Stack/ETH97J60.c     BOOL UpdateReadPointer = FALSE;
004E 6A00      01080         CLRF    r0x03
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0050 0000      01081         BANKSEL (_MACMemCopyAsync_destAddr_1_1 + 1)
               01082 ;       .line   905; TCPIP_Stack/ETH97J60.c     if(((WORD_VAL*)&destAddr)->bits.b15)
0052 AF00      01083         BTFSS   (_MACMemCopyAsync_destAddr_1_1 + 1), 7, B
0054 D000      01084         BRA     _00325_DS_
               01085 ;       .line   907; TCPIP_Stack/ETH97J60.c     UpdateWritePointer = TRUE;
0056 0E01      01086         MOVLW   0x01
0058 6E00      01087         MOVWF   r0x02
               01088 ;       .line   908; TCPIP_Stack/ETH97J60.c     destAddr = ((WORD)EWRPTH)<<8|EWRPTL;
005A C000 F000 01089         MOVFF   _EWRPTH, r0x04
005E 6A00      01090         CLRF    r0x05
0060 5000      01091         MOVF    r0x04, W
0062 6E00      01092         MOVWF   r0x07
0064 6A00      01093         CLRF    r0x06
0066 C000 F000 01094         MOVFF   _EWRPTL, r0x04
006A 6A00      01095         CLRF    r0x05
006C 5000      01096         MOVF    r0x04, W
006E 1000      01097         IORWF   r0x06, W
0070 0000      01098         BANKSEL _MACMemCopyAsync_destAddr_1_1
0072 6F00      01099         MOVWF   _MACMemCopyAsync_destAddr_1_1, B
0074 5000      01100         MOVF    r0x05, W
0076 1000      01101         IORWF   r0x07, W
0078 0000      01102         BANKSEL (_MACMemCopyAsync_destAddr_1_1 + 1)
007A 6F00      01103         MOVWF   (_MACMemCopyAsync_destAddr_1_1 + 1), B
007C 01104 _00325_DS_:
007C 0000      01105         BANKSEL (_MACMemCopyAsync_sourceAddr_1_1 + 1)
               01106 ;       .line   910; TCPIP_Stack/ETH97J60.c     if(((WORD_VAL*)&sourceAddr)->bits.b15)
007E AF00      01107         BTFSS   (_MACMemCopyAsync_sourceAddr_1_1 + 1), 7, B
0080 D000      01108         BRA     _00327_DS_
               01109 ;       .line   912; TCPIP_Stack/ETH97J60.c     UpdateReadPointer = TRUE;
0082 0E01      01110         MOVLW   0x01
0084 6E00      01111         MOVWF   r0x03
               01112 ;       .line   913; TCPIP_Stack/ETH97J60.c     sourceAddr = ((WORD)ERDPTH)<<8|ERDPTL;
0086 C000 F000 01113         MOVFF   _ERDPTH, r0x04
008A 6A00      01114         CLRF    r0x05
008C 5000      01115         MOVF    r0x04, W
008E 6E00      01116         MOVWF   r0x07
0090 6A00      01117         CLRF    r0x06
0092 C000 F000 01118         MOVFF   _ERDPTL, r0x04
0096 6A00      01119         CLRF    r0x05
0098 5000      01120         MOVF    r0x04, W
009A 1000      01121         IORWF   r0x06, W
009C 0000      01122         BANKSEL _MACMemCopyAsync_sourceAddr_1_1
009E 6F00      01123         MOVWF   _MACMemCopyAsync_sourceAddr_1_1, B
00A0 5000      01124         MOVF    r0x05, W
00A2 1000      01125         IORWF   r0x07, W
00A4 0000      01126         BANKSEL (_MACMemCopyAsync_sourceAddr_1_1 + 1)
00A6 6F00      01127         MOVWF   (_MACMemCopyAsync_sourceAddr_1_1 + 1), B
00A8 01128 _00327_DS_:
               01129 ;       .line   918; TCPIP_Stack/ETH97J60.c     if(len <= 1u)
00A8 0E00      01130         MOVLW   0x00
00AA 5C00      01131         SUBWF   r0x01, W
00AC E100      01132         BNZ     _00376_DS_
00AE 0E02      01133         MOVLW   0x02
00B0 5C00      01134         SUBWF   r0x00, W
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00B2 01135 _00376_DS_:
00B2 B0D8      01136         BTFSC   STATUS, 0
00B4 D000      01137         BRA     _00352_DS_
               01138 ;       .line   920; TCPIP_Stack/ETH97J60.c     ReadSave.Val = ((WORD)ERDPTH)<<8|ERDPTL;
00B6 C000 F000 01139         MOVFF   _ERDPTH, r0x04
00BA 6A00      01140         CLRF    r0x05
00BC 5000      01141         MOVF    r0x04, W
00BE 6E00      01142         MOVWF   r0x07
00C0 6A00      01143         CLRF    r0x06
00C2 C000 F000 01144         MOVFF   _ERDPTL, r0x04
00C6 6A00      01145         CLRF    r0x05
00C8 5000      01146         MOVF    r0x04, W
00CA 1200      01147         IORWF   r0x06, F
00CC 5000      01148         MOVF    r0x05, W
00CE 1200      01149         IORWF   r0x07, F
00D0 5000      01150         MOVF    r0x06, W
00D2 0000      01151         BANKSEL _MACMemCopyAsync_ReadSave_1_1
00D4 6F00      01152         MOVWF   _MACMemCopyAsync_ReadSave_1_1, B
00D6 5000      01153         MOVF    r0x07, W
00D8 0000      01154         BANKSEL (_MACMemCopyAsync_ReadSave_1_1 + 1)
00DA 6F00      01155         MOVWF   (_MACMemCopyAsync_ReadSave_1_1 + 1), B
               01156 ;       .line   921; TCPIP_Stack/ETH97J60.c     WriteSave.Val =  ((WORD)EWRPTH)<<8|EWRPTL;
00DC C000 F000 01157         MOVFF   _EWRPTH, r0x04
00E0 6A00      01158         CLRF    r0x05
00E2 5000      01159         MOVF    r0x04, W
00E4 6E00      01160         MOVWF   r0x07
00E6 6A00      01161         CLRF    r0x06
00E8 C000 F000 01162         MOVFF   _EWRPTL, r0x04
00EC 6A00      01163         CLRF    r0x05
00EE 5000      01164         MOVF    r0x04, W
00F0 1200      01165         IORWF   r0x06, F
00F2 5000      01166         MOVF    r0x05, W
00F4 1200      01167         IORWF   r0x07, F
00F6 5000      01168         MOVF    r0x06, W
00F8 0000      01169         BANKSEL _MACMemCopyAsync_WriteSave_1_1
00FA 6F00      01170         MOVWF   _MACMemCopyAsync_WriteSave_1_1, B
00FC 5000      01171         MOVF    r0x07, W
00FE 0000      01172         BANKSEL (_MACMemCopyAsync_WriteSave_1_1 + 1)
0100 6F00      01173         MOVWF   (_MACMemCopyAsync_WriteSave_1_1 + 1), B
0102 0000      01174         BANKSEL _MACMemCopyAsync_sourceAddr_1_1
               01175 ;       .line   922; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(sourceAddr);
0104 5100      01176         MOVF    _MACMemCopyAsync_sourceAddr_1_1, W, B
0106 6E00      01177         MOVWF   r0x04
0108 6A00      01178         CLRF    r0x05
010A 5000      01179         MOVF    r0x04, W
010C 6E00      01180         MOVWF   _ERDPTL
010E 0000      01181         BANKSEL (_MACMemCopyAsync_sourceAddr_1_1 + 1)
               01182 ;       .line   923; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(sourceAddr);
0110 5100      01183         MOVF    (_MACMemCopyAsync_sourceAddr_1_1 + 1), W, B
0112 6E00      01184         MOVWF   r0x04
0114 6A00      01185         CLRF    r0x05
0116 6A00      01186         CLRF    r0x05
0118 5000      01187         MOVF    r0x04, W
011A 6E00      01188         MOVWF   _ERDPTH
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
011C 0000      01189         BANKSEL _MACMemCopyAsync_destAddr_1_1
               01190 ;       .line   924; TCPIP_Stack/ETH97J60.c     EWRPTL = LOW(destAddr);
011E 5100      01191         MOVF    _MACMemCopyAsync_destAddr_1_1, W, B
0120 6E00      01192         MOVWF   r0x04
0122 6A00      01193         CLRF    r0x05
0124 5000      01194         MOVF    r0x04, W
0126 0000      01195         BANKSEL _EWRPTL
0128 6F00      01196         MOVWF   _EWRPTL, B
012A 0000      01197         BANKSEL (_MACMemCopyAsync_destAddr_1_1 + 1)
               01198 ;       .line   925; TCPIP_Stack/ETH97J60.c     EWRPTH = HIGH(destAddr);
012C 5100      01199         MOVF    (_MACMemCopyAsync_destAddr_1_1 + 1), W, B
012E 6E00      01200         MOVWF   r0x04
0130 6A00      01201         CLRF    r0x05
0132 6A00      01202         CLRF    r0x05
0134 5000      01203         MOVF    r0x04, W
0136 0000      01204         BANKSEL _EWRPTH
0138 6F00      01205         MOVWF   _EWRPTH, B
               01206 ;       .line   926; TCPIP_Stack/ETH97J60.c     while(len--) MACPut(MACGet());
013A C000 F000 01207         MOVFF   r0x00, r0x04
013E C000 F000 01208         MOVFF   r0x01, r0x05
0142 01209 _00328_DS_:
0142 C000 F000 01210         MOVFF   r0x04, r0x06
0146 C000 F000 01211         MOVFF   r0x05, r0x07
014A 0EFF      01212         MOVLW   0xff
014C 2600      01213         ADDWF   r0x04, F
014E A0D8      01214         BTFSS   STATUS, 0
0150 0600      01215         DECF    r0x05, F
0152 5000      01216         MOVF    r0x06, W
0154 1000      01217         IORWF   r0x07, W
0156 E000      01218         BZ      _00330_DS_
0158 EC00 F000 01219         CALL    _MACGet
015C 6E00      01220         MOVWF   r0x06
015E 5000      01221         MOVF    r0x06, W
0160 6EE5      01222         MOVWF   POSTDEC1
0162 EC00 F000 01223         CALL    _MACPut
0166 2AE1      01224         INCF    FSR1L, F
0168 D000      01225         BRA     _00328_DS_
016A 01226 _00330_DS_:
               01227 ;       .line   927; TCPIP_Stack/ETH97J60.c     if(!UpdateReadPointer)
016A 5000      01228         MOVF    r0x03, W
016C E100      01229         BNZ     _00332_DS_
016E 0000      01230         BANKSEL _MACMemCopyAsync_ReadSave_1_1
               01231 ;       .line   929; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(ReadSave.Val);
0170 5100      01232         MOVF    _MACMemCopyAsync_ReadSave_1_1, W, B
0172 6E00      01233         MOVWF   r0x04
0174 6A00      01234         CLRF    r0x05
0176 5000      01235         MOVF    r0x04, W
0178 6E00      01236         MOVWF   _ERDPTL
017A 0000      01237         BANKSEL (_MACMemCopyAsync_ReadSave_1_1 + 1)
               01238 ;       .line   930; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(ReadSave.Val);
017C 5100      01239         MOVF    (_MACMemCopyAsync_ReadSave_1_1 + 1), W, B
017E 6E00      01240         MOVWF   r0x04
0180 6A00      01241         CLRF    r0x05
0182 6A00      01242         CLRF    r0x05
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0184 5000      01243         MOVF    r0x04, W
0186 6E00      01244         MOVWF   _ERDPTH
0188 01245 _00332_DS_:
               01246 ;       .line   932; TCPIP_Stack/ETH97J60.c     if(!UpdateWritePointer)
0188 5000      01247         MOVF    r0x02, W
018A A4D8      01248         BTFSS   STATUS, 2
018C D000      01249         BRA     _00354_DS_
018E 0000      01250         BANKSEL _MACMemCopyAsync_WriteSave_1_1
               01251 ;       .line   934; TCPIP_Stack/ETH97J60.c     EWRPTL = LOW(WriteSave.Val);
0190 5100      01252         MOVF    _MACMemCopyAsync_WriteSave_1_1, W, B
0192 6E00      01253         MOVWF   r0x04
0194 6A00      01254         CLRF    r0x05
0196 5000      01255         MOVF    r0x04, W
0198 0000      01256         BANKSEL _EWRPTL
019A 6F00      01257         MOVWF   _EWRPTL, B
019C 0000      01258         BANKSEL (_MACMemCopyAsync_WriteSave_1_1 + 1)
               01259 ;       .line   935; TCPIP_Stack/ETH97J60.c     EWRPTH = HIGH(WriteSave.Val);
019E 5100      01260         MOVF    (_MACMemCopyAsync_WriteSave_1_1 + 1), W, B
01A0 6E00      01261         MOVWF   r0x04
01A2 6A00      01262         CLRF    r0x05
01A4 6A00      01263         CLRF    r0x05
01A6 5000      01264         MOVF    r0x04, W
01A8 0000      01265         BANKSEL _EWRPTH
01AA 6F00      01266         MOVWF   _EWRPTH, B
01AC D000      01267         BRA     _00354_DS_
01AE 01268 _00352_DS_:
               01269 ;       .line   940; TCPIP_Stack/ETH97J60.c     if(UpdateWritePointer)
01AE 5000      01270         MOVF    r0x02, W
01B0 E000      01271         BZ      _00336_DS_
               01272 ;       .line   942; TCPIP_Stack/ETH97J60.c     WriteSave.Val = destAddr + len;
01B2 5000      01273         MOVF    r0x00, W
01B4 0000      01274         BANKSEL _MACMemCopyAsync_destAddr_1_1
01B6 2500      01275         ADDWF   _MACMemCopyAsync_destAddr_1_1, W, B
01B8 6E00      01276         MOVWF   r0x02
01BA 5000      01277         MOVF    r0x01, W
01BC 0000      01278         BANKSEL (_MACMemCopyAsync_destAddr_1_1 + 1)
01BE 2100      01279         ADDWFC  (_MACMemCopyAsync_destAddr_1_1 + 1), W, B
01C0 6E00      01280         MOVWF   r0x04
01C2 5000      01281         MOVF    r0x02, W
01C4 0000      01282         BANKSEL _MACMemCopyAsync_WriteSave_1_1
01C6 6F00      01283         MOVWF   _MACMemCopyAsync_WriteSave_1_1, B
01C8 5000      01284         MOVF    r0x04, W
01CA 0000      01285         BANKSEL (_MACMemCopyAsync_WriteSave_1_1 + 1)
01CC 6F00      01286         MOVWF   (_MACMemCopyAsync_WriteSave_1_1 + 1), B
               01287 ;       .line   943; TCPIP_Stack/ETH97J60.c     EWRPTL = LOW(WriteSave.Val);
01CE C000 FFE8 01288         MOVFF   _MACMemCopyAsync_WriteSave_1_1, WREG
01D2 C000 FFE8 01289         MOVFF   (_MACMemCopyAsync_WriteSave_1_1 + 1), WREG
01D6 5000      01290         MOVF    r0x02, W
01D8 6E00      01291         MOVWF   r0x05
01DA 6A00      01292         CLRF    r0x06
01DC 5000      01293         MOVF    r0x05, W
01DE 0000      01294         BANKSEL _EWRPTL
01E0 6F00      01295         MOVWF   _EWRPTL, B
               01296 ;       .line   944; TCPIP_Stack/ETH97J60.c     EWRPTH = HIGH(WriteSave.Val);
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
01E2 C000 FFE8 01297         MOVFF   _MACMemCopyAsync_WriteSave_1_1, WREG
01E6 C000 FFE8 01298         MOVFF   (_MACMemCopyAsync_WriteSave_1_1 + 1), WREG
01EA 5000      01299         MOVF    r0x04, W
01EC 6E00      01300         MOVWF   r0x02
01EE 6A00      01301         CLRF    r0x04
01F0 6A00      01302         CLRF    r0x04
01F2 5000      01303         MOVF    r0x02, W
01F4 0000      01304         BANKSEL _EWRPTH
01F6 6F00      01305         MOVWF   _EWRPTH, B
01F8 01306 _00336_DS_:
01F8 0000      01307         BANKSEL _MACMemCopyAsync_sourceAddr_1_1
               01308 ;       .line   946; TCPIP_Stack/ETH97J60.c     len += sourceAddr - 1;
01FA 5100      01309         MOVF    _MACMemCopyAsync_sourceAddr_1_1, W, B
01FC 0FFF      01310         ADDLW   0xff
01FE 6E00      01311         MOVWF   r0x02
0200 0EFF      01312         MOVLW   0xff
0202 0000      01313         BANKSEL (_MACMemCopyAsync_sourceAddr_1_1 + 1)
0204 2100      01314         ADDWFC  (_MACMemCopyAsync_sourceAddr_1_1 + 1), W, B
0206 6E00      01315         MOVWF   r0x04
0208 5000      01316         MOVF    r0x02, W
020A 2600      01317         ADDWF   r0x00, F
020C 5000      01318         MOVF    r0x04, W
020E 2200      01319         ADDWFC  r0x01, F
0210 01320 _00337_DS_:
               01321 ;       .line   947; TCPIP_Stack/ETH97J60.c     while(ECON1bits.DMAST);
0210 BA00      01322         BTFSC   _ECON1bits, 5
0212 D000      01323         BRA     _00337_DS_
0214 0000      01324         BANKSEL _MACMemCopyAsync_sourceAddr_1_1
               01325 ;       .line   948; TCPIP_Stack/ETH97J60.c     EDMASTL = LOW(sourceAddr);
0216 5100      01326         MOVF    _MACMemCopyAsync_sourceAddr_1_1, W, B
0218 6E00      01327         MOVWF   r0x02
021A 6A00      01328         CLRF    r0x04
021C 5000      01329         MOVF    r0x02, W
021E 0000      01330         BANKSEL _EDMASTL
0220 6F00      01331         MOVWF   _EDMASTL, B
0222 0000      01332         BANKSEL (_MACMemCopyAsync_sourceAddr_1_1 + 1)
               01333 ;       .line   949; TCPIP_Stack/ETH97J60.c     EDMASTH = HIGH(sourceAddr);
0224 5100      01334         MOVF    (_MACMemCopyAsync_sourceAddr_1_1 + 1), W, B
0226 6E00      01335         MOVWF   r0x02
0228 6A00      01336         CLRF    r0x04
022A 6A00      01337         CLRF    r0x04
022C 5000      01338         MOVF    r0x02, W
022E 0000      01339         BANKSEL _EDMASTH
0230 6F00      01340         MOVWF   _EDMASTH, B
0232 0000      01341         BANKSEL _MACMemCopyAsync_destAddr_1_1
               01342 ;       .line   950; TCPIP_Stack/ETH97J60.c     EDMADSTL = LOW(destAddr);
0234 5100      01343         MOVF    _MACMemCopyAsync_destAddr_1_1, W, B
0236 6E00      01344         MOVWF   r0x02
0238 6A00      01345         CLRF    r0x04
023A 5000      01346         MOVF    r0x02, W
023C 0000      01347         BANKSEL _EDMADSTL
023E 6F00      01348         MOVWF   _EDMADSTL, B
0240 0000      01349         BANKSEL (_MACMemCopyAsync_destAddr_1_1 + 1)
               01350 ;       .line   951; TCPIP_Stack/ETH97J60.c     EDMADSTH = HIGH(destAddr);
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0242 5100      01351         MOVF    (_MACMemCopyAsync_destAddr_1_1 + 1), W, B
0244 6E00      01352         MOVWF   r0x02
0246 6A00      01353         CLRF    r0x04
0248 6A00      01354         CLRF    r0x04
024A 5000      01355         MOVF    r0x02, W
024C 0000      01356         BANKSEL _EDMADSTH
024E 6F00      01357         MOVWF   _EDMADSTH, B
               01358 ;       .line   952; TCPIP_Stack/ETH97J60.c     if((sourceAddr <= RXSTOP) && (len > RXSTOP))
0250 C000 F000 01359         MOVFF   _MACMemCopyAsync_sourceAddr_1_1, r0x02
0254 C000 F000 01360         MOVFF   (_MACMemCopyAsync_sourceAddr_1_1 + 1), r0x04
0258 6A00      01361         CLRF    r0x05
025A 6A00      01362         CLRF    r0x06
025C 0E00      01363         MOVLW   0x00
025E 5C00      01364         SUBWF   r0x06, W
0260 E100      01365         BNZ     _00394_DS_
0262 0E00      01366         MOVLW   0x00
0264 5C00      01367         SUBWF   r0x05, W
0266 E100      01368         BNZ     _00394_DS_
0268 0E1A      01369         MOVLW   0x1a
026A 5C00      01370         SUBWF   r0x04, W
026C E100      01371         BNZ     _00394_DS_
026E 0E0A      01372         MOVLW   0x0a
0270 5C00      01373         SUBWF   r0x02, W
0272 01374 _00394_DS_:
0272 6A00      01375         CLRF    r0x02
0274 3600      01376         RLCF    r0x02, F
0276 5000      01377         MOVF    r0x02, W
0278 E100      01378         BNZ     _00341_DS_
027A C000 F000 01379         MOVFF   r0x00, r0x04
027E C000 F000 01380         MOVFF   r0x01, r0x05
0282 6A00      01381         CLRF    r0x06
0284 6A00      01382         CLRF    r0x07
0286 0E00      01383         MOVLW   0x00
0288 5C00      01384         SUBWF   r0x07, W
028A E100      01385         BNZ     _00395_DS_
028C 0E00      01386         MOVLW   0x00
028E 5C00      01387         SUBWF   r0x06, W
0290 E100      01388         BNZ     _00395_DS_
0292 0E1A      01389         MOVLW   0x1a
0294 5C00      01390         SUBWF   r0x05, W
0296 E100      01391         BNZ     _00395_DS_
0298 0E0A      01392         MOVLW   0x0a
029A 5C00      01393         SUBWF   r0x04, W
029C 01394 _00395_DS_:
029C E300      01395         BNC     _00341_DS_
               01396 ;       .line   953; TCPIP_Stack/ETH97J60.c     len -= RXSIZE; //it is a circular buffer
029E 0EF6      01397         MOVLW   0xf6
02A0 2600      01398         ADDWF   r0x04, F
02A2 0EE5      01399         MOVLW   0xe5
02A4 2200      01400         ADDWFC  r0x05, F
02A6 0EFF      01401         MOVLW   0xff
02A8 2200      01402         ADDWFC  r0x06, F
02AA 0EFF      01403         MOVLW   0xff
02AC 2200      01404         ADDWFC  r0x07, F
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
02AE 5000      01405         MOVF    r0x04, W
02B0 6E00      01406         MOVWF   r0x00
02B2 5000      01407         MOVF    r0x05, W
02B4 6E00      01408         MOVWF   r0x01
02B6 01409 _00341_DS_:
               01410 ;       .line   954; TCPIP_Stack/ETH97J60.c     EDMANDL = LOW(len);
02B6 5000      01411         MOVF    r0x00, W
02B8 6E00      01412         MOVWF   r0x04
02BA 6A00      01413         CLRF    r0x05
02BC 5000      01414         MOVF    r0x04, W
02BE 0000      01415         BANKSEL _EDMANDL
02C0 6F00      01416         MOVWF   _EDMANDL, B
               01417 ;       .line   955; TCPIP_Stack/ETH97J60.c     EDMANDH = HIGH(len);
02C2 5000      01418         MOVF    r0x01, W
02C4 6E00      01419         MOVWF   r0x04
02C6 6A00      01420         CLRF    r0x05
02C8 6A00      01421         CLRF    r0x05
02CA 5000      01422         MOVF    r0x04, W
02CC 0000      01423         BANKSEL _EDMANDH
02CE 6F00      01424         MOVWF   _EDMANDH, B
               01425 ;       .line   956; TCPIP_Stack/ETH97J60.c     ECON1bits.CSUMEN = 0;
02D0 9800      01426         BCF     _ECON1bits, 4
               01427 ;       .line   957; TCPIP_Stack/ETH97J60.c     ECON1bits.DMAST = 1;
02D2 8A00      01428         BSF     _ECON1bits, 5
02D4 01429 _00343_DS_:
               01430 ;       .line   958; TCPIP_Stack/ETH97J60.c     while(ECON1bits.DMAST); // DMA requires that you must not 
02D4 BA00      01431         BTFSC   _ECON1bits, 5
02D6 D000      01432         BRA     _00343_DS_
               01433 ;       .line   961; TCPIP_Stack/ETH97J60.c     if(UpdateReadPointer)
02D8 5000      01434         MOVF    r0x03, W
02DA E000      01435         BZ      _00354_DS_
               01436 ;       .line   963; TCPIP_Stack/ETH97J60.c     len++;
02DC 2A00      01437         INCF    r0x00, F
02DE B0D8      01438         BTFSC   STATUS, 0
02E0 2A00      01439         INCF    r0x01, F
               01440 ;       .line   964; TCPIP_Stack/ETH97J60.c     if((sourceAddr <= RXSTOP) && (len > RXSTOP))
02E2 5000      01441         MOVF    r0x02, W
02E4 E100      01442         BNZ     _00347_DS_
02E6 C000 F000 01443         MOVFF   r0x00, r0x02
02EA C000 F000 01444         MOVFF   r0x01, r0x03
02EE 6A00      01445         CLRF    r0x04
02F0 6A00      01446         CLRF    r0x05
02F2 0E00      01447         MOVLW   0x00
02F4 5C00      01448         SUBWF   r0x05, W
02F6 E100      01449         BNZ     _00398_DS_
02F8 0E00      01450         MOVLW   0x00
02FA 5C00      01451         SUBWF   r0x04, W
02FC E100      01452         BNZ     _00398_DS_
02FE 0E1A      01453         MOVLW   0x1a
0300 5C00      01454         SUBWF   r0x03, W
0302 E100      01455         BNZ     _00398_DS_
0304 0E0A      01456         MOVLW   0x0a
0306 5C00      01457         SUBWF   r0x02, W
0308 01458 _00398_DS_:
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0308 E300      01459         BNC     _00347_DS_
               01460 ;       .line   965; TCPIP_Stack/ETH97J60.c     len -= RXSIZE;
030A 0EF6      01461         MOVLW   0xf6
030C 2600      01462         ADDWF   r0x02, F
030E 0EE5      01463         MOVLW   0xe5
0310 2200      01464         ADDWFC  r0x03, F
0312 0EFF      01465         MOVLW   0xff
0314 2200      01466         ADDWFC  r0x04, F
0316 0EFF      01467         MOVLW   0xff
0318 2200      01468         ADDWFC  r0x05, F
031A 5000      01469         MOVF    r0x02, W
031C 6E00      01470         MOVWF   r0x00
031E 5000      01471         MOVF    r0x03, W
0320 6E00      01472         MOVWF   r0x01
0322 01473 _00347_DS_:
               01474 ;       .line   966; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(len);
0322 5000      01475         MOVF    r0x00, W
0324 6E00      01476         MOVWF   r0x02
0326 6A00      01477         CLRF    r0x03
0328 5000      01478         MOVF    r0x02, W
032A 6E00      01479         MOVWF   _ERDPTL
               01480 ;       .line   967; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(len);
032C 5000      01481         MOVF    r0x01, W
032E 6E00      01482         MOVWF   r0x00
0330 6A00      01483         CLRF    r0x01
0332 6A00      01484         CLRF    r0x01
0334 5000      01485         MOVF    r0x00, W
0336 6E00      01486         MOVWF   _ERDPTH
0338 01487 _00354_DS_:
0338 CFE4 F000 01488         MOVFF   PREINC1, r0x07
033C CFE4 F000 01489         MOVFF   PREINC1, r0x06
0340 CFE4 F000 01490         MOVFF   PREINC1, r0x05
0344 CFE4 F000 01491         MOVFF   PREINC1, r0x04
0348 CFE4 F000 01492         MOVFF   PREINC1, r0x03
034C CFE4 F000 01493         MOVFF   PREINC1, r0x02
0350 CFE4 F000 01494         MOVFF   PREINC1, r0x01
0354 CFE4 F000 01495         MOVFF   PREINC1, r0x00
0358 CFE4 FFD9 01496         MOVFF   PREINC1, FSR2L
035C 0012      01497         RETURN  
               01498 
               01499 ; ; Starting pCode block
               01500 S_ETH97J60__CalcIPBufferChecksum        code
0000 01501 _CalcIPBufferChecksum:
               01502 ;       .line   824; TCPIP_Stack/ETH97J60.c     WORD CalcIPBufferChecksum(WORD len)
0000 CFD9 FFE5 01503         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01504         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01505         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01506         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01507         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01508         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 01509         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 01510         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 01511         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 01512         MOVFF   r0x07, POSTDEC1
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0028 C000 FFE5 01513         MOVFF   r0x08, POSTDEC1
002C C000 FFE5 01514         MOVFF   r0x09, POSTDEC1
0030 C000 FFE5 01515         MOVFF   r0x0a, POSTDEC1
0034 C000 FFE5 01516         MOVFF   r0x0b, POSTDEC1
0038 C000 FFE5 01517         MOVFF   r0x0c, POSTDEC1
003C 0E02      01518         MOVLW   0x02
003E CFDB F000 01519         MOVFF   PLUSW2, r0x00
0042 0E03      01520         MOVLW   0x03
0044 CFDB F000 01521         MOVFF   PLUSW2, r0x01
0048 0000      01522         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
               01523 ;       .line   827; TCPIP_Stack/ETH97J60.c     DWORD_VAL Checksum = {0x00000000ul};
004A 6B00      01524         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
004C 0000      01525         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
004E 6B00      01526         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
0050 0000      01527         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0052 6B00      01528         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
0054 0000      01529         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0056 6B00      01530         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
0058 0000      01531         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
005A 6B00      01532         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
005C 0000      01533         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
005E 6B00      01534         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
0060 0000      01535         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0062 6B00      01536         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
0064 0000      01537         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0066 6B00      01538         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
0068 0000      01539         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
006A 6B00      01540         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
006C 0000      01541         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
006E 6B00      01542         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
0070 0000      01543         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0072 6B00      01544         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
0074 0000      01545         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0076 6B00      01546         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
0078 0000      01547         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
007A 6B00      01548         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
007C 0000      01549         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
007E 6B00      01550         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
0080 0000      01551         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0082 6B00      01552         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
0084 0000      01553         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0086 6B00      01554         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
0088 0000      01555         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
008A 6B00      01556         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
008C 0000      01557         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
008E 6B00      01558         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
0090 0000      01559         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0092 6B00      01560         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
0094 0000      01561         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0096 6B00      01562         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
0098 0000      01563         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
009A 6B00      01564         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
009C 0000      01565         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
009E 6B00      01566         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00A0 0000      01567         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00A2 6B00      01568         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
00A4 0000      01569         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00A6 6B00      01570         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
00A8 0000      01571         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00AA 6B00      01572         CLRF    _CalcIPBufferChecksum_Checksum_1_1, B
00AC 0000      01573         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00AE 6B00      01574         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
00B0 0000      01575         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00B2 9100      01576         BCF     _CalcIPBufferChecksum_Checksum_1_1, 0, B
00B4 0000      01577         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00B6 9300      01578         BCF     _CalcIPBufferChecksum_Checksum_1_1, 1, B
00B8 0000      01579         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00BA 9500      01580         BCF     _CalcIPBufferChecksum_Checksum_1_1, 2, B
00BC 0000      01581         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00BE 9700      01582         BCF     _CalcIPBufferChecksum_Checksum_1_1, 3, B
00C0 0000      01583         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00C2 9900      01584         BCF     _CalcIPBufferChecksum_Checksum_1_1, 4, B
00C4 0000      01585         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00C6 9B00      01586         BCF     _CalcIPBufferChecksum_Checksum_1_1, 5, B
00C8 0000      01587         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00CA 9D00      01588         BCF     _CalcIPBufferChecksum_Checksum_1_1, 6, B
00CC 0000      01589         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
00CE 9F00      01590         BCF     _CalcIPBufferChecksum_Checksum_1_1, 7, B
00D0 0000      01591         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00D2 9100      01592         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 0, B
00D4 0000      01593         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00D6 9300      01594         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 1, B
00D8 0000      01595         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00DA 9500      01596         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 2, B
00DC 0000      01597         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00DE 9700      01598         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 3, B
00E0 0000      01599         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00E2 9900      01600         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 4, B
00E4 0000      01601         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00E6 9B00      01602         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 5, B
00E8 0000      01603         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00EA 9D00      01604         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 6, B
00EC 0000      01605         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
00EE 9F00      01606         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 7, B
00F0 0000      01607         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
00F2 6B00      01608         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
00F4 0000      01609         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
00F6 6B00      01610         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
00F8 0000      01611         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
00FA 6B00      01612         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
00FC 0000      01613         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
00FE 6B00      01614         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
0100 0000      01615         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0102 6B00      01616         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
0104 0000      01617         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0106 6B00      01618         CLRF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
0108 0000      01619         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
010A 9100      01620         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 0, B
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
010C 0000      01621         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
010E 9300      01622         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 1, B
0110 0000      01623         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0112 9500      01624         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 2, B
0114 0000      01625         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0116 9700      01626         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 3, B
0118 0000      01627         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
011A 9900      01628         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 4, B
011C 0000      01629         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
011E 9B00      01630         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 5, B
0120 0000      01631         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0122 9D00      01632         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 6, B
0124 0000      01633         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0126 9F00      01634         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 7, B
0128 0000      01635         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
012A 9100      01636         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 0, B
012C 0000      01637         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
012E 9300      01638         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 1, B
0130 0000      01639         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0132 9500      01640         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 2, B
0134 0000      01641         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0136 9700      01642         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 3, B
0138 0000      01643         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
013A 9900      01644         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 4, B
013C 0000      01645         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
013E 9B00      01646         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 5, B
0140 0000      01647         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0142 9D00      01648         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 6, B
0144 0000      01649         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0146 9F00      01650         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 7, B
0148 0000      01651         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
014A 9100      01652         BCF     _CalcIPBufferChecksum_Checksum_1_1, 0, B
014C 0000      01653         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
014E 9300      01654         BCF     _CalcIPBufferChecksum_Checksum_1_1, 1, B
0150 0000      01655         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
0152 9500      01656         BCF     _CalcIPBufferChecksum_Checksum_1_1, 2, B
0154 0000      01657         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
0156 9700      01658         BCF     _CalcIPBufferChecksum_Checksum_1_1, 3, B
0158 0000      01659         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
015A 9900      01660         BCF     _CalcIPBufferChecksum_Checksum_1_1, 4, B
015C 0000      01661         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
015E 9B00      01662         BCF     _CalcIPBufferChecksum_Checksum_1_1, 5, B
0160 0000      01663         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
0162 9D00      01664         BCF     _CalcIPBufferChecksum_Checksum_1_1, 6, B
0164 0000      01665         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
0166 9F00      01666         BCF     _CalcIPBufferChecksum_Checksum_1_1, 7, B
0168 0000      01667         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
016A 9100      01668         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 0, B
016C 0000      01669         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
016E 9300      01670         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 1, B
0170 0000      01671         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
0172 9500      01672         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 2, B
0174 0000      01673         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
0176 9700      01674         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 3, B
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0178 0000      01675         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
017A 9900      01676         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 4, B
017C 0000      01677         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
017E 9B00      01678         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 5, B
0180 0000      01679         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
0182 9D00      01680         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 6, B
0184 0000      01681         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
0186 9F00      01682         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 1), 7, B
0188 0000      01683         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
018A 9100      01684         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 0, B
018C 0000      01685         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
018E 9300      01686         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 1, B
0190 0000      01687         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0192 9500      01688         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 2, B
0194 0000      01689         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0196 9700      01690         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 3, B
0198 0000      01691         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
019A 9900      01692         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 4, B
019C 0000      01693         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
019E 9B00      01694         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 5, B
01A0 0000      01695         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
01A2 9D00      01696         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 6, B
01A4 0000      01697         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
01A6 9F00      01698         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 2), 7, B
01A8 0000      01699         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01AA 9100      01700         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 0, B
01AC 0000      01701         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01AE 9300      01702         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 1, B
01B0 0000      01703         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01B2 9500      01704         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 2, B
01B4 0000      01705         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01B6 9700      01706         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 3, B
01B8 0000      01707         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01BA 9900      01708         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 4, B
01BC 0000      01709         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01BE 9B00      01710         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 5, B
01C0 0000      01711         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01C2 9D00      01712         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 6, B
01C4 0000      01713         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
01C6 9F00      01714         BCF     (_CalcIPBufferChecksum_Checksum_1_1 + 3), 7, B
               01715 ;       .line   833; TCPIP_Stack/ETH97J60.c     Start = ((WORD)ERDPTH)<<8|ERDPTL;
01C8 C000 F000 01716         MOVFF   _ERDPTH, r0x02
01CC 6A00      01717         CLRF    r0x03
01CE 5000      01718         MOVF    r0x02, W
01D0 6E00      01719         MOVWF   r0x05
01D2 6A00      01720         CLRF    r0x04
01D4 C000 F000 01721         MOVFF   _ERDPTL, r0x02
01D8 6A00      01722         CLRF    r0x03
01DA 5000      01723         MOVF    r0x04, W
01DC 1200      01724         IORWF   r0x02, F
01DE 5000      01725         MOVF    r0x05, W
01E0 1200      01726         IORWF   r0x03, F
01E2 01727 _00305_DS_:
               01728 ;       .line   835; TCPIP_Stack/ETH97J60.c     while(len)
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
01E2 5000      01729         MOVF    r0x00, W
01E4 1000      01730         IORWF   r0x01, W
01E6 B4D8      01731         BTFSC   STATUS, 2
01E8 D000      01732         BRA     _00307_DS_
               01733 ;       .line   839; TCPIP_Stack/ETH97J60.c     ChunkLen = len > sizeof(DataBuffer) ? sizeof(DataBuffer) : len;
01EA 0E00      01734         MOVLW   0x00
01EC 5C00      01735         SUBWF   r0x01, W
01EE E100      01736         BNZ     _00319_DS_
01F0 0E15      01737         MOVLW   0x15
01F2 5C00      01738         SUBWF   r0x00, W
01F4 01739 _00319_DS_:
01F4 E300      01740         BNC     _00310_DS_
01F6 0E14      01741         MOVLW   0x14
01F8 6E00      01742         MOVWF   r0x04
01FA 6A00      01743         CLRF    r0x05
01FC D000      01744         BRA     _00311_DS_
01FE 01745 _00310_DS_:
01FE C000 F000 01746         MOVFF   r0x00, r0x04
0202 C000 F000 01747         MOVFF   r0x01, r0x05
0206 01748 _00311_DS_:
0206 C000 F000 01749         MOVFF   r0x04, _CalcIPBufferChecksum_ChunkLen_1_1
020A C000 F000 01750         MOVFF   r0x05, (_CalcIPBufferChecksum_ChunkLen_1_1 + 1)
               01751 ;       .line   840; TCPIP_Stack/ETH97J60.c     MACGetArray(DataBuffer, ChunkLen);
020E 0E00      01752         MOVLW   HIGH(_CalcIPBufferChecksum_DataBuffer_1_1)
0210 6E00      01753         MOVWF   r0x07
0212 0E00      01754         MOVLW   LOW(_CalcIPBufferChecksum_DataBuffer_1_1)
0214 6E00      01755         MOVWF   r0x06
0216 0E80      01756         MOVLW   0x80
0218 6E00      01757         MOVWF   r0x08
021A 5000      01758         MOVF    r0x05, W
021C 6EE5      01759         MOVWF   POSTDEC1
021E 5000      01760         MOVF    r0x04, W
0220 6EE5      01761         MOVWF   POSTDEC1
0222 5000      01762         MOVF    r0x08, W
0224 6EE5      01763         MOVWF   POSTDEC1
0226 5000      01764         MOVF    r0x07, W
0228 6EE5      01765         MOVWF   POSTDEC1
022A 5000      01766         MOVF    r0x06, W
022C 6EE5      01767         MOVWF   POSTDEC1
022E EC00 F000 01768         CALL    _MACGetArray
0232 0E05      01769         MOVLW   0x05
0234 26E1      01770         ADDWF   FSR1L, F
               01771 ;       .line   842; TCPIP_Stack/ETH97J60.c     len -= ChunkLen;
0236 5000      01772         MOVF    r0x04, W
0238 5E00      01773         SUBWF   r0x00, F
023A 5000      01774         MOVF    r0x05, W
023C 5A00      01775         SUBWFB  r0x01, F
023E 0000      01776         BANKSEL _CalcIPBufferChecksum_ChunkLen_1_1
               01777 ;       .line   845; TCPIP_Stack/ETH97J60.c     if(((WORD_VAL*)&ChunkLen)->bits.b0)
0240 A100      01778         BTFSS   _CalcIPBufferChecksum_ChunkLen_1_1, 0, B
0242 D000      01779         BRA     _00301_DS_
               01780 ;       .line   847; TCPIP_Stack/ETH97J60.c     DataBuffer[ChunkLen] = 0x00;
0244 0E00      01781         MOVLW   LOW(_CalcIPBufferChecksum_DataBuffer_1_1)
0246 0000      01782         BANKSEL _CalcIPBufferChecksum_ChunkLen_1_1
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0248 2500      01783         ADDWF   _CalcIPBufferChecksum_ChunkLen_1_1, W, B
024A 6E00      01784         MOVWF   r0x04
024C 0E00      01785         MOVLW   HIGH(_CalcIPBufferChecksum_DataBuffer_1_1)
024E 0000      01786         BANKSEL (_CalcIPBufferChecksum_ChunkLen_1_1 + 1)
0250 2100      01787         ADDWFC  (_CalcIPBufferChecksum_ChunkLen_1_1 + 1), W, B
0252 6E00      01788         MOVWF   r0x05
0254 C000 FFE9 01789         MOVFF   r0x04, FSR0L
0258 C000 FFEA 01790         MOVFF   r0x05, FSR0H
025C 0E00      01791         MOVLW   0x00
025E 6EEF      01792         MOVWF   INDF0
0260 0000      01793         BANKSEL _CalcIPBufferChecksum_ChunkLen_1_1
               01794 ;       .line   848; TCPIP_Stack/ETH97J60.c     ChunkLen++;
0262 2B00      01795         INCF    _CalcIPBufferChecksum_ChunkLen_1_1, F, B
0264 E300      01796         BNC     _10492_DS_
0266 0000      01797         BANKSEL (_CalcIPBufferChecksum_ChunkLen_1_1 + 1)
0268 2B00      01798         INCF    (_CalcIPBufferChecksum_ChunkLen_1_1 + 1), F, B
026A 01799 _10492_DS_:
026A 01800 _00301_DS_:
               01801 ;       .line   852; TCPIP_Stack/ETH97J60.c     DataPtr = (WORD*)&DataBuffer[0];
026A 0E00      01802         MOVLW   HIGH(_CalcIPBufferChecksum_DataBuffer_1_1)
026C 6E00      01803         MOVWF   r0x05
026E 0E00      01804         MOVLW   LOW(_CalcIPBufferChecksum_DataBuffer_1_1)
0270 6E00      01805         MOVWF   r0x04
0272 0E80      01806         MOVLW   0x80
0274 6E00      01807         MOVWF   r0x06
               01808 ;       .line   853; TCPIP_Stack/ETH97J60.c     while(ChunkLen)
0276 C000 F000 01809         MOVFF   _CalcIPBufferChecksum_ChunkLen_1_1, r0x07
027A C000 F000 01810         MOVFF   (_CalcIPBufferChecksum_ChunkLen_1_1 + 1), r0x08
027E 01811 _00302_DS_:
027E 5000      01812         MOVF    r0x07, W
0280 1000      01813         IORWF   r0x08, W
0282 B4D8      01814         BTFSC   STATUS, 2
0284 D000      01815         BRA     _00305_DS_
               01816 ;       .line   855; TCPIP_Stack/ETH97J60.c     Checksum.Val += *DataPtr++;
0286 C000 FFE9 01817         MOVFF   r0x04, FSR0L
028A C000 FFF3 01818         MOVFF   r0x05, PRODL
028E 5000      01819         MOVF    r0x06, W
0290 EC00 F000 01820         CALL    __gptrget2
0294 6E00      01821         MOVWF   r0x09
0296 CFF3 F000 01822         MOVFF   PRODL, r0x0a
029A 0E02      01823         MOVLW   0x02
029C 2600      01824         ADDWF   r0x04, F
029E 0E00      01825         MOVLW   0x00
02A0 2200      01826         ADDWFC  r0x05, F
02A2 0E00      01827         MOVLW   0x00
02A4 2200      01828         ADDWFC  r0x06, F
02A6 6A00      01829         CLRF    r0x0b
02A8 6A00      01830         CLRF    r0x0c
02AA 0000      01831         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
02AC 5100      01832         MOVF    _CalcIPBufferChecksum_Checksum_1_1, W, B
02AE 2600      01833         ADDWF   r0x09, F
02B0 0000      01834         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
02B2 5100      01835         MOVF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), W, B
02B4 2200      01836         ADDWFC  r0x0a, F
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
02B6 0000      01837         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
02B8 5100      01838         MOVF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), W, B
02BA 2200      01839         ADDWFC  r0x0b, F
02BC 0000      01840         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
02BE 5100      01841         MOVF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), W, B
02C0 2200      01842         ADDWFC  r0x0c, F
02C2 5000      01843         MOVF    r0x09, W
02C4 0000      01844         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
02C6 6F00      01845         MOVWF   _CalcIPBufferChecksum_Checksum_1_1, B
02C8 5000      01846         MOVF    r0x0a, W
02CA 0000      01847         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
02CC 6F00      01848         MOVWF   (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
02CE 5000      01849         MOVF    r0x0b, W
02D0 0000      01850         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
02D2 6F00      01851         MOVWF   (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
02D4 5000      01852         MOVF    r0x0c, W
02D6 0000      01853         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
02D8 6F00      01854         MOVWF   (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
               01855 ;       .line   856; TCPIP_Stack/ETH97J60.c     ChunkLen -= 2;
02DA 0EFE      01856         MOVLW   0xfe
02DC 2600      01857         ADDWF   r0x07, F
02DE A0D8      01858         BTFSS   STATUS, 0
02E0 0600      01859         DECF    r0x08, F
02E2 D000      01860         BRA     _00302_DS_
02E4 01861 _00307_DS_:
               01862 ;       .line   861; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(Start);
02E4 5000      01863         MOVF    r0x02, W
02E6 6E00      01864         MOVWF   r0x00
02E8 6A00      01865         CLRF    r0x01
02EA 5000      01866         MOVF    r0x00, W
02EC 6E00      01867         MOVWF   _ERDPTL
               01868 ;       .line   862; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(Start);
02EE 5000      01869         MOVF    r0x03, W
02F0 6E00      01870         MOVWF   r0x02
02F2 6A00      01871         CLRF    r0x03
02F4 6A00      01872         CLRF    r0x03
02F6 5000      01873         MOVF    r0x02, W
02F8 6E00      01874         MOVWF   _ERDPTH
               01875 ;       .line   865; TCPIP_Stack/ETH97J60.c     Checksum.Val = (DWORD)Checksum.w[0] + (DWORD)Checksum.w[1];
02FA C000 F000 01876         MOVFF   _CalcIPBufferChecksum_Checksum_1_1, r0x00
02FE C000 F000 01877         MOVFF   (_CalcIPBufferChecksum_Checksum_1_1 + 1), r0x01
0302 6A00      01878         CLRF    r0x02
0304 6A00      01879         CLRF    r0x03
0306 C000 F000 01880         MOVFF   (_CalcIPBufferChecksum_Checksum_1_1 + 2), r0x04
030A C000 F000 01881         MOVFF   (_CalcIPBufferChecksum_Checksum_1_1 + 3), r0x05
030E 6A00      01882         CLRF    r0x06
0310 6A00      01883         CLRF    r0x07
0312 5000      01884         MOVF    r0x04, W
0314 2600      01885         ADDWF   r0x00, F
0316 5000      01886         MOVF    r0x05, W
0318 2200      01887         ADDWFC  r0x01, F
031A 5000      01888         MOVF    r0x06, W
031C 2200      01889         ADDWFC  r0x02, F
031E 5000      01890         MOVF    r0x07, W
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0320 2200      01891         ADDWFC  r0x03, F
0322 5000      01892         MOVF    r0x00, W
0324 0000      01893         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
0326 6F00      01894         MOVWF   _CalcIPBufferChecksum_Checksum_1_1, B
0328 5000      01895         MOVF    r0x01, W
032A 0000      01896         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
032C 6F00      01897         MOVWF   (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
032E 5000      01898         MOVF    r0x02, W
0330 0000      01899         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
0332 6F00      01900         MOVWF   (_CalcIPBufferChecksum_Checksum_1_1 + 2), B
0334 5000      01901         MOVF    r0x03, W
0336 0000      01902         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0338 6F00      01903         MOVWF   (_CalcIPBufferChecksum_Checksum_1_1 + 3), B
033A 0000      01904         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 2)
               01905 ;       .line   869; TCPIP_Stack/ETH97J60.c     Checksum.w[0] += Checksum.w[1];
033C 5100      01906         MOVF    (_CalcIPBufferChecksum_Checksum_1_1 + 2), W, B
033E 0000      01907         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
0340 2500      01908         ADDWF   _CalcIPBufferChecksum_Checksum_1_1, W, B
0342 6E00      01909         MOVWF   r0x00
0344 0000      01910         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 3)
0346 5100      01911         MOVF    (_CalcIPBufferChecksum_Checksum_1_1 + 3), W, B
0348 0000      01912         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
034A 2100      01913         ADDWFC  (_CalcIPBufferChecksum_Checksum_1_1 + 1), W, B
034C 6E00      01914         MOVWF   r0x01
034E 5000      01915         MOVF    r0x00, W
0350 0000      01916         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
0352 6F00      01917         MOVWF   _CalcIPBufferChecksum_Checksum_1_1, B
0354 5000      01918         MOVF    r0x01, W
0356 0000      01919         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
0358 6F00      01920         MOVWF   (_CalcIPBufferChecksum_Checksum_1_1 + 1), B
035A 0000      01921         BANKSEL _CalcIPBufferChecksum_Checksum_1_1
               01922 ;       .line   872; TCPIP_Stack/ETH97J60.c     return ~Checksum.w[0];
035C 1D00      01923         COMF    _CalcIPBufferChecksum_Checksum_1_1, W, B
035E 6E00      01924         MOVWF   r0x00
0360 0000      01925         BANKSEL (_CalcIPBufferChecksum_Checksum_1_1 + 1)
0362 1D00      01926         COMF    (_CalcIPBufferChecksum_Checksum_1_1 + 1), W, B
0364 6E00      01927         MOVWF   r0x01
0366 C000 FFF3 01928         MOVFF   r0x01, PRODL
036A 5000      01929         MOVF    r0x00, W
036C CFE4 F000 01930         MOVFF   PREINC1, r0x0c
0370 CFE4 F000 01931         MOVFF   PREINC1, r0x0b
0374 CFE4 F000 01932         MOVFF   PREINC1, r0x0a
0378 CFE4 F000 01933         MOVFF   PREINC1, r0x09
037C CFE4 F000 01934         MOVFF   PREINC1, r0x08
0380 CFE4 F000 01935         MOVFF   PREINC1, r0x07
0384 CFE4 F000 01936         MOVFF   PREINC1, r0x06
0388 CFE4 F000 01937         MOVFF   PREINC1, r0x05
038C CFE4 F000 01938         MOVFF   PREINC1, r0x04
0390 CFE4 F000 01939         MOVFF   PREINC1, r0x03
0394 CFE4 F000 01940         MOVFF   PREINC1, r0x02
0398 CFE4 F000 01941         MOVFF   PREINC1, r0x01
039C CFE4 F000 01942         MOVFF   PREINC1, r0x00
03A0 CFE4 FFD9 01943         MOVFF   PREINC1, FSR2L
03A4 0012      01944         RETURN  
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               01945 
               01946 ; ; Starting pCode block
               01947 S_ETH97J60__MACCalcRxChecksum   code
0000 01948 _MACCalcRxChecksum:
               01949 ;       .line   699; TCPIP_Stack/ETH97J60.c     WORD MACCalcRxChecksum(WORD offset, WORD len)
0000 CFD9 FFE5 01950         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01951         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01952         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01953         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01954         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01955         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 01956         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 01957         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 01958         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 01959         MOVFF   r0x07, POSTDEC1
0028 0E02      01960         MOVLW   0x02
002A CFDB F000 01961         MOVFF   PLUSW2, r0x00
002E 0E03      01962         MOVLW   0x03
0030 CFDB F000 01963         MOVFF   PLUSW2, r0x01
0034 0E04      01964         MOVLW   0x04
0036 CFDB F000 01965         MOVFF   PLUSW2, r0x02
003A 0E05      01966         MOVLW   0x05
003C CFDB F000 01967         MOVFF   PLUSW2, r0x03
0040 0000      01968         BANKSEL _CurrentPacketLocation
               01969 ;       .line   705; TCPIP_Stack/ETH97J60.c     temp = CurrentPacketLocation.Val + sizeof(ENC_PREAMBLE) + offset;
0042 5100      01970         MOVF    _CurrentPacketLocation, W, B
0044 0F14      01971         ADDLW   0x14
0046 6E00      01972         MOVWF   r0x04
0048 0E00      01973         MOVLW   0x00
004A 0000      01974         BANKSEL (_CurrentPacketLocation + 1)
004C 2100      01975         ADDWFC  (_CurrentPacketLocation + 1), W, B
004E 6E00      01976         MOVWF   r0x05
0050 5000      01977         MOVF    r0x04, W
0052 2600      01978         ADDWF   r0x00, F
0054 5000      01979         MOVF    r0x05, W
0056 2200      01980         ADDWFC  r0x01, F
               01981 ;       .line   706; TCPIP_Stack/ETH97J60.c     if(temp > RXSTOP)               // Adjust value if a wrap is needed
0058 C000 F000 01982         MOVFF   r0x00, r0x04
005C C000 F000 01983         MOVFF   r0x01, r0x05
0060 6A00      01984         CLRF    r0x06
0062 6A00      01985         CLRF    r0x07
0064 0E00      01986         MOVLW   0x00
0066 5C00      01987         SUBWF   r0x07, W
0068 E100      01988         BNZ     _00295_DS_
006A 0E00      01989         MOVLW   0x00
006C 5C00      01990         SUBWF   r0x06, W
006E E100      01991         BNZ     _00295_DS_
0070 0E1A      01992         MOVLW   0x1a
0072 5C00      01993         SUBWF   r0x05, W
0074 E100      01994         BNZ     _00295_DS_
0076 0E0A      01995         MOVLW   0x0a
0078 5C00      01996         SUBWF   r0x04, W
007A 01997 _00295_DS_:
007A E300      01998         BNC     _00291_DS_
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               01999 ;       .line   708; TCPIP_Stack/ETH97J60.c     temp -= RXSIZE;
007C 0EF6      02000         MOVLW   0xf6
007E 2600      02001         ADDWF   r0x04, F
0080 0EE5      02002         MOVLW   0xe5
0082 2200      02003         ADDWFC  r0x05, F
0084 0EFF      02004         MOVLW   0xff
0086 2200      02005         ADDWFC  r0x06, F
0088 0EFF      02006         MOVLW   0xff
008A 2200      02007         ADDWFC  r0x07, F
008C 5000      02008         MOVF    r0x04, W
008E 6E00      02009         MOVWF   r0x00
0090 5000      02010         MOVF    r0x05, W
0092 6E00      02011         MOVWF   r0x01
0094 02012 _00291_DS_:
               02013 ;       .line   711; TCPIP_Stack/ETH97J60.c     RDSave = ((WORD)ERDPTH)<<8|ERDPTL;
0094 C000 F000 02014         MOVFF   _ERDPTH, r0x04
0098 6A00      02015         CLRF    r0x05
009A 5000      02016         MOVF    r0x04, W
009C 6E00      02017         MOVWF   r0x07
009E 6A00      02018         CLRF    r0x06
00A0 C000 F000 02019         MOVFF   _ERDPTL, r0x04
00A4 6A00      02020         CLRF    r0x05
00A6 5000      02021         MOVF    r0x04, W
00A8 1200      02022         IORWF   r0x06, F
00AA 5000      02023         MOVF    r0x05, W
00AC 1200      02024         IORWF   r0x07, F
               02025 ;       .line   712; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(temp);
00AE 5000      02026         MOVF    r0x00, W
00B0 6E00      02027         MOVWF   r0x04
00B2 6A00      02028         CLRF    r0x05
00B4 5000      02029         MOVF    r0x04, W
00B6 6E00      02030         MOVWF   _ERDPTL
               02031 ;       .line   713; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(temp);
00B8 5000      02032         MOVF    r0x01, W
00BA 6E00      02033         MOVWF   r0x04
00BC 6A00      02034         CLRF    r0x05
00BE 6A00      02035         CLRF    r0x05
00C0 5000      02036         MOVF    r0x04, W
00C2 6E00      02037         MOVWF   _ERDPTH
               02038 ;       .line   714; TCPIP_Stack/ETH97J60.c     temp = CalcIPBufferChecksum(len);
00C4 5000      02039         MOVF    r0x03, W
00C6 6EE5      02040         MOVWF   POSTDEC1
00C8 5000      02041         MOVF    r0x02, W
00CA 6EE5      02042         MOVWF   POSTDEC1
00CC EC00 F000 02043         CALL    _CalcIPBufferChecksum
00D0 6E00      02044         MOVWF   r0x00
00D2 CFF3 F000 02045         MOVFF   PRODL, r0x01
00D6 0E02      02046         MOVLW   0x02
00D8 26E1      02047         ADDWF   FSR1L, F
               02048 ;       .line   715; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(RDSave);
00DA 5000      02049         MOVF    r0x06, W
00DC 6E00      02050         MOVWF   r0x02
00DE 6A00      02051         CLRF    r0x03
00E0 5000      02052         MOVF    r0x02, W
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00E2 6E00      02053         MOVWF   _ERDPTL
               02054 ;       .line   716; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(RDSave);
00E4 5000      02055         MOVF    r0x07, W
00E6 6E00      02056         MOVWF   r0x06
00E8 6A00      02057         CLRF    r0x07
00EA 6A00      02058         CLRF    r0x07
00EC 5000      02059         MOVF    r0x06, W
00EE 6E00      02060         MOVWF   _ERDPTH
               02061 ;       .line   718; TCPIP_Stack/ETH97J60.c     return temp;
00F0 C000 FFF3 02062         MOVFF   r0x01, PRODL
00F4 5000      02063         MOVF    r0x00, W
00F6 CFE4 F000 02064         MOVFF   PREINC1, r0x07
00FA CFE4 F000 02065         MOVFF   PREINC1, r0x06
00FE CFE4 F000 02066         MOVFF   PREINC1, r0x05
0102 CFE4 F000 02067         MOVFF   PREINC1, r0x04
0106 CFE4 F000 02068         MOVFF   PREINC1, r0x03
010A CFE4 F000 02069         MOVFF   PREINC1, r0x02
010E CFE4 F000 02070         MOVFF   PREINC1, r0x01
0112 CFE4 F000 02071         MOVFF   PREINC1, r0x00
0116 CFE4 FFD9 02072         MOVFF   PREINC1, FSR2L
011A 0012      02073         RETURN  
               02074 
               02075 ; ; Starting pCode block
               02076 S_ETH97J60__MACSetReadPtr       code
0000 02077 _MACSetReadPtr:
               02078 ;       .line   669; TCPIP_Stack/ETH97J60.c     WORD MACSetReadPtr(WORD address)
0000 CFD9 FFE5 02079         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02080         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02081         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02082         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02083         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02084         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02085         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02086         MOVFF   r0x05, POSTDEC1
0020 0E02      02087         MOVLW   0x02
0022 CFDB F000 02088         MOVFF   PLUSW2, r0x00
0026 0E03      02089         MOVLW   0x03
0028 CFDB F000 02090         MOVFF   PLUSW2, r0x01
               02091 ;       .line   673; TCPIP_Stack/ETH97J60.c     oldVal = ((WORD)ERDPTH)<<8|ERDPTL;
002C C000 F000 02092         MOVFF   _ERDPTH, r0x02
0030 6A00      02093         CLRF    r0x03
0032 5000      02094         MOVF    r0x02, W
0034 6E00      02095         MOVWF   r0x05
0036 6A00      02096         CLRF    r0x04
0038 C000 F000 02097         MOVFF   _ERDPTL, r0x02
003C 6A00      02098         CLRF    r0x03
003E 5000      02099         MOVF    r0x02, W
0040 1200      02100         IORWF   r0x04, F
0042 5000      02101         MOVF    r0x03, W
0044 1200      02102         IORWF   r0x05, F
               02103 ;       .line   674; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(address);
0046 5000      02104         MOVF    r0x00, W
0048 6E00      02105         MOVWF   r0x02
004A 6A00      02106         CLRF    r0x03
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
004C 5000      02107         MOVF    r0x02, W
004E 6E00      02108         MOVWF   _ERDPTL
               02109 ;       .line   675; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(address);
0050 5000      02110         MOVF    r0x01, W
0052 6E00      02111         MOVWF   r0x00
0054 6A00      02112         CLRF    r0x01
0056 6A00      02113         CLRF    r0x01
0058 5000      02114         MOVF    r0x00, W
005A 6E00      02115         MOVWF   _ERDPTH
               02116 ;       .line   676; TCPIP_Stack/ETH97J60.c     return oldVal;
005C C000 FFF3 02117         MOVFF   r0x05, PRODL
0060 5000      02118         MOVF    r0x04, W
0062 CFE4 F000 02119         MOVFF   PREINC1, r0x05
0066 CFE4 F000 02120         MOVFF   PREINC1, r0x04
006A CFE4 F000 02121         MOVFF   PREINC1, r0x03
006E CFE4 F000 02122         MOVFF   PREINC1, r0x02
0072 CFE4 F000 02123         MOVFF   PREINC1, r0x01
0076 CFE4 F000 02124         MOVFF   PREINC1, r0x00
007A CFE4 FFD9 02125         MOVFF   PREINC1, FSR2L
007E 0012      02126         RETURN  
               02127 
               02128 ; ; Starting pCode block
               02129 S_ETH97J60__MACSetWritePtr      code
0000 02130 _MACSetWritePtr:
               02131 ;       .line   642; TCPIP_Stack/ETH97J60.c     WORD MACSetWritePtr(WORD address)
0000 CFD9 FFE5 02132         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02133         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02134         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02135         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02136         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02137         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02138         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02139         MOVFF   r0x05, POSTDEC1
0020 0E02      02140         MOVLW   0x02
0022 CFDB F000 02141         MOVFF   PLUSW2, r0x00
0026 0E03      02142         MOVLW   0x03
0028 CFDB F000 02143         MOVFF   PLUSW2, r0x01
               02144 ;       .line   646; TCPIP_Stack/ETH97J60.c     oldVal = ((WORD)EWRPTH)<<8|EWRPTL;
002C C000 F000 02145         MOVFF   _EWRPTH, r0x02
0030 6A00      02146         CLRF    r0x03
0032 5000      02147         MOVF    r0x02, W
0034 6E00      02148         MOVWF   r0x05
0036 6A00      02149         CLRF    r0x04
0038 C000 F000 02150         MOVFF   _EWRPTL, r0x02
003C 6A00      02151         CLRF    r0x03
003E 5000      02152         MOVF    r0x02, W
0040 1200      02153         IORWF   r0x04, F
0042 5000      02154         MOVF    r0x03, W
0044 1200      02155         IORWF   r0x05, F
               02156 ;       .line   648; TCPIP_Stack/ETH97J60.c     EWRPTL = LOW(address);
0046 5000      02157         MOVF    r0x00, W
0048 6E00      02158         MOVWF   r0x02
004A 6A00      02159         CLRF    r0x03
004C 5000      02160         MOVF    r0x02, W
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
004E 0000      02161         BANKSEL _EWRPTL
0050 6F00      02162         MOVWF   _EWRPTL, B
               02163 ;       .line   649; TCPIP_Stack/ETH97J60.c     EWRPTH = HIGH(address);
0052 5000      02164         MOVF    r0x01, W
0054 6E00      02165         MOVWF   r0x00
0056 6A00      02166         CLRF    r0x01
0058 6A00      02167         CLRF    r0x01
005A 5000      02168         MOVF    r0x00, W
005C 0000      02169         BANKSEL _EWRPTH
005E 6F00      02170         MOVWF   _EWRPTH, B
               02171 ;       .line   650; TCPIP_Stack/ETH97J60.c     return oldVal;
0060 C000 FFF3 02172         MOVFF   r0x05, PRODL
0064 5000      02173         MOVF    r0x04, W
0066 CFE4 F000 02174         MOVFF   PREINC1, r0x05
006A CFE4 F000 02175         MOVFF   PREINC1, r0x04
006E CFE4 F000 02176         MOVFF   PREINC1, r0x03
0072 CFE4 F000 02177         MOVFF   PREINC1, r0x02
0076 CFE4 F000 02178         MOVFF   PREINC1, r0x01
007A CFE4 F000 02179         MOVFF   PREINC1, r0x00
007E CFE4 FFD9 02180         MOVFF   PREINC1, FSR2L
0082 0012      02181         RETURN  
               02182 
               02183 ; ; Starting pCode block
               02184 S_ETH97J60__MACSetReadPtrInRx   code
0000 02185 _MACSetReadPtrInRx:
               02186 ;       .line   609; TCPIP_Stack/ETH97J60.c     void MACSetReadPtrInRx(WORD offset)
0000 CFD9 FFE5 02187         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02188         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02189         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02190         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02191         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02192         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02193         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02194         MOVFF   r0x05, POSTDEC1
0020 0E02      02195         MOVLW   0x02
0022 CFDB F000 02196         MOVFF   PLUSW2, r0x00
0026 0E03      02197         MOVLW   0x03
0028 CFDB F000 02198         MOVFF   PLUSW2, r0x01
002C 0000      02199         BANKSEL _CurrentPacketLocation
               02200 ;       .line   615; TCPIP_Stack/ETH97J60.c     ReadPT.Val = CurrentPacketLocation.Val + sizeof(ENC_PREAMBLE) + offset;
002E 5100      02201         MOVF    _CurrentPacketLocation, W, B
0030 0F14      02202         ADDLW   0x14
0032 6E00      02203         MOVWF   r0x02
0034 0E00      02204         MOVLW   0x00
0036 0000      02205         BANKSEL (_CurrentPacketLocation + 1)
0038 2100      02206         ADDWFC  (_CurrentPacketLocation + 1), W, B
003A 6E00      02207         MOVWF   r0x03
003C 5000      02208         MOVF    r0x02, W
003E 2600      02209         ADDWF   r0x00, F
0040 5000      02210         MOVF    r0x03, W
0042 2200      02211         ADDWFC  r0x01, F
0044 5000      02212         MOVF    r0x00, W
0046 0000      02213         BANKSEL _MACSetReadPtrInRx_ReadPT_1_1
0048 6F00      02214         MOVWF   _MACSetReadPtrInRx_ReadPT_1_1, B
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
004A 5000      02215         MOVF    r0x01, W
004C 0000      02216         BANKSEL (_MACSetReadPtrInRx_ReadPT_1_1 + 1)
004E 6F00      02217         MOVWF   (_MACSetReadPtrInRx_ReadPT_1_1 + 1), B
               02218 ;       .line   618; TCPIP_Stack/ETH97J60.c     if(ReadPT.Val > RXSTOP)  ReadPT.Val -= RXSIZE;
0050 C000 F000 02219         MOVFF   _MACSetReadPtrInRx_ReadPT_1_1, r0x02
0054 C000 F000 02220         MOVFF   (_MACSetReadPtrInRx_ReadPT_1_1 + 1), r0x03
0058 6A00      02221         CLRF    r0x04
005A 6A00      02222         CLRF    r0x05
005C 0E00      02223         MOVLW   0x00
005E 5C00      02224         SUBWF   r0x05, W
0060 E100      02225         BNZ     _00275_DS_
0062 0E00      02226         MOVLW   0x00
0064 5C00      02227         SUBWF   r0x04, W
0066 E100      02228         BNZ     _00275_DS_
0068 0E1A      02229         MOVLW   0x1a
006A 5C00      02230         SUBWF   r0x01, W
006C E100      02231         BNZ     _00275_DS_
006E 0E0A      02232         MOVLW   0x0a
0070 5C00      02233         SUBWF   r0x00, W
0072 02234 _00275_DS_:
0072 E300      02235         BNC     _00271_DS_
0074 6A00      02236         CLRF    r0x00
0076 6A00      02237         CLRF    r0x01
0078 0EF6      02238         MOVLW   0xf6
007A 2600      02239         ADDWF   r0x02, F
007C 0EE5      02240         MOVLW   0xe5
007E 2200      02241         ADDWFC  r0x03, F
0080 0EFF      02242         MOVLW   0xff
0082 2200      02243         ADDWFC  r0x00, F
0084 0EFF      02244         MOVLW   0xff
0086 2200      02245         ADDWFC  r0x01, F
0088 5000      02246         MOVF    r0x02, W
008A 0000      02247         BANKSEL _MACSetReadPtrInRx_ReadPT_1_1
008C 6F00      02248         MOVWF   _MACSetReadPtrInRx_ReadPT_1_1, B
008E 5000      02249         MOVF    r0x03, W
0090 0000      02250         BANKSEL (_MACSetReadPtrInRx_ReadPT_1_1 + 1)
0092 6F00      02251         MOVWF   (_MACSetReadPtrInRx_ReadPT_1_1 + 1), B
0094 02252 _00271_DS_:
               02253 ;       .line   621; TCPIP_Stack/ETH97J60.c     ERDPTL = ReadPT.v[0];
0094 C000 F000 02254         MOVFF   _MACSetReadPtrInRx_ReadPT_1_1, _ERDPTL
               02255 ;       .line   622; TCPIP_Stack/ETH97J60.c     ERDPTH = ReadPT.v[1];
0098 C000 F000 02256         MOVFF   (_MACSetReadPtrInRx_ReadPT_1_1 + 1), _ERDPTH
009C CFE4 F000 02257         MOVFF   PREINC1, r0x05
00A0 CFE4 F000 02258         MOVFF   PREINC1, r0x04
00A4 CFE4 F000 02259         MOVFF   PREINC1, r0x03
00A8 CFE4 F000 02260         MOVFF   PREINC1, r0x02
00AC CFE4 F000 02261         MOVFF   PREINC1, r0x01
00B0 CFE4 F000 02262         MOVFF   PREINC1, r0x00
00B4 CFE4 FFD9 02263         MOVFF   PREINC1, FSR2L
00B8 0012      02264         RETURN  
               02265 
               02266 ; ; Starting pCode block
               02267 S_ETH97J60__MACFlush    code
0000 02268 _MACFlush:
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               02269 ;       .line   563; TCPIP_Stack/ETH97J60.c     void MACFlush(void)
0000 CFD9 FFE5 02270         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02271         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02272         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02273         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02274         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02275         MOVFF   r0x03, POSTDEC1
               02276 ;       .line   569; TCPIP_Stack/ETH97J60.c     ECON1bits.TXRST = 1;
0018 8E00      02277         BSF     _ECON1bits, 7
               02278 ;       .line   570; TCPIP_Stack/ETH97J60.c     ECON1bits.TXRST = 0;
001A 9E00      02279         BCF     _ECON1bits, 7
               02280 ;       .line   574; TCPIP_Stack/ETH97J60.c     {volatile BYTE i = 8; while(i--);}
001C 0E08      02281         MOVLW   0x08
001E 0000      02282         BANKSEL _MACFlush_i_2_2
0020 6F00      02283         MOVWF   _MACFlush_i_2_2, B
0022 02284 _00262_DS_:
0022 C000 F000 02285         MOVFF   _MACFlush_i_2_2, r0x00
0026 0000      02286         BANKSEL _MACFlush_i_2_2
0028 0700      02287         DECF    _MACFlush_i_2_2, F, B
002A 5000      02288         MOVF    r0x00, W
002C E100      02289         BNZ     _00262_DS_
               02290 ;       .line   575; TCPIP_Stack/ETH97J60.c     EIRbits.TXERIF = 0;
002E 9200      02291         BCF     _EIRbits, 1
               02292 ;       .line   582; TCPIP_Stack/ETH97J60.c     ECON1bits.TXRTS = 1;
0030 8600      02293         BSF     _ECON1bits, 3
               02294 ;       .line   583; TCPIP_Stack/ETH97J60.c     wTXWatchdog = TickGet();
0032 EC00 F000 02295         CALL    _TickGet
0036 6E00      02296         MOVWF   r0x00
0038 CFF3 F000 02297         MOVFF   PRODL, r0x01
003C CFF4 F000 02298         MOVFF   PRODH, r0x02
0040 CFE9 F000 02299         MOVFF   FSR0L, r0x03
0044 5000      02300         MOVF    r0x00, W
0046 0000      02301         BANKSEL _wTXWatchdog
0048 6F00      02302         MOVWF   _wTXWatchdog, B
004A 5000      02303         MOVF    r0x01, W
004C 0000      02304         BANKSEL (_wTXWatchdog + 1)
004E 6F00      02305         MOVWF   (_wTXWatchdog + 1), B
0050 CFE4 F000 02306         MOVFF   PREINC1, r0x03
0054 CFE4 F000 02307         MOVFF   PREINC1, r0x02
0058 CFE4 F000 02308         MOVFF   PREINC1, r0x01
005C CFE4 F000 02309         MOVFF   PREINC1, r0x00
0060 CFE4 FFD9 02310         MOVFF   PREINC1, FSR2L
0064 0012      02311         RETURN  
               02312 
               02313 ; ; Starting pCode block
               02314 S_ETH97J60__MACPutHeader        code
0000 02315 _MACPutHeader:
               02316 ;       .line   515; TCPIP_Stack/ETH97J60.c     void MACPutHeader(MAC_ADDR *remote, BYTE type, WORD dataLen)
0000 CFD9 FFE5 02317         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02318         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02319         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02320         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02321         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02322         MOVFF   r0x03, POSTDEC1
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0018 C000 FFE5 02323         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02324         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 02325         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 02326         MOVFF   r0x07, POSTDEC1
0028 C000 FFE5 02327         MOVFF   r0x08, POSTDEC1
002C C000 FFE5 02328         MOVFF   r0x09, POSTDEC1
0030 0E02      02329         MOVLW   0x02
0032 CFDB F000 02330         MOVFF   PLUSW2, r0x00
0036 0E03      02331         MOVLW   0x03
0038 CFDB F000 02332         MOVFF   PLUSW2, r0x01
003C 0E04      02333         MOVLW   0x04
003E CFDB F000 02334         MOVFF   PLUSW2, r0x02
0042 0E05      02335         MOVLW   0x05
0044 CFDB F000 02336         MOVFF   PLUSW2, r0x03
0048 0E06      02337         MOVLW   0x06
004A CFDB F000 02338         MOVFF   PLUSW2, r0x04
004E 0E07      02339         MOVLW   0x07
0050 CFDB F000 02340         MOVFF   PLUSW2, r0x05
               02341 ;       .line   518; TCPIP_Stack/ETH97J60.c     EWRPTL = LOW(TXSTART + 1);
0054 0E0B      02342         MOVLW   0x0b
0056 0000      02343         BANKSEL _EWRPTL
0058 6F00      02344         MOVWF   _EWRPTL, B
               02345 ;       .line   519; TCPIP_Stack/ETH97J60.c     EWRPTH = HIGH(TXSTART + 1);
005A 0E1A      02346         MOVLW   0x1a
005C 0000      02347         BANKSEL _EWRPTH
005E 6F00      02348         MOVWF   _EWRPTH, B
               02349 ;       .line   522; TCPIP_Stack/ETH97J60.c     dataLen += (WORD)sizeof(ETHER_HEADER) + TXSTART;
0060 C000 F000 02350         MOVFF   r0x04, r0x06
0064 C000 F000 02351         MOVFF   r0x05, r0x07
0068 6A00      02352         CLRF    r0x08
006A 6A00      02353         CLRF    r0x09
006C 0E18      02354         MOVLW   0x18
006E 2600      02355         ADDWF   r0x06, F
0070 0E1A      02356         MOVLW   0x1a
0072 2200      02357         ADDWFC  r0x07, F
0074 0E00      02358         MOVLW   0x00
0076 2200      02359         ADDWFC  r0x08, F
0078 0E00      02360         MOVLW   0x00
007A 2200      02361         ADDWFC  r0x09, F
007C 5000      02362         MOVF    r0x06, W
007E 6E00      02363         MOVWF   r0x04
0080 5000      02364         MOVF    r0x07, W
0082 6E00      02365         MOVWF   r0x05
               02366 ;       .line   525; TCPIP_Stack/ETH97J60.c     ETXNDL = LOW(dataLen);
0084 5000      02367         MOVF    r0x04, W
0086 6E00      02368         MOVWF   r0x06
0088 6A00      02369         CLRF    r0x07
008A 5000      02370         MOVF    r0x06, W
008C 0000      02371         BANKSEL _ETXNDL
008E 6F00      02372         MOVWF   _ETXNDL, B
               02373 ;       .line   526; TCPIP_Stack/ETH97J60.c     ETXNDH = HIGH(dataLen);
0090 5000      02374         MOVF    r0x05, W
0092 6E00      02375         MOVWF   r0x04
0094 6A00      02376         CLRF    r0x05
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0096 6A00      02377         CLRF    r0x05
0098 5000      02378         MOVF    r0x04, W
009A 0000      02379         BANKSEL _ETXNDH
009C 6F00      02380         MOVWF   _ETXNDH, B
               02381 ;       .line   530; TCPIP_Stack/ETH97J60.c     MACPutArray((BYTE*)remote, sizeof(*remote));
009E 0E00      02382         MOVLW   0x00
00A0 6EE5      02383         MOVWF   POSTDEC1
00A2 0E06      02384         MOVLW   0x06
00A4 6EE5      02385         MOVWF   POSTDEC1
00A6 5000      02386         MOVF    r0x02, W
00A8 6EE5      02387         MOVWF   POSTDEC1
00AA 5000      02388         MOVF    r0x01, W
00AC 6EE5      02389         MOVWF   POSTDEC1
00AE 5000      02390         MOVF    r0x00, W
00B0 6EE5      02391         MOVWF   POSTDEC1
00B2 EC00 F000 02392         CALL    _MACPutArray
00B6 0E05      02393         MOVLW   0x05
00B8 26E1      02394         ADDWF   FSR1L, F
               02395 ;       .line   533; TCPIP_Stack/ETH97J60.c     MACPutArray((BYTE*)&AppConfig.MyMACAddr, sizeof(AppConfig.MyMACAddr));
00BA 0E00      02396         MOVLW   HIGH(_AppConfig + 45)
00BC 6E00      02397         MOVWF   r0x01
00BE 0E00      02398         MOVLW   LOW(_AppConfig + 45)
00C0 6E00      02399         MOVWF   r0x00
00C2 0E80      02400         MOVLW   0x80
00C4 6E00      02401         MOVWF   r0x02
00C6 0E00      02402         MOVLW   0x00
00C8 6EE5      02403         MOVWF   POSTDEC1
00CA 0E06      02404         MOVLW   0x06
00CC 6EE5      02405         MOVWF   POSTDEC1
00CE 5000      02406         MOVF    r0x02, W
00D0 6EE5      02407         MOVWF   POSTDEC1
00D2 5000      02408         MOVF    r0x01, W
00D4 6EE5      02409         MOVWF   POSTDEC1
00D6 5000      02410         MOVF    r0x00, W
00D8 6EE5      02411         MOVWF   POSTDEC1
00DA EC00 F000 02412         CALL    _MACPutArray
00DE 0E05      02413         MOVLW   0x05
00E0 26E1      02414         ADDWF   FSR1L, F
               02415 ;       .line   536; TCPIP_Stack/ETH97J60.c     MACPut(0x08);
00E2 0E08      02416         MOVLW   0x08
00E4 6EE5      02417         MOVWF   POSTDEC1
00E6 EC00 F000 02418         CALL    _MACPut
00EA 2AE1      02419         INCF    FSR1L, F
               02420 ;       .line   537; TCPIP_Stack/ETH97J60.c     MACPut((type == MAC_IP) ? ETHER_IP : ETHER_ARP);
00EC 5000      02421         MOVF    r0x03, W
00EE 80D8      02422         BSF     STATUS, 0
00F0 66E8      02423         TSTFSZ  WREG
00F2 90D8      02424         BCF     STATUS, 0
00F4 6A00      02425         CLRF    r0x03
00F6 3600      02426         RLCF    r0x03, F
00F8 5000      02427         MOVF    r0x03, W
00FA E000      02428         BZ      _00256_DS_
00FC 6A00      02429         CLRF    r0x00
00FE 6A00      02430         CLRF    r0x01
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0100 D000      02431         BRA     _00257_DS_
0102 02432 _00256_DS_:
0102 0E06      02433         MOVLW   0x06
0104 6E00      02434         MOVWF   r0x00
0106 6A00      02435         CLRF    r0x01
0108 02436 _00257_DS_:
0108 5000      02437         MOVF    r0x00, W
010A 6EE5      02438         MOVWF   POSTDEC1
010C EC00 F000 02439         CALL    _MACPut
0110 2AE1      02440         INCF    FSR1L, F
0112 CFE4 F000 02441         MOVFF   PREINC1, r0x09
0116 CFE4 F000 02442         MOVFF   PREINC1, r0x08
011A CFE4 F000 02443         MOVFF   PREINC1, r0x07
011E CFE4 F000 02444         MOVFF   PREINC1, r0x06
0122 CFE4 F000 02445         MOVFF   PREINC1, r0x05
0126 CFE4 F000 02446         MOVFF   PREINC1, r0x04
012A CFE4 F000 02447         MOVFF   PREINC1, r0x03
012E CFE4 F000 02448         MOVFF   PREINC1, r0x02
0132 CFE4 F000 02449         MOVFF   PREINC1, r0x01
0136 CFE4 F000 02450         MOVFF   PREINC1, r0x00
013A CFE4 FFD9 02451         MOVFF   PREINC1, FSR2L
013E 0012      02452         RETURN  
               02453 
               02454 ; ; Starting pCode block
               02455 S_ETH97J60__MACGetHeader        code
0000 02456 _MACGetHeader:
               02457 ;       .line   425; TCPIP_Stack/ETH97J60.c     BOOL MACGetHeader(MAC_ADDR *remote, BYTE* type)
0000 CFD9 FFE5 02458         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02459         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02460         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02461         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02462         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02463         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02464         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02465         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 02466         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 02467         MOVFF   r0x07, POSTDEC1
0028 C000 FFE5 02468         MOVFF   r0x08, POSTDEC1
002C C000 FFE5 02469         MOVFF   r0x09, POSTDEC1
0030 0E02      02470         MOVLW   0x02
0032 CFDB F000 02471         MOVFF   PLUSW2, r0x00
0036 0E03      02472         MOVLW   0x03
0038 CFDB F000 02473         MOVFF   PLUSW2, r0x01
003C 0E04      02474         MOVLW   0x04
003E CFDB F000 02475         MOVFF   PLUSW2, r0x02
0042 0E05      02476         MOVLW   0x05
0044 CFDB F000 02477         MOVFF   PLUSW2, r0x03
0048 0E06      02478         MOVLW   0x06
004A CFDB F000 02479         MOVFF   PLUSW2, r0x04
004E 0E07      02480         MOVLW   0x07
0050 CFDB F000 02481         MOVFF   PLUSW2, r0x05
0054 0000      02482         BANKSEL _EPKTCNT
               02483 ;       .line   430; TCPIP_Stack/ETH97J60.c     if(EPKTCNT == 0u)
0056 5100      02484         MOVF    _EPKTCNT, W, B
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0058 E100      02485         BNZ     _00213_DS_
               02486 ;       .line   432; TCPIP_Stack/ETH97J60.c     return FALSE;
005A 6AE8      02487         CLRF    WREG
005C D000      02488         BRA     _00230_DS_
005E 02489 _00213_DS_:
005E 0000      02490         BANKSEL _WasDiscarded
               02491 ;       .line   436; TCPIP_Stack/ETH97J60.c     if(WasDiscarded == FALSE)
0060 5100      02492         MOVF    _WasDiscarded, W, B
0062 E100      02493         BNZ     _00215_DS_
               02494 ;       .line   438; TCPIP_Stack/ETH97J60.c     MACDiscardRx();
0064 EC00 F000 02495         CALL    _MACDiscardRx
               02496 ;       .line   439; TCPIP_Stack/ETH97J60.c     return FALSE;
0068 6AE8      02497         CLRF    WREG
006A D000      02498         BRA     _00230_DS_
006C 02499 _00215_DS_:
006C 0000      02500         BANKSEL _NextPacketLocation
               02501 ;       .line   442; TCPIP_Stack/ETH97J60.c     CurrentPacketLocation.Val = NextPacketLocation.Val;
006E 5100      02502         MOVF    _NextPacketLocation, W, B
0070 0000      02503         BANKSEL _CurrentPacketLocation
0072 6F00      02504         MOVWF   _CurrentPacketLocation, B
0074 0000      02505         BANKSEL (_NextPacketLocation + 1)
0076 5100      02506         MOVF    (_NextPacketLocation + 1), W, B
0078 0000      02507         BANKSEL (_CurrentPacketLocation + 1)
007A 6F00      02508         MOVWF   (_CurrentPacketLocation + 1), B
007C 0000      02509         BANKSEL (_CurrentPacketLocation + 1)
               02510 ;       .line   445; TCPIP_Stack/ETH97J60.c     ERDPTH = HIGH(CurrentPacketLocation.Val);
007E 5100      02511         MOVF    (_CurrentPacketLocation + 1), W, B
0080 6E00      02512         MOVWF   r0x06
0082 6A00      02513         CLRF    r0x07
0084 6A00      02514         CLRF    r0x07
0086 5000      02515         MOVF    r0x06, W
0088 6E00      02516         MOVWF   _ERDPTH
008A 0000      02517         BANKSEL _CurrentPacketLocation
               02518 ;       .line   446; TCPIP_Stack/ETH97J60.c     ERDPTL = LOW(CurrentPacketLocation.Val);
008C 5100      02519         MOVF    _CurrentPacketLocation, W, B
008E 6E00      02520         MOVWF   r0x06
0090 6A00      02521         CLRF    r0x07
0092 5000      02522         MOVF    r0x06, W
0094 6E00      02523         MOVWF   _ERDPTL
               02524 ;       .line   449; TCPIP_Stack/ETH97J60.c     MACGetArray((BYTE*)&header, sizeof(header));
0096 0E00      02525         MOVLW   HIGH(_MACGetHeader_header_1_1)
0098 6E00      02526         MOVWF   r0x07
009A 0E00      02527         MOVLW   LOW(_MACGetHeader_header_1_1)
009C 6E00      02528         MOVWF   r0x06
009E 0E80      02529         MOVLW   0x80
00A0 6E00      02530         MOVWF   r0x08
00A2 0E00      02531         MOVLW   0x00
00A4 6EE5      02532         MOVWF   POSTDEC1
00A6 0E14      02533         MOVLW   0x14
00A8 6EE5      02534         MOVWF   POSTDEC1
00AA 5000      02535         MOVF    r0x08, W
00AC 6EE5      02536         MOVWF   POSTDEC1
00AE 5000      02537         MOVF    r0x07, W
00B0 6EE5      02538         MOVWF   POSTDEC1
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00B2 5000      02539         MOVF    r0x06, W
00B4 6EE5      02540         MOVWF   POSTDEC1
00B6 EC00 F000 02541         CALL    _MACGetArray
00BA 0E05      02542         MOVLW   0x05
00BC 26E1      02543         ADDWF   FSR1L, F
00BE 0000      02544         BANKSEL (_MACGetHeader_header_1_1 + 19)
               02545 ;       .line   453; TCPIP_Stack/ETH97J60.c     header.Type.Val = swaps(header.Type.Val);
00C0 5100      02546         MOVF    (_MACGetHeader_header_1_1 + 19), W, B
00C2 6EE5      02547         MOVWF   POSTDEC1
00C4 0000      02548         BANKSEL (_MACGetHeader_header_1_1 + 18)
00C6 5100      02549         MOVF    (_MACGetHeader_header_1_1 + 18), W, B
00C8 6EE5      02550         MOVWF   POSTDEC1
00CA EC00 F000 02551         CALL    _swaps
00CE 6E00      02552         MOVWF   r0x06
00D0 CFF3 F000 02553         MOVFF   PRODL, r0x07
00D4 0E02      02554         MOVLW   0x02
00D6 26E1      02555         ADDWF   FSR1L, F
00D8 5000      02556         MOVF    r0x06, W
00DA 0000      02557         BANKSEL (_MACGetHeader_header_1_1 + 18)
00DC 6F00      02558         MOVWF   (_MACGetHeader_header_1_1 + 18), B
00DE 5000      02559         MOVF    r0x07, W
00E0 0000      02560         BANKSEL (_MACGetHeader_header_1_1 + 19)
00E2 6F00      02561         MOVWF   (_MACGetHeader_header_1_1 + 19), B
               02562 ;       .line   458; TCPIP_Stack/ETH97J60.c     if(header.NextPacketPointer > RXSTOP || 
00E4 C000 F000 02563         MOVFF   _MACGetHeader_header_1_1, r0x06
00E8 C000 F000 02564         MOVFF   (_MACGetHeader_header_1_1 + 1), r0x07
00EC 6A00      02565         CLRF    r0x08
00EE 6A00      02566         CLRF    r0x09
00F0 0E00      02567         MOVLW   0x00
00F2 5C00      02568         SUBWF   r0x09, W
00F4 E100      02569         BNZ     _00244_DS_
00F6 0E00      02570         MOVLW   0x00
00F8 5C00      02571         SUBWF   r0x08, W
00FA E100      02572         BNZ     _00244_DS_
00FC 0E1A      02573         MOVLW   0x1a
00FE 5C00      02574         SUBWF   r0x07, W
0100 E100      02575         BNZ     _00244_DS_
0102 0E0A      02576         MOVLW   0x0a
0104 5C00      02577         SUBWF   r0x06, W
0106 02578 _00244_DS_:
0106 E200      02579         BC      _00219_DS_
0108 0000      02580         BANKSEL _MACGetHeader_header_1_1
               02581 ;       .line   459; TCPIP_Stack/ETH97J60.c     ((BYTE_VAL*)(&header.NextPacketPointer))->bits.b0 ||
010A B100      02582         BTFSC   _MACGetHeader_header_1_1, 0, B
010C D000      02583         BRA     _00219_DS_
010E 0000      02584         BANKSEL (_MACGetHeader_header_1_1 + 5)
               02585 ;       .line   460; TCPIP_Stack/ETH97J60.c     header.StatusVector.bits.Zero ||
0110 BF00      02586         BTFSC   (_MACGetHeader_header_1_1 + 5), 7, B
0112 D000      02587         BRA     _00219_DS_
0114 0000      02588         BANKSEL (_MACGetHeader_header_1_1 + 4)
               02589 ;       .line   461; TCPIP_Stack/ETH97J60.c     header.StatusVector.bits.CRCError ||
0116 B900      02590         BTFSC   (_MACGetHeader_header_1_1 + 4), 4, B
0118 D000      02591         BRA     _00219_DS_
               02592 ;       .line   462; TCPIP_Stack/ETH97J60.c     header.StatusVector.bits.ByteCount > 1518u ||
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
011A 0E05      02593         MOVLW   0x05
011C 0000      02594         BANKSEL (_MACGetHeader_header_1_1 + 3)
011E 5D00      02595         SUBWF   (_MACGetHeader_header_1_1 + 3), W, B
0120 E100      02596         BNZ     _00245_DS_
0122 0EEF      02597         MOVLW   0xef
0124 0000      02598         BANKSEL (_MACGetHeader_header_1_1 + 2)
0126 5D00      02599         SUBWF   (_MACGetHeader_header_1_1 + 2), W, B
0128 02600 _00245_DS_:
0128 E200      02601         BC      _00219_DS_
012A 0000      02602         BANKSEL (_MACGetHeader_header_1_1 + 4)
               02603 ;       .line   463; TCPIP_Stack/ETH97J60.c     !header.StatusVector.bits.ReceiveOk)
012C BF00      02604         BTFSC   (_MACGetHeader_header_1_1 + 4), 7, B
012E D000      02605         BRA     _00220_DS_
0130 02606 _00219_DS_:
               02607 ;       .line   465; TCPIP_Stack/ETH97J60.c     DisplayString(0,"error reading hdr");while(1);//////////////////////ML
0130 0E00      02608         MOVLW   UPPER(__str_0)
0132 6EE5      02609         MOVWF   POSTDEC1
0134 0E00      02610         MOVLW   HIGH(__str_0)
0136 6EE5      02611         MOVWF   POSTDEC1
0138 0E00      02612         MOVLW   LOW(__str_0)
013A 6EE5      02613         MOVWF   POSTDEC1
013C 0E00      02614         MOVLW   0x00
013E 6EE5      02615         MOVWF   POSTDEC1
0140 EC00 F000 02616         CALL    _DisplayString
0144 0E04      02617         MOVLW   0x04
0146 26E1      02618         ADDWF   FSR1L, F
0148 02619 _00217_DS_:
0148 D000      02620         BRA     _00217_DS_
014A 02621 _00220_DS_:
014A 0000      02622         BANKSEL _MACGetHeader_header_1_1
               02623 ;       .line   470; TCPIP_Stack/ETH97J60.c     NextPacketLocation.Val = header.NextPacketPointer;
014C 5100      02624         MOVF    _MACGetHeader_header_1_1, W, B
014E 0000      02625         BANKSEL _NextPacketLocation
0150 6F00      02626         MOVWF   _NextPacketLocation, B
0152 0000      02627         BANKSEL (_MACGetHeader_header_1_1 + 1)
0154 5100      02628         MOVF    (_MACGetHeader_header_1_1 + 1), W, B
0156 0000      02629         BANKSEL (_NextPacketLocation + 1)
0158 6F00      02630         MOVWF   (_NextPacketLocation + 1), B
               02631 ;       .line   475; TCPIP_Stack/ETH97J60.c     memcpy((void*)remote->v, (void*)header.SourceMACAddr.v, sizeof(*remote));
015A 0E00      02632         MOVLW   HIGH(_MACGetHeader_header_1_1 + 12)
015C 6E00      02633         MOVWF   r0x07
015E 0E00      02634         MOVLW   LOW(_MACGetHeader_header_1_1 + 12)
0160 6E00      02635         MOVWF   r0x06
0162 0E80      02636         MOVLW   0x80
0164 6E00      02637         MOVWF   r0x08
0166 0E00      02638         MOVLW   0x00
0168 6EE5      02639         MOVWF   POSTDEC1
016A 0E06      02640         MOVLW   0x06
016C 6EE5      02641         MOVWF   POSTDEC1
016E 5000      02642         MOVF    r0x08, W
0170 6EE5      02643         MOVWF   POSTDEC1
0172 5000      02644         MOVF    r0x07, W
0174 6EE5      02645         MOVWF   POSTDEC1
0176 5000      02646         MOVF    r0x06, W
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 50


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0178 6EE5      02647         MOVWF   POSTDEC1
017A 5000      02648         MOVF    r0x02, W
017C 6EE5      02649         MOVWF   POSTDEC1
017E 5000      02650         MOVF    r0x01, W
0180 6EE5      02651         MOVWF   POSTDEC1
0182 5000      02652         MOVF    r0x00, W
0184 6EE5      02653         MOVWF   POSTDEC1
0186 EC00 F000 02654         CALL    _memcpy
018A 0E08      02655         MOVLW   0x08
018C 26E1      02656         ADDWF   FSR1L, F
               02657 ;       .line   478; TCPIP_Stack/ETH97J60.c     *type = MAC_UNKNOWN;
018E 0EFF      02658         MOVLW   0xff
0190 6EE5      02659         MOVWF   POSTDEC1
0192 C000 FFE9 02660         MOVFF   r0x03, FSR0L
0196 C000 FFF3 02661         MOVFF   r0x04, PRODL
019A 5000      02662         MOVF    r0x05, W
019C EC00 F000 02663         CALL    __gptrput1
               02664 ;       .line   479; TCPIP_Stack/ETH97J60.c     if( (header.Type.v[1] == 0x08u) &&
01A0 C000 F000 02665         MOVFF   (_MACGetHeader_header_1_1 + 19), r0x00
01A4 6A00      02666         CLRF    r0x01
01A6 5000      02667         MOVF    r0x00, W
01A8 0A08      02668         XORLW   0x08
01AA E100      02669         BNZ     _00246_DS_
01AC 5000      02670         MOVF    r0x01, W
01AE E000      02671         BZ      _00247_DS_
01B0 02672 _00246_DS_:
01B0 D000      02673         BRA     _00227_DS_
01B2 02674 _00247_DS_:
               02675 ;       .line   480; TCPIP_Stack/ETH97J60.c     ((header.Type.v[0] == ETHER_IP) || (header.Type.v[0] == ETHER_ARP)) )
01B2 C000 F000 02676         MOVFF   (_MACGetHeader_header_1_1 + 18), r0x00
01B6 5000      02677         MOVF    r0x00, W
01B8 E000      02678         BZ      _00226_DS_
01BA C000 F000 02679         MOVFF   r0x00, r0x01
01BE 6A00      02680         CLRF    r0x02
01C0 5000      02681         MOVF    r0x01, W
01C2 0A06      02682         XORLW   0x06
01C4 E100      02683         BNZ     _00248_DS_
01C6 5000      02684         MOVF    r0x02, W
01C8 E000      02685         BZ      _00226_DS_
01CA 02686 _00248_DS_:
01CA D000      02687         BRA     _00227_DS_
01CC 02688 _00226_DS_:
               02689 ;       .line   482; TCPIP_Stack/ETH97J60.c     *type = header.Type.v[0];
01CC C000 FFE5 02690         MOVFF   r0x00, POSTDEC1
01D0 C000 FFE9 02691         MOVFF   r0x03, FSR0L
01D4 C000 FFF3 02692         MOVFF   r0x04, PRODL
01D8 5000      02693         MOVF    r0x05, W
01DA EC00 F000 02694         CALL    __gptrput1
01DE 02695 _00227_DS_:
01DE 0000      02696         BANKSEL _WasDiscarded
               02697 ;       .line   486; TCPIP_Stack/ETH97J60.c     WasDiscarded = FALSE;
01E0 6B00      02698         CLRF    _WasDiscarded, B
               02699 ;       .line   487; TCPIP_Stack/ETH97J60.c     return TRUE;
01E2 0E01      02700         MOVLW   0x01
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 51


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
01E4 02701 _00230_DS_:
01E4 CFE4 F000 02702         MOVFF   PREINC1, r0x09
01E8 CFE4 F000 02703         MOVFF   PREINC1, r0x08
01EC CFE4 F000 02704         MOVFF   PREINC1, r0x07
01F0 CFE4 F000 02705         MOVFF   PREINC1, r0x06
01F4 CFE4 F000 02706         MOVFF   PREINC1, r0x05
01F8 CFE4 F000 02707         MOVFF   PREINC1, r0x04
01FC CFE4 F000 02708         MOVFF   PREINC1, r0x03
0200 CFE4 F000 02709         MOVFF   PREINC1, r0x02
0204 CFE4 F000 02710         MOVFF   PREINC1, r0x01
0208 CFE4 F000 02711         MOVFF   PREINC1, r0x00
020C CFE4 FFD9 02712         MOVFF   PREINC1, FSR2L
0210 0012      02713         RETURN  
               02714 
               02715 ; ; Starting pCode block
               02716 S_ETH97J60__MACGetFreeRxSize    code
0000 02717 _MACGetFreeRxSize:
               02718 ;       .line   367; TCPIP_Stack/ETH97J60.c     WORD MACGetFreeRxSize(void)
0000 CFD9 FFE5 02719         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02720         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02721         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02722         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02723         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02724         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02725         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02726         MOVFF   r0x05, POSTDEC1
0020 02727 _00186_DS_:
0020 0000      02728         BANKSEL _EPKTCNT
               02729 ;       .line   377; TCPIP_Stack/ETH97J60.c     ReadPT.v[0] = EPKTCNT;
0022 5100      02730         MOVF    _EPKTCNT, W, B
0024 0000      02731         BANKSEL _MACGetFreeRxSize_ReadPT_1_1
0026 6F00      02732         MOVWF   _MACGetFreeRxSize_ReadPT_1_1, B
               02733 ;       .line   379; TCPIP_Stack/ETH97J60.c     WritePT.Val = ((WORD)ERXWRPTH)<<8|ERXWRPTL;
0028 C000 F000 02734         MOVFF   _ERXWRPTH, r0x00
002C 6A00      02735         CLRF    r0x01
002E 5000      02736         MOVF    r0x00, W
0030 6E00      02737         MOVWF   r0x03
0032 6A00      02738         CLRF    r0x02
0034 C000 F000 02739         MOVFF   _ERXWRPTL, r0x00
0038 6A00      02740         CLRF    r0x01
003A 5000      02741         MOVF    r0x00, W
003C 1200      02742         IORWF   r0x02, F
003E 5000      02743         MOVF    r0x01, W
0040 1200      02744         IORWF   r0x03, F
0042 5000      02745         MOVF    r0x02, W
0044 0000      02746         BANKSEL _MACGetFreeRxSize_WritePT_1_1
0046 6F00      02747         MOVWF   _MACGetFreeRxSize_WritePT_1_1, B
0048 5000      02748         MOVF    r0x03, W
004A 0000      02749         BANKSEL (_MACGetFreeRxSize_WritePT_1_1 + 1)
004C 6F00      02750         MOVWF   (_MACGetFreeRxSize_WritePT_1_1 + 1), B
004E 0000      02751         BANKSEL _EPKTCNT
               02752 ;       .line   380; TCPIP_Stack/ETH97J60.c     } while(EPKTCNT != ReadPT.v[0]);
0050 5100      02753         MOVF    _EPKTCNT, W, B
0052 0000      02754         BANKSEL _MACGetFreeRxSize_ReadPT_1_1
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 52


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0054 1900      02755         XORWF   _MACGetFreeRxSize_ReadPT_1_1, W, B
0056 E100      02756         BNZ     _00186_DS_
               02757 ;       .line   383; TCPIP_Stack/ETH97J60.c     ReadPT.Val = ERXRDPTH<<8|ERXRDPTL;
0058 C000 F000 02758         MOVFF   _ERXRDPTH, r0x00
005C 6A00      02759         CLRF    r0x01
005E 5000      02760         MOVF    r0x00, W
0060 6E00      02761         MOVWF   r0x03
0062 6A00      02762         CLRF    r0x02
0064 C000 F000 02763         MOVFF   _ERXRDPTL, r0x00
0068 6A00      02764         CLRF    r0x01
006A 5000      02765         MOVF    r0x00, W
006C 1200      02766         IORWF   r0x02, F
006E 5000      02767         MOVF    r0x01, W
0070 1200      02768         IORWF   r0x03, F
0072 5000      02769         MOVF    r0x02, W
0074 0000      02770         BANKSEL _MACGetFreeRxSize_ReadPT_1_1
0076 6F00      02771         MOVWF   _MACGetFreeRxSize_ReadPT_1_1, B
0078 5000      02772         MOVF    r0x03, W
007A 0000      02773         BANKSEL (_MACGetFreeRxSize_ReadPT_1_1 + 1)
007C 6F00      02774         MOVWF   (_MACGetFreeRxSize_ReadPT_1_1 + 1), B
               02775 ;       .line   388; TCPIP_Stack/ETH97J60.c     if(WritePT.Val > ReadPT.Val)
007E C000 F000 02776         MOVFF   _MACGetFreeRxSize_ReadPT_1_1, r0x00
0082 C000 F000 02777         MOVFF   (_MACGetFreeRxSize_ReadPT_1_1 + 1), r0x01
0086 0000      02778         BANKSEL (_MACGetFreeRxSize_WritePT_1_1 + 1)
0088 5100      02779         MOVF    (_MACGetFreeRxSize_WritePT_1_1 + 1), W, B
008A 5C00      02780         SUBWF   r0x01, W
008C E100      02781         BNZ     _00205_DS_
008E 0000      02782         BANKSEL _MACGetFreeRxSize_WritePT_1_1
0090 5100      02783         MOVF    _MACGetFreeRxSize_WritePT_1_1, W, B
0092 5C00      02784         SUBWF   r0x00, W
0094 02785 _00205_DS_:
0094 E200      02786         BC      _00193_DS_
               02787 ;       .line   390; TCPIP_Stack/ETH97J60.c     return (RXSTOP - RXSTART) - (WritePT.Val - ReadPT.Val);
0096 5000      02788         MOVF    r0x00, W
0098 0000      02789         BANKSEL _MACGetFreeRxSize_WritePT_1_1
009A 5D00      02790         SUBWF   _MACGetFreeRxSize_WritePT_1_1, W, B
009C 6E00      02791         MOVWF   r0x02
009E 5000      02792         MOVF    r0x01, W
00A0 0000      02793         BANKSEL (_MACGetFreeRxSize_WritePT_1_1 + 1)
00A2 5900      02794         SUBWFB  (_MACGetFreeRxSize_WritePT_1_1 + 1), W, B
00A4 6E00      02795         MOVWF   r0x03
00A6 6A00      02796         CLRF    r0x04
00A8 6A00      02797         CLRF    r0x05
00AA 5000      02798         MOVF    r0x02, W
00AC 0809      02799         SUBLW   0x09
00AE 6E00      02800         MOVWF   r0x02
00B0 0E1A      02801         MOVLW   0x1a
00B2 5600      02802         SUBFWB  r0x03, F
00B4 0E00      02803         MOVLW   0x00
00B6 5600      02804         SUBFWB  r0x04, F
00B8 0E00      02805         MOVLW   0x00
00BA 5600      02806         SUBFWB  r0x05, F
00BC C000 FFF3 02807         MOVFF   r0x03, PRODL
00C0 5000      02808         MOVF    r0x02, W
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 53


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00C2 D000      02809         BRA     _00195_DS_
00C4 02810 _00193_DS_:
00C4 0000      02811         BANKSEL _MACGetFreeRxSize_WritePT_1_1
               02812 ;       .line   392; TCPIP_Stack/ETH97J60.c     else if(WritePT.Val == ReadPT.Val)
00C6 5100      02813         MOVF    _MACGetFreeRxSize_WritePT_1_1, W, B
00C8 1800      02814         XORWF   r0x00, W
00CA E100      02815         BNZ     _00206_DS_
00CC 0000      02816         BANKSEL (_MACGetFreeRxSize_WritePT_1_1 + 1)
00CE 5100      02817         MOVF    (_MACGetFreeRxSize_WritePT_1_1 + 1), W, B
00D0 1800      02818         XORWF   r0x01, W
00D2 E000      02819         BZ      _00207_DS_
00D4 02820 _00206_DS_:
00D4 D000      02821         BRA     _00190_DS_
00D6 02822 _00207_DS_:
               02823 ;       .line   394; TCPIP_Stack/ETH97J60.c     return RXSIZE - 1;
00D6 0E1A      02824         MOVLW   0x1a
00D8 6EF3      02825         MOVWF   PRODL
00DA 0E09      02826         MOVLW   0x09
00DC D000      02827         BRA     _00195_DS_
00DE 02828 _00190_DS_:
00DE 0000      02829         BANKSEL _MACGetFreeRxSize_WritePT_1_1
               02830 ;       .line   398; TCPIP_Stack/ETH97J60.c     return ReadPT.Val - WritePT.Val - 1;
00E0 5100      02831         MOVF    _MACGetFreeRxSize_WritePT_1_1, W, B
00E2 5E00      02832         SUBWF   r0x00, F
00E4 0000      02833         BANKSEL (_MACGetFreeRxSize_WritePT_1_1 + 1)
00E6 5100      02834         MOVF    (_MACGetFreeRxSize_WritePT_1_1 + 1), W, B
00E8 5A00      02835         SUBWFB  r0x01, F
00EA 0EFF      02836         MOVLW   0xff
00EC 2600      02837         ADDWF   r0x00, F
00EE A0D8      02838         BTFSS   STATUS, 0
00F0 0600      02839         DECF    r0x01, F
00F2 C000 FFF3 02840         MOVFF   r0x01, PRODL
00F6 5000      02841         MOVF    r0x00, W
00F8 02842 _00195_DS_:
00F8 CFE4 F000 02843         MOVFF   PREINC1, r0x05
00FC CFE4 F000 02844         MOVFF   PREINC1, r0x04
0100 CFE4 F000 02845         MOVFF   PREINC1, r0x03
0104 CFE4 F000 02846         MOVFF   PREINC1, r0x02
0108 CFE4 F000 02847         MOVFF   PREINC1, r0x01
010C CFE4 F000 02848         MOVFF   PREINC1, r0x00
0110 CFE4 FFD9 02849         MOVFF   PREINC1, FSR2L
0114 0012      02850         RETURN  
               02851 
               02852 ; ; Starting pCode block
               02853 S_ETH97J60__MACDiscardRx        code
0000 02854 _MACDiscardRx:
               02855 ;       .line   313; TCPIP_Stack/ETH97J60.c     void MACDiscardRx(void)
0000 CFD9 FFE5 02856         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02857         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02858         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02859         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02860         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02861         MOVFF   r0x03, POSTDEC1
0018 0000      02862         BANKSEL _WasDiscarded
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 54


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               02863 ;       .line   318; TCPIP_Stack/ETH97J60.c     if(WasDiscarded) return;
001A 5100      02864         MOVF    _WasDiscarded, W, B
001C E100      02865         BNZ     _00177_DS_
               02866 ;       .line   319; TCPIP_Stack/ETH97J60.c     WasDiscarded = TRUE;
001E 0E01      02867         MOVLW   0x01
0020 0000      02868         BANKSEL _WasDiscarded
0022 6F00      02869         MOVWF   _WasDiscarded, B
0024 0000      02870         BANKSEL _NextPacketLocation
               02871 ;       .line   325; TCPIP_Stack/ETH97J60.c     NewRXRDLocation.Val = NextPacketLocation.Val - 1;
0026 5100      02872         MOVF    _NextPacketLocation, W, B
0028 0FFF      02873         ADDLW   0xff
002A 6E00      02874         MOVWF   r0x00
002C 0EFF      02875         MOVLW   0xff
002E 0000      02876         BANKSEL (_NextPacketLocation + 1)
0030 2100      02877         ADDWFC  (_NextPacketLocation + 1), W, B
0032 6E00      02878         MOVWF   r0x01
0034 5000      02879         MOVF    r0x00, W
0036 0000      02880         BANKSEL _MACDiscardRx_NewRXRDLocation_1_1
0038 6F00      02881         MOVWF   _MACDiscardRx_NewRXRDLocation_1_1, B
003A 5000      02882         MOVF    r0x01, W
003C 0000      02883         BANKSEL (_MACDiscardRx_NewRXRDLocation_1_1 + 1)
003E 6F00      02884         MOVWF   (_MACDiscardRx_NewRXRDLocation_1_1 + 1), B
               02885 ;       .line   327; TCPIP_Stack/ETH97J60.c     if(NewRXRDLocation.Val > RXSTOP)
0040 C000 FFE8 02886         MOVFF   _MACDiscardRx_NewRXRDLocation_1_1, WREG
0044 C000 FFE8 02887         MOVFF   (_MACDiscardRx_NewRXRDLocation_1_1 + 1), WREG
0048 6A00      02888         CLRF    r0x02
004A 6A00      02889         CLRF    r0x03
004C 0E00      02890         MOVLW   0x00
004E 5C00      02891         SUBWF   r0x03, W
0050 E100      02892         BNZ     _00181_DS_
0052 0E00      02893         MOVLW   0x00
0054 5C00      02894         SUBWF   r0x02, W
0056 E100      02895         BNZ     _00181_DS_
0058 0E1A      02896         MOVLW   0x1a
005A 5C00      02897         SUBWF   r0x01, W
005C E100      02898         BNZ     _00181_DS_
005E 0E0A      02899         MOVLW   0x0a
0060 5C00      02900         SUBWF   r0x00, W
0062 02901 _00181_DS_:
0062 E300      02902         BNC     _00176_DS_
               02903 ;       .line   332; TCPIP_Stack/ETH97J60.c     NewRXRDLocation.Val = RXSTOP;
0064 0E09      02904         MOVLW   0x09
0066 0000      02905         BANKSEL _MACDiscardRx_NewRXRDLocation_1_1
0068 6F00      02906         MOVWF   _MACDiscardRx_NewRXRDLocation_1_1, B
006A 0E1A      02907         MOVLW   0x1a
006C 0000      02908         BANKSEL (_MACDiscardRx_NewRXRDLocation_1_1 + 1)
006E 6F00      02909         MOVWF   (_MACDiscardRx_NewRXRDLocation_1_1 + 1), B
0070 02910 _00176_DS_:
0070 0000      02911         BANKSEL _ECON2bits
               02912 ;       .line   336; TCPIP_Stack/ETH97J60.c     ECON2bits.PKTDEC = 1;
0072 8D00      02913         BSF     _ECON2bits, 6, B
               02914 ;       .line   341; TCPIP_Stack/ETH97J60.c     ERXRDPTL = NewRXRDLocation.v[0];
0074 C000 F000 02915         MOVFF   _MACDiscardRx_NewRXRDLocation_1_1, _ERXRDPTL
               02916 ;       .line   342; TCPIP_Stack/ETH97J60.c     ERXRDPTH = NewRXRDLocation.v[1];
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 55


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0078 C000 F000 02917         MOVFF   (_MACDiscardRx_NewRXRDLocation_1_1 + 1), _ERXRDPTH
               02918 ;       .line   347; TCPIP_Stack/ETH97J60.c     EIRbits.PKTIF = 0;
007C 9C00      02919         BCF     _EIRbits, 6
007E 02920 _00177_DS_:
007E CFE4 F000 02921         MOVFF   PREINC1, r0x03
0082 CFE4 F000 02922         MOVFF   PREINC1, r0x02
0086 CFE4 F000 02923         MOVFF   PREINC1, r0x01
008A CFE4 F000 02924         MOVFF   PREINC1, r0x00
008E CFE4 FFD9 02925         MOVFF   PREINC1, FSR2L
0092 0012      02926         RETURN  
               02927 
               02928 ; ; Starting pCode block
               02929 S_ETH97J60__MACIsTxReady        code
0000 02930 _MACIsTxReady:
               02931 ;       .line   278; TCPIP_Stack/ETH97J60.c     BOOL MACIsTxReady(void)
0000 CFD9 FFE5 02932         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02933         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02934         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02935         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02936         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02937         MOVFF   r0x03, POSTDEC1
               02938 ;       .line   280; TCPIP_Stack/ETH97J60.c     if(!ECON1bits.TXRTS)
0018 B600      02939         BTFSC   _ECON1bits, 3
001A D000      02940         BRA     _00161_DS_
               02941 ;       .line   281; TCPIP_Stack/ETH97J60.c     return TRUE;
001C 0E01      02942         MOVLW   0x01
001E D000      02943         BRA     _00164_DS_
0020 02944 _00161_DS_:
               02945 ;       .line   285; TCPIP_Stack/ETH97J60.c     if((WORD)TickGet() - wTXWatchdog >= (3ull*TICK_SECOND/1000ull))
0020 EC00 F000 02946         CALL    _TickGet
0024 6E00      02947         MOVWF   r0x00
0026 CFF3 F000 02948         MOVFF   PRODL, r0x01
002A CFF4 F000 02949         MOVFF   PRODH, r0x02
002E CFE9 F000 02950         MOVFF   FSR0L, r0x03
0032 0000      02951         BANKSEL _wTXWatchdog
0034 5100      02952         MOVF    _wTXWatchdog, W, B
0036 5E00      02953         SUBWF   r0x00, F
0038 0000      02954         BANKSEL (_wTXWatchdog + 1)
003A 5100      02955         MOVF    (_wTXWatchdog + 1), W, B
003C 5A00      02956         SUBWFB  r0x01, F
003E 6A00      02957         CLRF    r0x02
0040 6A00      02958         CLRF    r0x03
0042 0E00      02959         MOVLW   0x00
0044 5C00      02960         SUBWF   r0x03, W
0046 E100      02961         BNZ     _00168_DS_
0048 0E00      02962         MOVLW   0x00
004A 5C00      02963         SUBWF   r0x02, W
004C E100      02964         BNZ     _00168_DS_
004E 0E00      02965         MOVLW   0x00
0050 5C00      02966         SUBWF   r0x01, W
0052 E100      02967         BNZ     _00168_DS_
0054 0E7A      02968         MOVLW   0x7a
0056 5C00      02969         SUBWF   r0x00, W
0058 02970 _00168_DS_:
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 56


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0058 E300      02971         BNC     _00163_DS_
               02972 ;       .line   287; TCPIP_Stack/ETH97J60.c     ECON1bits.TXRTS = 0;
005A 9600      02973         BCF     _ECON1bits, 3
               02974 ;       .line   288; TCPIP_Stack/ETH97J60.c     MACFlush();
005C EC00 F000 02975         CALL    _MACFlush
0060 02976 _00163_DS_:
               02977 ;       .line   290; TCPIP_Stack/ETH97J60.c     return FALSE;
0060 6AE8      02978         CLRF    WREG
0062 02979 _00164_DS_:
0062 CFE4 F000 02980         MOVFF   PREINC1, r0x03
0066 CFE4 F000 02981         MOVFF   PREINC1, r0x02
006A CFE4 F000 02982         MOVFF   PREINC1, r0x01
006E CFE4 F000 02983         MOVFF   PREINC1, r0x00
0072 CFE4 FFD9 02984         MOVFF   PREINC1, FSR2L
0076 0012      02985         RETURN  
               02986 
               02987 ; ; Starting pCode block
               02988 S_ETH97J60__MACIsLinked code
0000 02989 _MACIsLinked:
               02990 ;       .line   244; TCPIP_Stack/ETH97J60.c     BOOL MACIsLinked(void)
0000 CFD9 FFE5 02991         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02992         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02993         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02994         MOVFF   r0x01, POSTDEC1
               02995 ;       .line   253; TCPIP_Stack/ETH97J60.c     pr.Val= ReadPHYReg(PHSTAT1);
0010 0E01      02996         MOVLW   0x01
0012 6EE5      02997         MOVWF   POSTDEC1
0014 EC00 F000 02998         CALL    _ReadPHYReg
0018 6E00      02999         MOVWF   r0x00
001A CFF3 F000 03000         MOVFF   PRODL, r0x01
001E 2AE1      03001         INCF    FSR1L, F
0020 5000      03002         MOVF    r0x00, W
0022 0000      03003         BANKSEL _MACIsLinked_pr_1_1
0024 6F00      03004         MOVWF   _MACIsLinked_pr_1_1, B
0026 5000      03005         MOVF    r0x01, W
0028 0000      03006         BANKSEL (_MACIsLinked_pr_1_1 + 1)
002A 6F00      03007         MOVWF   (_MACIsLinked_pr_1_1 + 1), B
               03008 ;       .line   254; TCPIP_Stack/ETH97J60.c     return pr.PHSTAT1bits.LLSTAT;
002C 6A00      03009         CLRF    r0x00
002E 0000      03010         BANKSEL _MACIsLinked_pr_1_1
0030 B500      03011         BTFSC   _MACIsLinked_pr_1_1, 2, B
0032 2A00      03012         INCF    r0x00, F
0034 5000      03013         MOVF    r0x00, W
0036 CFE4 F000 03014         MOVFF   PREINC1, r0x01
003A CFE4 F000 03015         MOVFF   PREINC1, r0x00
003E CFE4 FFD9 03016         MOVFF   PREINC1, FSR2L
0042 0012      03017         RETURN  
               03018 
               03019 ; ; Starting pCode block
               03020 S_ETH97J60__MACInit     code
0000 03021 _MACInit:
               03022 ;       .line   131; TCPIP_Stack/ETH97J60.c     void MACInit(void)
0000 CFD9 FFE5 03023         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 03024         MOVFF   FSR1L, FSR2L
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 57


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               03025 ;       .line   135; TCPIP_Stack/ETH97J60.c     TRISAbits.TRISA0 = 0; // Set LEDA as output (green on ethernet connector)
0008 9000      03026         BCF     _TRISAbits, 0
               03027 ;       .line   136; TCPIP_Stack/ETH97J60.c     TRISAbits.TRISA1 = 0; // Set LEDB as output (yellow on ethernet connector)
000A 9200      03028         BCF     _TRISAbits, 1
000C 0000      03029         BANKSEL _ECON2bits
               03030 ;       .line   137; TCPIP_Stack/ETH97J60.c     ECON2bits.ETHEN = 1;    // Enable Ethernet!
000E 8B00      03031         BSF     _ECON2bits, 5, B
0010 03032 _00105_DS_:
0010 0000      03033         BANKSEL _ESTATbits
               03034 ;       .line   140; TCPIP_Stack/ETH97J60.c     while(!ESTATbits.PHYRDY);
0012 A100      03035         BTFSS   _ESTATbits, 0, B
0014 D000      03036         BRA     _00105_DS_
               03037 ;       .line   144; TCPIP_Stack/ETH97J60.c     WasDiscarded = TRUE;
0016 0E01      03038         MOVLW   0x01
0018 0000      03039         BANKSEL _WasDiscarded
001A 6F00      03040         MOVWF   _WasDiscarded, B
001C 0000      03041         BANKSEL _NextPacketLocation
               03042 ;       .line   145; TCPIP_Stack/ETH97J60.c     NextPacketLocation.Val = RXSTART;
001E 6B00      03043         CLRF    _NextPacketLocation, B
0020 0000      03044         BANKSEL (_NextPacketLocation + 1)
0022 6B00      03045         CLRF    (_NextPacketLocation + 1), B
0024 0000      03046         BANKSEL _ERXSTL
               03047 ;       .line   146; TCPIP_Stack/ETH97J60.c     ERXSTL = LOW(RXSTART);
0026 6B00      03048         CLRF    _ERXSTL, B
0028 0000      03049         BANKSEL _ERXSTH
               03050 ;       .line   147; TCPIP_Stack/ETH97J60.c     ERXSTH = HIGH(RXSTART);
002A 6B00      03051         CLRF    _ERXSTH, B
               03052 ;       .line   149; TCPIP_Stack/ETH97J60.c     ERXRDPTL = LOW(RXSTOP); // Write low byte first
002C 0E09      03053         MOVLW   0x09
002E 0000      03054         BANKSEL _ERXRDPTL
0030 6F00      03055         MOVWF   _ERXRDPTL, B
               03056 ;       .line   150; TCPIP_Stack/ETH97J60.c     ERXRDPTH = HIGH(RXSTOP);    // Write high byte last
0032 0E1A      03057         MOVLW   0x1a
0034 0000      03058         BANKSEL _ERXRDPTH
0036 6F00      03059         MOVWF   _ERXRDPTH, B
               03060 ;       .line   152; TCPIP_Stack/ETH97J60.c     ERXNDL = LOW(RXSTOP);
0038 0E09      03061         MOVLW   0x09
003A 0000      03062         BANKSEL _ERXNDL
003C 6F00      03063         MOVWF   _ERXNDL, B
               03064 ;       .line   153; TCPIP_Stack/ETH97J60.c     ERXNDH = HIGH(RXSTOP);
003E 0E1A      03065         MOVLW   0x1a
0040 0000      03066         BANKSEL _ERXNDH
0042 6F00      03067         MOVWF   _ERXNDH, B
               03068 ;       .line   155; TCPIP_Stack/ETH97J60.c     ETXSTL = LOW(TXSTART);
0044 0E0A      03069         MOVLW   0x0a
0046 0000      03070         BANKSEL _ETXSTL
0048 6F00      03071         MOVWF   _ETXSTL, B
               03072 ;       .line   156; TCPIP_Stack/ETH97J60.c     ETXSTH = HIGH(TXSTART);
004A 0E1A      03073         MOVLW   0x1a
004C 0000      03074         BANKSEL _ETXSTH
004E 6F00      03075         MOVWF   _ETXSTH, B
               03076 ;       .line   159; TCPIP_Stack/ETH97J60.c     EWRPTL = LOW(TXSTART);
0050 0E0A      03077         MOVLW   0x0a
0052 0000      03078         BANKSEL _EWRPTL
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 58


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0054 6F00      03079         MOVWF   _EWRPTL, B
               03080 ;       .line   160; TCPIP_Stack/ETH97J60.c     EWRPTH = HIGH(TXSTART);
0056 0E1A      03081         MOVLW   0x1a
0058 0000      03082         BANKSEL _EWRPTH
005A 6F00      03083         MOVWF   _EWRPTH, B
               03084 ;       .line   161; TCPIP_Stack/ETH97J60.c     EDATA = 0x00;
005C 6A00      03085         CLRF    _EDATA
               03086 ;       .line   171; TCPIP_Stack/ETH97J60.c     MACON1 = MACON1_TXPAUS | MACON1_RXPAUS | MACON1_MARXEN; Nop();
005E 0E0D      03087         MOVLW   0x0d
0060 0000      03088         BANKSEL _MACON1
0062 6F00      03089         MOVWF   _MACON1, B
0064 0000      03090         nop 
               03091 ;       .line   179; TCPIP_Stack/ETH97J60.c     MACON3 = MACON3_PADCFG0 | MACON3_TXCRCEN | MACON3_FRMLNEN; Nop();
0066 0E32      03092         MOVLW   0x32
0068 0000      03093         BANKSEL _MACON3
006A 6F00      03094         MOVWF   _MACON3, B
006C 0000      03095         nop 
               03096 ;       .line   180; TCPIP_Stack/ETH97J60.c     MABBIPG = 0x12; Nop();
006E 0E12      03097         MOVLW   0x12
0070 0000      03098         BANKSEL _MABBIPG
0072 6F00      03099         MOVWF   _MABBIPG, B
0074 0000      03100         nop 
               03101 ;       .line   186; TCPIP_Stack/ETH97J60.c     MACON4 = MACON4_DEFER; Nop();
0076 0E40      03102         MOVLW   0x40
0078 0000      03103         BANKSEL _MACON4
007A 6F00      03104         MOVWF   _MACON4, B
007C 0000      03105         nop 
               03106 ;       .line   191; TCPIP_Stack/ETH97J60.c     MAIPGL = 0x12; Nop();
007E 0E12      03107         MOVLW   0x12
0080 0000      03108         BANKSEL _MAIPGL
0082 6F00      03109         MOVWF   _MAIPGL, B
0084 0000      03110         nop 
               03111 ;       .line   192; TCPIP_Stack/ETH97J60.c     MAIPGH = 0x0C; Nop();
0086 0E0C      03112         MOVLW   0x0c
0088 0000      03113         BANKSEL _MAIPGH
008A 6F00      03114         MOVWF   _MAIPGH, B
008C 0000      03115         nop 
               03116 ;       .line   195; TCPIP_Stack/ETH97J60.c     MAMXFLL = LOW(6+6+2+1500+4); Nop();
008E 0EEE      03117         MOVLW   0xee
0090 0000      03118         BANKSEL _MAMXFLL
0092 6F00      03119         MOVWF   _MAMXFLL, B
0094 0000      03120         nop 
               03121 ;       .line   196; TCPIP_Stack/ETH97J60.c     MAMXFLH = HIGH(6+6+2+1500+4); Nop();
0096 0E05      03122         MOVLW   0x05
0098 0000      03123         BANKSEL _MAMXFLH
009A 6F00      03124         MOVWF   _MAMXFLH, B
009C 0000      03125         nop 
               03126 ;       .line   199; TCPIP_Stack/ETH97J60.c     MAADR1 = AppConfig.MyMACAddr.v[0]; Nop();
009E C000 F000 03127         MOVFF   (_AppConfig + 45), _MAADR1
00A2 0000      03128         nop 
               03129 ;       .line   200; TCPIP_Stack/ETH97J60.c     MAADR2 = AppConfig.MyMACAddr.v[1]; Nop();
00A4 C000 F000 03130         MOVFF   (_AppConfig + 46), _MAADR2
00A8 0000      03131         nop 
               03132 ;       .line   201; TCPIP_Stack/ETH97J60.c     MAADR3 = AppConfig.MyMACAddr.v[2]; Nop();
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 59


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00AA C000 F000 03133         MOVFF   (_AppConfig + 47), _MAADR3
00AE 0000      03134         nop 
               03135 ;       .line   202; TCPIP_Stack/ETH97J60.c     MAADR4 = AppConfig.MyMACAddr.v[3]; Nop();
00B0 C000 F000 03136         MOVFF   (_AppConfig + 48), _MAADR4
00B4 0000      03137         nop 
               03138 ;       .line   203; TCPIP_Stack/ETH97J60.c     MAADR5 = AppConfig.MyMACAddr.v[4]; Nop();
00B6 C000 F000 03139         MOVFF   (_AppConfig + 49), _MAADR5
00BA 0000      03140         nop 
               03141 ;       .line   204; TCPIP_Stack/ETH97J60.c     MAADR6 = AppConfig.MyMACAddr.v[5]; Nop();
00BC C000 F000 03142         MOVFF   (_AppConfig + 50), _MAADR6
00C0 0000      03143         nop 
               03144 ;       .line   207; TCPIP_Stack/ETH97J60.c     WritePHYReg(PHCON2, PHCON2_HDLDIS | PHCON2_RXAPDIS);
00C2 0E01      03145         MOVLW   0x01
00C4 6EE5      03146         MOVWF   POSTDEC1
00C6 0E10      03147         MOVLW   0x10
00C8 6EE5      03148         MOVWF   POSTDEC1
00CA 0E10      03149         MOVLW   0x10
00CC 6EE5      03150         MOVWF   POSTDEC1
00CE EC00 F000 03151         CALL    _WritePHYReg
00D2 0E03      03152         MOVLW   0x03
00D4 26E1      03153         ADDWF   FSR1L, F
               03154 ;       .line   210; TCPIP_Stack/ETH97J60.c     SetLEDConfig(0x3472);
00D6 0E34      03155         MOVLW   0x34
00D8 6EE5      03156         MOVWF   POSTDEC1
00DA 0E72      03157         MOVLW   0x72
00DC 6EE5      03158         MOVWF   POSTDEC1
00DE 0E14      03159         MOVLW   0x14
00E0 6EE5      03160         MOVWF   POSTDEC1
00E2 EC00 F000 03161         CALL    _WritePHYReg
00E6 0E03      03162         MOVLW   0x03
00E8 26E1      03163         ADDWF   FSR1L, F
               03164 ;       .line   216; TCPIP_Stack/ETH97J60.c     WritePHYReg(PHCON1, 0x0000);
00EA 0E00      03165         MOVLW   0x00
00EC 6EE5      03166         MOVWF   POSTDEC1
00EE 0E00      03167         MOVLW   0x00
00F0 6EE5      03168         MOVWF   POSTDEC1
00F2 0E00      03169         MOVLW   0x00
00F4 6EE5      03170         MOVWF   POSTDEC1
00F6 EC00 F000 03171         CALL    _WritePHYReg
00FA 0E03      03172         MOVLW   0x03
00FC 26E1      03173         ADDWF   FSR1L, F
               03174 ;       .line   220; TCPIP_Stack/ETH97J60.c     ECON1bits.RXEN = 1;
00FE 8400      03175         BSF     _ECON1bits, 2
0100 CFE4 FFD9 03176         MOVFF   PREINC1, FSR2L
0104 0012      03177         RETURN  
               03178 
               03179 ; ; Starting pCode block
0106 03180 __str_0:
0106 7265 6F72 03181         DB      0x65, 0x72, 0x72, 0x6f, 0x72, 0x20, 0x72, 0x65, 0x61, 0x64, 0x69, 0x6e
     2072 6572 
     6461 6E69 
0112 2067 6468 03182         DB      0x67, 0x20, 0x68, 0x64, 0x72, 0x00
     0072      
               03183 
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 60


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               03184 
               03185 ; Statistics:
               03186 ; code size:     5346 (0x14e2) bytes ( 4.08%)
               03187 ;                2673 (0x0a71) words
               03188 ; udata size:     141 (0x008d) bytes ( 3.67%)
               03189 ; access size:     13 (0x000d) bytes
               03190 
               03191 
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 61


SYMBOL TABLE
  LABEL                             VALUE 

FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1L                             00000FE1
FSR2L                             00000FD9
INDF0                             00000FEF
PLUSW2                            00000FDB
POSTDEC1                          00000FE5
PREINC1                           00000FE4
PRODH                             00000FF4
PRODL                             00000FF3
STATUS                            00000FD8
WREG                              00000FE8
_00105_DS_                        00000010
_00161_DS_                        00000020
_00163_DS_                        00000060
_00164_DS_                        00000062
_00168_DS_                        00000058
_00176_DS_                        00000070
_00177_DS_                        0000007E
_00181_DS_                        00000062
_00186_DS_                        00000020
_00190_DS_                        000000DE
_00193_DS_                        000000C4
_00195_DS_                        000000F8
_00205_DS_                        00000094
_00206_DS_                        000000D4
_00207_DS_                        000000D6
_00213_DS_                        0000005E
_00215_DS_                        0000006C
_00217_DS_                        00000148
_00219_DS_                        00000130
_00220_DS_                        0000014A
_00226_DS_                        000001CC
_00227_DS_                        000001DE
_00230_DS_                        000001E4
_00244_DS_                        00000106
_00245_DS_                        00000128
_00246_DS_                        000001B0
_00247_DS_                        000001B2
_00248_DS_                        000001CA
_00256_DS_                        00000102
_00257_DS_                        00000108
_00262_DS_                        00000022
_00271_DS_                        00000094
_00275_DS_                        00000072
_00291_DS_                        00000094
_00295_DS_                        0000007A
_00301_DS_                        0000026A
_00302_DS_                        0000027E
_00305_DS_                        000001E2
_00307_DS_                        000002E4
_00310_DS_                        000001FE
_00311_DS_                        00000206
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 62


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_00319_DS_                        000001F4
_00325_DS_                        0000007C
_00327_DS_                        000000A8
_00328_DS_                        00000142
_00330_DS_                        0000016A
_00332_DS_                        00000188
_00336_DS_                        000001F8
_00337_DS_                        00000210
_00341_DS_                        000002B6
_00343_DS_                        000002D4
_00347_DS_                        00000322
_00352_DS_                        000001AE
_00354_DS_                        00000338
_00376_DS_                        000000B2
_00394_DS_                        00000272
_00395_DS_                        0000029C
_00398_DS_                        00000308
_00413_DS_                        0000005A
_00416_DS_                        00000096
_00421_DS_                        000000B2
_00427_DS_                        0000008E
_00437_DS_                        00000042
_00440_DS_                        00000074
_00451_DS_                        00000018
_00465_DS_                        0000003E
_00473_DS_                        0000000A
_00476_DS_                        00000010
_00484_DS_                        0000000C
_00487_DS_                        00000016
_00492_DS_                        00000068
_00495_DS_                        0000011E
_00498_DS_                        000000AE
_00499_DS_                        000000B2
_00500_DS_                        000000FE
_00501_DS_                        00000102
_10492_DS_                        0000026A
_ADCON0                           00000000
_ADCON0bits                       00000000
_ADCON1                           00000000
_ADCON1bits                       00000000
_ADCON2                           00000000
_ADCON2bits                       00000000
_ADRES                            00000000
_ADRESH                           00000000
_ADRESL                           00000000
_AN0String                        00000000
_AppConfig                        00000000
_BAUDCON                          00000000
_BAUDCON1                         00000000
_BAUDCON1bits                     00000000
_BAUDCON2                         00000000
_BAUDCON2bits                     00000000
_BAUDCONbits                      00000000
_BAUDCTL                          00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 63


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_BAUDCTL1                         00000000
_BAUDCTL1bits                     00000000
_BAUDCTL2                         00000000
_BAUDCTL2bits                     00000000
_BAUDCTLbits                      00000000
_BSR                              00000000
_CCP1CON                          00000000
_CCP1CONbits                      00000000
_CCP2CON                          00000000
_CCP2CONbits                      00000000
_CCP3CON                          00000000
_CCP3CONbits                      00000000
_CCP4CON                          00000000
_CCP4CONbits                      00000000
_CCP5CON                          00000000
_CCP5CONbits                      00000000
_CCPR1                            00000000
_CCPR1H                           00000000
_CCPR1L                           00000000
_CCPR2                            00000000
_CCPR2H                           00000000
_CCPR2L                           00000000
_CCPR3                            00000000
_CCPR3H                           00000000
_CCPR3L                           00000000
_CCPR4                            00000000
_CCPR4H                           00000000
_CCPR4L                           00000000
_CCPR5                            00000000
_CCPR5H                           00000000
_CCPR5L                           00000000
_CMCON                            00000000
_CMCONbits                        00000000
_CVRCON                           00000000
_CVRCONbits                       00000000
_CalcIPBufferChecksum             00000000
_CalcIPBufferChecksum_Checksum_1_1  00000000
_CalcIPBufferChecksum_ChunkLen_1_1  00000000
_CalcIPBufferChecksum_DataBuffer_1_1  00000000
_CurrentPacketLocation            00000000
_DDRA                             00000000
_DDRAbits                         00000000
_DDRB                             00000000
_DDRBbits                         00000000
_DDRC                             00000000
_DDRCbits                         00000000
_DDRD                             00000000
_DDRDbits                         00000000
_DDRE                             00000000
_DDREbits                         00000000
_DDRF                             00000000
_DDRFbits                         00000000
_DDRG                             00000000
_DDRGbits                         00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 64


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_DDRH                             00000000
_DDRHbits                         00000000
_DDRJ                             00000000
_DDRJbits                         00000000
_DisplayString                    00000000
_EBSTCON                          00000000
_EBSTCONbits                      00000000
_EBSTCS                           00000000
_EBSTCSH                          00000000
_EBSTCSL                          00000000
_EBSTSD                           00000000
_ECCP1AS                          00000000
_ECCP1ASbits                      00000000
_ECCP1CON                         00000000
_ECCP1CONbits                     00000000
_ECCP1DEL                         00000000
_ECCP1DELbits                     00000000
_ECCP2AS                          00000000
_ECCP2ASbits                      00000000
_ECCP2CON                         00000000
_ECCP2CONbits                     00000000
_ECCP2DEL                         00000000
_ECCP2DELbits                     00000000
_ECCP3AS                          00000000
_ECCP3ASbits                      00000000
_ECCP3CON                         00000000
_ECCP3CONbits                     00000000
_ECCP3DEL                         00000000
_ECCP3DELbits                     00000000
_ECON1                            00000000
_ECON1bits                        00000000
_ECON2                            00000000
_ECON2bits                        00000000
_EDATA                            00000000
_EDATAbits                        00000000
_EDMACS                           00000000
_EDMACSH                          00000000
_EDMACSL                          00000000
_EDMADST                          00000000
_EDMADSTH                         00000000
_EDMADSTL                         00000000
_EDMAND                           00000000
_EDMANDH                          00000000
_EDMANDL                          00000000
_EDMAST                           00000000
_EDMASTH                          00000000
_EDMASTL                          00000000
_EECON1                           00000000
_EECON1bits                       00000000
_EECON2                           00000000
_EFLOCON                          00000000
_EFLOCONbits                      00000000
_EHT0                             00000000
_EHT1                             00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 65


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_EHT2                             00000000
_EHT3                             00000000
_EHT4                             00000000
_EHT5                             00000000
_EHT6                             00000000
_EHT7                             00000000
_EIE                              00000000
_EIEbits                          00000000
_EIR                              00000000
_EIRbits                          00000000
_EPAUS                            00000000
_EPAUSH                           00000000
_EPAUSL                           00000000
_EPKTCNT                          00000000
_EPMCS                            00000000
_EPMCSH                           00000000
_EPMCSL                           00000000
_EPMM0                            00000000
_EPMM1                            00000000
_EPMM2                            00000000
_EPMM3                            00000000
_EPMM4                            00000000
_EPMM5                            00000000
_EPMM6                            00000000
_EPMM7                            00000000
_EPMO                             00000000
_EPMOH                            00000000
_EPMOL                            00000000
_ERDPT                            00000000
_ERDPTH                           00000000
_ERDPTL                           00000000
_ERXFCON                          00000000
_ERXFCONbits                      00000000
_ERXND                            00000000
_ERXNDH                           00000000
_ERXNDL                           00000000
_ERXRDPT                          00000000
_ERXRDPTH                         00000000
_ERXRDPTL                         00000000
_ERXST                            00000000
_ERXSTH                           00000000
_ERXSTL                           00000000
_ERXWRPT                          00000000
_ERXWRPTH                         00000000
_ERXWRPTL                         00000000
_ESTAT                            00000000
_ESTATbits                        00000000
_ETXND                            00000000
_ETXNDH                           00000000
_ETXNDL                           00000000
_ETXST                            00000000
_ETXSTH                           00000000
_ETXSTL                           00000000
_EWOLIE                           00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 66


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_EWOLIEbits                       00000000
_EWOLIR                           00000000
_EWOLIRbits                       00000000
_EWRPT                            00000000
_EWRPTH                           00000000
_EWRPTL                           00000000
_FSR0H                            00000000
_FSR0L                            00000000
_FSR1H                            00000000
_FSR1L                            00000000
_FSR2H                            00000000
_FSR2L                            00000000
_INDF0                            00000000
_INDF1                            00000000
_INDF2                            00000000
_INTCON                           00000000
_INTCON2                          00000000
_INTCON2bits                      00000000
_INTCON3                          00000000
_INTCON3bits                      00000000
_INTCONbits                       00000000
_IPR1                             00000000
_IPR1bits                         00000000
_IPR2                             00000000
_IPR2bits                         00000000
_IPR3                             00000000
_IPR3bits                         00000000
_LATA                             00000000
_LATAbits                         00000000
_LATB                             00000000
_LATBbits                         00000000
_LATC                             00000000
_LATCbits                         00000000
_LATD                             00000000
_LATDbits                         00000000
_LATE                             00000000
_LATEbits                         00000000
_LATF                             00000000
_LATFbits                         00000000
_LATG                             00000000
_LATGbits                         00000000
_LATH                             00000000
_LATHbits                         00000000
_LATJ                             00000000
_LATJbits                         00000000
_LCDText                          00000000
_LCDUpdate                        00000000
_MAADR1                           00000000
_MAADR2                           00000000
_MAADR3                           00000000
_MAADR4                           00000000
_MAADR5                           00000000
_MAADR6                           00000000
_MABBIPG                          00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 67


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_MACCalcRxChecksum                00000000
_MACDiscardRx                     00000000
_MACDiscardRx_NewRXRDLocation_1_1  00000000
_MACFlush                         00000000
_MACFlush_i_2_2                   00000000
_MACGet                           00000000
_MACGetArray                      00000000
_MACGetArray_i_1_1                00000000
_MACGetFreeRxSize                 00000000
_MACGetFreeRxSize_ReadPT_1_1      00000000
_MACGetFreeRxSize_WritePT_1_1     00000000
_MACGetHeader                     00000000
_MACGetHeader_header_1_1          00000000
_MACInit                          00000000
_MACIsLinked                      00000000
_MACIsLinked_pr_1_1               00000000
_MACIsMemCopyDone                 00000000
_MACIsTxReady                     00000000
_MACLCON1                         00000000
_MACLCON1bits                     00000000
_MACLCON2                         00000000
_MACLCON2bits                     00000000
_MACMemCopyAsync                  00000000
_MACMemCopyAsync_ReadSave_1_1     00000000
_MACMemCopyAsync_WriteSave_1_1    00000000
_MACMemCopyAsync_destAddr_1_1     00000000
_MACMemCopyAsync_sourceAddr_1_1   00000000
_MACON1                           00000000
_MACON1bits                       00000000
_MACON2                           00000000
_MACON2bits                       00000000
_MACON3                           00000000
_MACON3bits                       00000000
_MACON4                           00000000
_MACON4bits                       00000000
_MACPowerDown                     00000000
_MACPowerUp                       00000000
_MACPrintHeader                   00000000
_MACPrintHeader_header_1_1        00000000
_MACPut                           00000000
_MACPutArray                      00000000
_MACPutHeader                     00000000
_MACSetReadPtr                    00000000
_MACSetReadPtrInRx                00000000
_MACSetReadPtrInRx_ReadPT_1_1     00000000
_MACSetWritePtr                   00000000
_MAIPG                            00000000
_MAIPGH                           00000000
_MAIPGL                           00000000
_MAMXFL                           00000000
_MAMXFLH                          00000000
_MAMXFLL                          00000000
_MEMCON                           00000000
_MEMCONbits                       00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 68


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_MICMD                            00000000
_MICMDbits                        00000000
_MICON                            00000000
_MICONbits                        00000000
_MIRD                             00000000
_MIRDH                            00000000
_MIRDL                            00000000
_MIREGADR                         00000000
_MISTAT                           00000000
_MISTATbits                       00000000
_MIWR                             00000000
_MIWRH                            00000000
_MIWRL                            00000000
_NextPacketLocation               00000000
_OSCCON                           00000000
_OSCCONbits                       00000000
_OSCTUNE                          00000000
_OSCTUNEbits                      00000000
_PC                               00000000
_PCL                              00000000
_PCLATH                           00000000
_PCLATU                           00000000
_PIE1                             00000000
_PIE1bits                         00000000
_PIE2                             00000000
_PIE2bits                         00000000
_PIE3                             00000000
_PIE3bits                         00000000
_PIR1                             00000000
_PIR1bits                         00000000
_PIR2                             00000000
_PIR2bits                         00000000
_PIR3                             00000000
_PIR3bits                         00000000
_PLUSW0                           00000000
_PLUSW1                           00000000
_PLUSW2                           00000000
_PORTA                            00000000
_PORTAbits                        00000000
_PORTB                            00000000
_PORTBbits                        00000000
_PORTC                            00000000
_PORTCbits                        00000000
_PORTD                            00000000
_PORTDbits                        00000000
_PORTE                            00000000
_PORTEbits                        00000000
_PORTF                            00000000
_PORTFbits                        00000000
_PORTG                            00000000
_PORTGbits                        00000000
_PORTH                            00000000
_PORTHbits                        00000000
_PORTJ                            00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 69


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_PORTJbits                        00000000
_POSTDEC0                         00000000
_POSTDEC1                         00000000
_POSTDEC2                         00000000
_POSTINC0                         00000000
_POSTINC1                         00000000
_POSTINC2                         00000000
_PR2                              00000000
_PR4                              00000000
_PREINC0                          00000000
_PREINC1                          00000000
_PREINC2                          00000000
_PROD                             00000000
_PRODH                            00000000
_PRODL                            00000000
_PSPCON                           00000000
_PSPCONbits                       00000000
_RCON                             00000000
_RCONbits                         00000000
_RCREG                            00000000
_RCREG1                           00000000
_RCREG2                           00000000
_RCSTA                            00000000
_RCSTA1                           00000000
_RCSTA1bits                       00000000
_RCSTA2                           00000000
_RCSTA2bits                       00000000
_RCSTAbits                        00000000
_ReadPHYReg                       00000000
_ReadPHYReg_Result_1_1            00000000
_SPBRG                            00000000
_SPBRG1                           00000000
_SPBRG2                           00000000
_SPBRGH                           00000000
_SPBRGH1                          00000000
_SPBRGH2                          00000000
_SSP1ADD                          00000000
_SSP1BUF                          00000000
_SSP1CON1                         00000000
_SSP1CON1bits                     00000000
_SSP1CON2                         00000000
_SSP1CON2bits                     00000000
_SSP1STAT                         00000000
_SSP1STATbits                     00000000
_SSP2ADD                          00000000
_SSP2BUF                          00000000
_SSP2CON1                         00000000
_SSP2CON1bits                     00000000
_SSP2CON2                         00000000
_SSP2CON2bits                     00000000
_SSP2STAT                         00000000
_SSP2STATbits                     00000000
_SSPADD                           00000000
_SSPBUF                           00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 70


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_SSPCON1                          00000000
_SSPCON1bits                      00000000
_SSPCON2                          00000000
_SSPCON2bits                      00000000
_SSPSTAT                          00000000
_SSPSTATbits                      00000000
_STATUS                           00000000
_STATUSbits                       00000000
_STKPTR                           00000000
_STKPTRbits                       00000000
_T0CON                            00000000
_T0CONbits                        00000000
_T1CON                            00000000
_T1CONbits                        00000000
_T2CON                            00000000
_T2CONbits                        00000000
_T3CON                            00000000
_T3CONbits                        00000000
_T4CON                            00000000
_T4CONbits                        00000000
_TABLAT                           00000000
_TBLPTR                           00000000
_TBLPTRH                          00000000
_TBLPTRL                          00000000
_TBLPTRU                          00000000
_TMR0H                            00000000
_TMR0L                            00000000
_TMR1H                            00000000
_TMR1L                            00000000
_TMR2                             00000000
_TMR3H                            00000000
_TMR3L                            00000000
_TMR4                             00000000
_TOS                              00000000
_TOSH                             00000000
_TOSL                             00000000
_TOSU                             00000000
_TRISA                            00000000
_TRISAbits                        00000000
_TRISB                            00000000
_TRISBbits                        00000000
_TRISC                            00000000
_TRISCbits                        00000000
_TRISD                            00000000
_TRISDbits                        00000000
_TRISE                            00000000
_TRISEbits                        00000000
_TRISF                            00000000
_TRISFbits                        00000000
_TRISG                            00000000
_TRISGbits                        00000000
_TRISH                            00000000
_TRISHbits                        00000000
_TRISJ                            00000000
gpasm-0.13.7 beta               Objects/ETH97J60.asm3-15-2010  11:43:30          PAGE 71


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_TRISJbits                        00000000
_TXREG                            00000000
_TXREG1                           00000000
_TXREG2                           00000000
_TXSTA                            00000000
_TXSTA1                           00000000
_TXSTA1bits                       00000000
_TXSTA2                           00000000
_TXSTA2bits                       00000000
_TXSTAbits                        00000000
_TickGet                          00000000
_UDPRxCount                       00000000
_UDPSocketInfo                    00000000
_UDPTxCount                       00000000
_WDTCON                           00000000
_WDTCONbits                       00000000
_WREG                             00000000
_WasDiscarded                     00000000
_WritePHYReg                      00000000
_WritePHYReg_Data_1_1             00000000
__18F97J60                        00000001
__gptrget1                        00000000
__gptrget2                        00000000
__gptrput1                        00000000
__str_0                           00000106
_activeUDPSocket                  00000000
_memcpy                           00000000
_stdin                            00000000
_stdout                           00000000
_swaps                            00000000
_wTXWatchdog                      00000000
r0x00                             00000000
r0x01                             00000001
r0x02                             00000002
r0x03                             00000003
r0x04                             00000004
r0x05                             00000005
r0x06                             00000006
r0x07                             00000007
r0x08                             00000008
r0x09                             00000009
r0x0a                             0000000A
r0x0b                             0000000B
r0x0c                             0000000C


Errors   :       0
Warnings :       0 reported,       0 suppressed
Messages :       0 reported,       0 suppressed

