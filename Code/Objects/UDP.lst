gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00001 ;--------------------------------------------------------
               00002 ; File Created by SDCC : free open source ANSI-C Compiler
               00003 ; Version 2.9.4 #5595 (Dec 17 2009) (UNIX)
               00004 ; This file was generated Mon Mar 15 11:43:33 2010
               00005 ;--------------------------------------------------------
               00006 ; PIC16 port for the Microchip 16-bit core micros
               00007 ;--------------------------------------------------------
               00008         list    p=18f97j60
               00009 
               00010         radix dec
               00011 
               00012 ;--------------------------------------------------------
               00013 ; public variables in this module
               00014 ;--------------------------------------------------------
               00015         global _UDPInit
               00016         global _UDPTask
               00017         global _UDPOpen
               00018         global _UDPClose
               00019         global _UDPSetTxBuffer
               00020         global _UDPSetRxBuffer
               00021         global _UDPIsPutReady
               00022         global _UDPPut
               00023         global _UDPPutArray
               00024         global _UDPPutString
               00025         global _UDPFlush
               00026         global _UDPIsGetReady
               00027         global _UDPGet
               00028         global _UDPGetArray
               00029         global _UDPDiscard
               00030         global _UDPProcess
               00031         global _UDPSocketInfo
               00032         global _activeUDPSocket
               00033         global _UDPTxCount
               00034         global _UDPRxCount
               00035 
               00036 ;--------------------------------------------------------
               00037 ; extern variables in this module
               00038 ;--------------------------------------------------------
               00039         extern __gptrget2
               00040         extern __gptrput2
               00041         extern __gptrget4
               00042         extern __gptrput1
               00043         extern _EBSTCONbits
               00044         extern _MISTATbits
               00045         extern _EFLOCONbits
               00046         extern _MACON1bits
               00047         extern _MACON2bits
               00048         extern _MACON3bits
               00049         extern _MACON4bits
               00050         extern _MACLCON1bits
               00051         extern _MACLCON2bits
               00052         extern _MICONbits
               00053         extern _MICMDbits
               00054         extern _EWOLIEbits
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00055         extern _EWOLIRbits
               00056         extern _ERXFCONbits
               00057         extern _EIEbits
               00058         extern _ESTATbits
               00059         extern _ECON2bits
               00060         extern _EIRbits
               00061         extern _EDATAbits
               00062         extern _SSP2CON2bits
               00063         extern _SSP2CON1bits
               00064         extern _SSP2STATbits
               00065         extern _ECCP2DELbits
               00066         extern _ECCP2ASbits
               00067         extern _ECCP3DELbits
               00068         extern _ECCP3ASbits
               00069         extern _RCSTA2bits
               00070         extern _TXSTA2bits
               00071         extern _CCP5CONbits
               00072         extern _CCP4CONbits
               00073         extern _T4CONbits
               00074         extern _ECCP1DELbits
               00075         extern _BAUDCON2bits
               00076         extern _BAUDCTL2bits
               00077         extern _BAUDCONbits
               00078         extern _BAUDCON1bits
               00079         extern _BAUDCTLbits
               00080         extern _BAUDCTL1bits
               00081         extern _PORTAbits
               00082         extern _PORTBbits
               00083         extern _PORTCbits
               00084         extern _PORTDbits
               00085         extern _PORTEbits
               00086         extern _PORTFbits
               00087         extern _PORTGbits
               00088         extern _PORTHbits
               00089         extern _PORTJbits
               00090         extern _LATAbits
               00091         extern _LATBbits
               00092         extern _LATCbits
               00093         extern _LATDbits
               00094         extern _LATEbits
               00095         extern _LATFbits
               00096         extern _LATGbits
               00097         extern _LATHbits
               00098         extern _LATJbits
               00099         extern _DDRAbits
               00100         extern _TRISAbits
               00101         extern _DDRBbits
               00102         extern _TRISBbits
               00103         extern _DDRCbits
               00104         extern _TRISCbits
               00105         extern _DDRDbits
               00106         extern _TRISDbits
               00107         extern _DDREbits
               00108         extern _TRISEbits
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00109         extern _DDRFbits
               00110         extern _TRISFbits
               00111         extern _DDRGbits
               00112         extern _TRISGbits
               00113         extern _DDRHbits
               00114         extern _TRISHbits
               00115         extern _DDRJbits
               00116         extern _TRISJbits
               00117         extern _OSCTUNEbits
               00118         extern _MEMCONbits
               00119         extern _PIE1bits
               00120         extern _PIR1bits
               00121         extern _IPR1bits
               00122         extern _PIE2bits
               00123         extern _PIR2bits
               00124         extern _IPR2bits
               00125         extern _PIE3bits
               00126         extern _PIR3bits
               00127         extern _IPR3bits
               00128         extern _EECON1bits
               00129         extern _RCSTAbits
               00130         extern _RCSTA1bits
               00131         extern _TXSTAbits
               00132         extern _TXSTA1bits
               00133         extern _PSPCONbits
               00134         extern _T3CONbits
               00135         extern _CMCONbits
               00136         extern _CVRCONbits
               00137         extern _ECCP1ASbits
               00138         extern _CCP3CONbits
               00139         extern _ECCP3CONbits
               00140         extern _CCP2CONbits
               00141         extern _ECCP2CONbits
               00142         extern _CCP1CONbits
               00143         extern _ECCP1CONbits
               00144         extern _ADCON2bits
               00145         extern _ADCON1bits
               00146         extern _ADCON0bits
               00147         extern _SSP1CON2bits
               00148         extern _SSPCON2bits
               00149         extern _SSP1CON1bits
               00150         extern _SSPCON1bits
               00151         extern _SSP1STATbits
               00152         extern _SSPSTATbits
               00153         extern _T2CONbits
               00154         extern _T1CONbits
               00155         extern _RCONbits
               00156         extern _WDTCONbits
               00157         extern _ECON1bits
               00158         extern _OSCCONbits
               00159         extern _T0CONbits
               00160         extern _STATUSbits
               00161         extern _INTCON3bits
               00162         extern _INTCON2bits
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00163         extern _INTCONbits
               00164         extern _STKPTRbits
               00165         extern _stdin
               00166         extern _stdout
               00167         extern _AN0String
               00168         extern _AppConfig
               00169         extern _LCDText
               00170         extern _MAADR5
               00171         extern _MAADR6
               00172         extern _MAADR3
               00173         extern _MAADR4
               00174         extern _MAADR1
               00175         extern _MAADR2
               00176         extern _EBSTSD
               00177         extern _EBSTCON
               00178         extern _EBSTCS
               00179         extern _EBSTCSL
               00180         extern _EBSTCSH
               00181         extern _MISTAT
               00182         extern _EFLOCON
               00183         extern _EPAUS
               00184         extern _EPAUSL
               00185         extern _EPAUSH
               00186         extern _MACON1
               00187         extern _MACON2
               00188         extern _MACON3
               00189         extern _MACON4
               00190         extern _MABBIPG
               00191         extern _MAIPG
               00192         extern _MAIPGL
               00193         extern _MAIPGH
               00194         extern _MACLCON1
               00195         extern _MACLCON2
               00196         extern _MAMXFL
               00197         extern _MAMXFLL
               00198         extern _MAMXFLH
               00199         extern _MICON
               00200         extern _MICMD
               00201         extern _MIREGADR
               00202         extern _MIWR
               00203         extern _MIWRL
               00204         extern _MIWRH
               00205         extern _MIRD
               00206         extern _MIRDL
               00207         extern _MIRDH
               00208         extern _EHT0
               00209         extern _EHT1
               00210         extern _EHT2
               00211         extern _EHT3
               00212         extern _EHT4
               00213         extern _EHT5
               00214         extern _EHT6
               00215         extern _EHT7
               00216         extern _EPMM0
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00217         extern _EPMM1
               00218         extern _EPMM2
               00219         extern _EPMM3
               00220         extern _EPMM4
               00221         extern _EPMM5
               00222         extern _EPMM6
               00223         extern _EPMM7
               00224         extern _EPMCS
               00225         extern _EPMCSL
               00226         extern _EPMCSH
               00227         extern _EPMO
               00228         extern _EPMOL
               00229         extern _EPMOH
               00230         extern _EWOLIE
               00231         extern _EWOLIR
               00232         extern _ERXFCON
               00233         extern _EPKTCNT
               00234         extern _EWRPT
               00235         extern _EWRPTL
               00236         extern _EWRPTH
               00237         extern _ETXST
               00238         extern _ETXSTL
               00239         extern _ETXSTH
               00240         extern _ETXND
               00241         extern _ETXNDL
               00242         extern _ETXNDH
               00243         extern _ERXST
               00244         extern _ERXSTL
               00245         extern _ERXSTH
               00246         extern _ERXND
               00247         extern _ERXNDL
               00248         extern _ERXNDH
               00249         extern _ERXRDPT
               00250         extern _ERXRDPTL
               00251         extern _ERXRDPTH
               00252         extern _ERXWRPT
               00253         extern _ERXWRPTL
               00254         extern _ERXWRPTH
               00255         extern _EDMAST
               00256         extern _EDMASTL
               00257         extern _EDMASTH
               00258         extern _EDMAND
               00259         extern _EDMANDL
               00260         extern _EDMANDH
               00261         extern _EDMADST
               00262         extern _EDMADSTL
               00263         extern _EDMADSTH
               00264         extern _EDMACS
               00265         extern _EDMACSL
               00266         extern _EDMACSH
               00267         extern _EIE
               00268         extern _ESTAT
               00269         extern _ECON2
               00270         extern _EIR
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00271         extern _EDATA
               00272         extern _SSP2CON2
               00273         extern _SSP2CON1
               00274         extern _SSP2STAT
               00275         extern _SSP2ADD
               00276         extern _SSP2BUF
               00277         extern _ECCP2DEL
               00278         extern _ECCP2AS
               00279         extern _ECCP3DEL
               00280         extern _ECCP3AS
               00281         extern _RCSTA2
               00282         extern _TXSTA2
               00283         extern _TXREG2
               00284         extern _RCREG2
               00285         extern _SPBRG2
               00286         extern _CCP5CON
               00287         extern _CCPR5
               00288         extern _CCPR5L
               00289         extern _CCPR5H
               00290         extern _CCP4CON
               00291         extern _CCPR4
               00292         extern _CCPR4L
               00293         extern _CCPR4H
               00294         extern _T4CON
               00295         extern _PR4
               00296         extern _TMR4
               00297         extern _ECCP1DEL
               00298         extern _ERDPT
               00299         extern _ERDPTL
               00300         extern _ERDPTH
               00301         extern _BAUDCON2
               00302         extern _BAUDCTL2
               00303         extern _SPBRGH2
               00304         extern _BAUDCON
               00305         extern _BAUDCON1
               00306         extern _BAUDCTL
               00307         extern _BAUDCTL1
               00308         extern _SPBRGH
               00309         extern _SPBRGH1
               00310         extern _PORTA
               00311         extern _PORTB
               00312         extern _PORTC
               00313         extern _PORTD
               00314         extern _PORTE
               00315         extern _PORTF
               00316         extern _PORTG
               00317         extern _PORTH
               00318         extern _PORTJ
               00319         extern _LATA
               00320         extern _LATB
               00321         extern _LATC
               00322         extern _LATD
               00323         extern _LATE
               00324         extern _LATF
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00325         extern _LATG
               00326         extern _LATH
               00327         extern _LATJ
               00328         extern _DDRA
               00329         extern _TRISA
               00330         extern _DDRB
               00331         extern _TRISB
               00332         extern _DDRC
               00333         extern _TRISC
               00334         extern _DDRD
               00335         extern _TRISD
               00336         extern _DDRE
               00337         extern _TRISE
               00338         extern _DDRF
               00339         extern _TRISF
               00340         extern _DDRG
               00341         extern _TRISG
               00342         extern _DDRH
               00343         extern _TRISH
               00344         extern _DDRJ
               00345         extern _TRISJ
               00346         extern _OSCTUNE
               00347         extern _MEMCON
               00348         extern _PIE1
               00349         extern _PIR1
               00350         extern _IPR1
               00351         extern _PIE2
               00352         extern _PIR2
               00353         extern _IPR2
               00354         extern _PIE3
               00355         extern _PIR3
               00356         extern _IPR3
               00357         extern _EECON1
               00358         extern _EECON2
               00359         extern _RCSTA
               00360         extern _RCSTA1
               00361         extern _TXSTA
               00362         extern _TXSTA1
               00363         extern _TXREG
               00364         extern _TXREG1
               00365         extern _RCREG
               00366         extern _RCREG1
               00367         extern _SPBRG
               00368         extern _SPBRG1
               00369         extern _PSPCON
               00370         extern _T3CON
               00371         extern _TMR3L
               00372         extern _TMR3H
               00373         extern _CMCON
               00374         extern _CVRCON
               00375         extern _ECCP1AS
               00376         extern _CCP3CON
               00377         extern _ECCP3CON
               00378         extern _CCPR3
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00379         extern _CCPR3L
               00380         extern _CCPR3H
               00381         extern _CCP2CON
               00382         extern _ECCP2CON
               00383         extern _CCPR2
               00384         extern _CCPR2L
               00385         extern _CCPR2H
               00386         extern _CCP1CON
               00387         extern _ECCP1CON
               00388         extern _CCPR1
               00389         extern _CCPR1L
               00390         extern _CCPR1H
               00391         extern _ADCON2
               00392         extern _ADCON1
               00393         extern _ADCON0
               00394         extern _ADRES
               00395         extern _ADRESL
               00396         extern _ADRESH
               00397         extern _SSP1CON2
               00398         extern _SSPCON2
               00399         extern _SSP1CON1
               00400         extern _SSPCON1
               00401         extern _SSP1STAT
               00402         extern _SSPSTAT
               00403         extern _SSP1ADD
               00404         extern _SSPADD
               00405         extern _SSP1BUF
               00406         extern _SSPBUF
               00407         extern _T2CON
               00408         extern _PR2
               00409         extern _TMR2
               00410         extern _T1CON
               00411         extern _TMR1L
               00412         extern _TMR1H
               00413         extern _RCON
               00414         extern _WDTCON
               00415         extern _ECON1
               00416         extern _OSCCON
               00417         extern _T0CON
               00418         extern _TMR0L
               00419         extern _TMR0H
               00420         extern _STATUS
               00421         extern _FSR2L
               00422         extern _FSR2H
               00423         extern _PLUSW2
               00424         extern _PREINC2
               00425         extern _POSTDEC2
               00426         extern _POSTINC2
               00427         extern _INDF2
               00428         extern _BSR
               00429         extern _FSR1L
               00430         extern _FSR1H
               00431         extern _PLUSW1
               00432         extern _PREINC1
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00433         extern _POSTDEC1
               00434         extern _POSTINC1
               00435         extern _INDF1
               00436         extern _WREG
               00437         extern _FSR0L
               00438         extern _FSR0H
               00439         extern _PLUSW0
               00440         extern _PREINC0
               00441         extern _POSTDEC0
               00442         extern _POSTINC0
               00443         extern _INDF0
               00444         extern _INTCON3
               00445         extern _INTCON2
               00446         extern _INTCON
               00447         extern _PROD
               00448         extern _PRODL
               00449         extern _PRODH
               00450         extern _TABLAT
               00451         extern _TBLPTR
               00452         extern _TBLPTRL
               00453         extern _TBLPTRH
               00454         extern _TBLPTRU
               00455         extern _PC
               00456         extern _PCL
               00457         extern _PCLATH
               00458         extern _PCLATU
               00459         extern _STKPTR
               00460         extern _TOS
               00461         extern _TOSL
               00462         extern _TOSH
               00463         extern _TOSU
               00464         extern _strlen
               00465         extern _memcpy
               00466         extern _memset
               00467         extern _swaps
               00468         extern _CalcIPChecksum
               00469         extern _CalcIPBufferChecksum
               00470         extern _MACSetWritePtr
               00471         extern _MACSetReadPtr
               00472         extern _MACGet
               00473         extern _MACGetArray
               00474         extern _MACDiscardRx
               00475         extern _MACIsTxReady
               00476         extern _MACPut
               00477         extern _MACPutArray
               00478         extern _MACFlush
               00479         extern _IPPutHeader
               00480         extern _IPSetRxBuffer
               00481 ;--------------------------------------------------------
               00482 ;       Equates to used internal registers
               00483 ;--------------------------------------------------------
  00000FD8     00484 STATUS  equ     0xfd8
  00000FE8     00485 WREG    equ     0xfe8
  00000FE9     00486 FSR0L   equ     0xfe9
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
  00000FEA     00487 FSR0H   equ     0xfea
  00000FE1     00488 FSR1L   equ     0xfe1
  00000FD9     00489 FSR2L   equ     0xfd9
  00000FEF     00490 INDF0   equ     0xfef
  00000FEE     00491 POSTINC0        equ     0xfee
  00000FE5     00492 POSTDEC1        equ     0xfe5
  00000FE4     00493 PREINC1 equ     0xfe4
  00000FDB     00494 PLUSW2  equ     0xfdb
  00000FF3     00495 PRODL   equ     0xff3
  00000FF4     00496 PRODH   equ     0xff4
               00497 
               00498 
               00499         idata
               00500 _LastPutSocket  db      0xff
               00501 _SocketWithRxData       db      0xff
               00502 
               00503 
               00504 ; Internal registers
               00505 .registers      udata_ovr       0x0000
               00506 r0x00   res     1
               00507 r0x01   res     1
               00508 r0x02   res     1
               00509 r0x03   res     1
               00510 r0x04   res     1
               00511 r0x05   res     1
               00512 r0x06   res     1
               00513 r0x07   res     1
               00514 r0x08   res     1
               00515 r0x09   res     1
               00516 r0x0a   res     1
               00517 r0x0b   res     1
               00518 r0x0c   res     1
               00519 r0x0d   res     1
               00520 r0x0e   res     1
               00521 r0x0f   res     1
               00522 r0x10   res     1
               00523 r0x11   res     1
               00524 r0x12   res     1
               00525 r0x13   res     1
               00526 r0x14   res     1
               00527 r0x15   res     1
               00528 r0x16   res     1
               00529 r0x17   res     1
               00530 r0x18   res     1
               00531 r0x19   res     1
               00532 r0x1a   res     1
               00533 r0x1b   res     1
               00534 
               00535 udata_UDP_0     udata
               00536 _wPutOffset     res     2
               00537 
               00538 udata_UDP_1     udata
               00539 _wGetOffset     res     2
               00540 
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00541 udata_UDP_2     udata
               00542 _Flags  res     1
               00543 
               00544 udata_UDP_3     udata
               00545 _UDPOpen_NextPort_1_1   res     2
               00546 
               00547 udata_UDP_4     udata
               00548 _activeUDPSocket        res     1
               00549 
               00550 udata_UDP_5     udata
               00551 _UDPSocketInfo  res     140
               00552 
               00553 udata_UDP_6     udata
               00554 _UDPTxCount     res     2
               00555 
               00556 udata_UDP_7     udata
               00557 _UDPFlush_wChecksum_1_1 res     2
               00558 
               00559 udata_UDP_8     udata
               00560 _UDPFlush_h_1_1 res     8
               00561 
               00562 udata_UDP_9     udata
               00563 _UDPFlush_pseudoHeader_2_2      res     12
               00564 
               00565 udata_UDP_10    udata
               00566 _UDPRxCount     res     2
               00567 
               00568 udata_UDP_11    udata
               00569 _UDPProcess_h_1_1       res     8
               00570 
               00571 udata_UDP_12    udata
               00572 _UDPProcess_pseudoHeader_1_1    res     12
               00573 
               00574 udata_UDP_13    udata
               00575 _UDPProcess_checksums_1_1       res     4
               00576 
               00577 ;--------------------------------------------------------
               00578 ; global & static initialisations
               00579 ;--------------------------------------------------------
               00580 ; I code from now on!
               00581 ; ; Starting pCode block
               00582 S_UDP__FindMatchingSocket       code
0000 00583 _FindMatchingSocket:
               00584 ;       .line   1017; TCPIP_Stack/UDP.c static UDP_SOCKET FindMatchingSocket(UDP_HEADER *h,
0000 CFD9 FFE5 00585         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00586         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 00587         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 00588         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 00589         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 00590         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 00591         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 00592         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 00593         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 00594         MOVFF   r0x07, POSTDEC1
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0028 C000 FFE5 00595         MOVFF   r0x08, POSTDEC1
002C C000 FFE5 00596         MOVFF   r0x09, POSTDEC1
0030 C000 FFE5 00597         MOVFF   r0x0a, POSTDEC1
0034 C000 FFE5 00598         MOVFF   r0x0b, POSTDEC1
0038 C000 FFE5 00599         MOVFF   r0x0c, POSTDEC1
003C C000 FFE5 00600         MOVFF   r0x0d, POSTDEC1
0040 C000 FFE5 00601         MOVFF   r0x0e, POSTDEC1
0044 C000 FFE5 00602         MOVFF   r0x0f, POSTDEC1
0048 C000 FFE5 00603         MOVFF   r0x10, POSTDEC1
004C C000 FFE5 00604         MOVFF   r0x11, POSTDEC1
0050 C000 FFE5 00605         MOVFF   r0x12, POSTDEC1
0054 C000 FFE5 00606         MOVFF   r0x13, POSTDEC1
0058 C000 FFE5 00607         MOVFF   r0x14, POSTDEC1
005C C000 FFE5 00608         MOVFF   r0x15, POSTDEC1
0060 C000 FFE5 00609         MOVFF   r0x16, POSTDEC1
0064 C000 FFE5 00610         MOVFF   r0x17, POSTDEC1
0068 C000 FFE5 00611         MOVFF   r0x18, POSTDEC1
006C C000 FFE5 00612         MOVFF   r0x19, POSTDEC1
0070 C000 FFE5 00613         MOVFF   r0x1a, POSTDEC1
0074 C000 FFE5 00614         MOVFF   r0x1b, POSTDEC1
0078 0E02      00615         MOVLW   0x02
007A CFDB F000 00616         MOVFF   PLUSW2, r0x00
007E 0E03      00617         MOVLW   0x03
0080 CFDB F000 00618         MOVFF   PLUSW2, r0x01
0084 0E04      00619         MOVLW   0x04
0086 CFDB F000 00620         MOVFF   PLUSW2, r0x02
008A 0E05      00621         MOVLW   0x05
008C CFDB F000 00622         MOVFF   PLUSW2, r0x03
0090 0E06      00623         MOVLW   0x06
0092 CFDB F000 00624         MOVFF   PLUSW2, r0x04
0096 0E07      00625         MOVLW   0x07
0098 CFDB F000 00626         MOVFF   PLUSW2, r0x05
009C 0E08      00627         MOVLW   0x08
009E CFDB F000 00628         MOVFF   PLUSW2, r0x06
00A2 0E09      00629         MOVLW   0x09
00A4 CFDB F000 00630         MOVFF   PLUSW2, r0x07
00A8 0E0A      00631         MOVLW   0x0a
00AA CFDB F000 00632         MOVFF   PLUSW2, r0x08
               00633 ;       .line   1025; TCPIP_Stack/UDP.c partialMatch = INVALID_UDP_SOCKET;
00AE 0EFF      00634         MOVLW   0xff
00B0 6E00      00635         MOVWF   r0x09
               00636 ;       .line   1027; TCPIP_Stack/UDP.c p = UDPSocketInfo;
00B2 0E00      00637         MOVLW   HIGH(_UDPSocketInfo)
00B4 6E00      00638         MOVWF   r0x0b
00B6 0E00      00639         MOVLW   LOW(_UDPSocketInfo)
00B8 6E00      00640         MOVWF   r0x0a
00BA 0E80      00641         MOVLW   0x80
00BC 6E00      00642         MOVWF   r0x0c
               00643 ;       .line   1028; TCPIP_Stack/UDP.c for ( s = 0; s < MAX_UDP_SOCKETS; s++ )
00BE 6A00      00644         CLRF    r0x0d
00C0 5000      00645         MOVF    r0x00, W
00C2 0F02      00646         ADDLW   0x02
00C4 6E00      00647         MOVWF   r0x0e
00C6 0E00      00648         MOVLW   0x00
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00C8 2000      00649         ADDWFC  r0x01, W
00CA 6E00      00650         MOVWF   r0x0f
00CC 0E00      00651         MOVLW   0x00
00CE 2000      00652         ADDWFC  r0x02, W
00D0 6E00      00653         MOVWF   r0x10
00D2 C000 FFE9 00654         MOVFF   r0x0e, FSR0L
00D6 C000 FFF3 00655         MOVFF   r0x0f, PRODL
00DA 5000      00656         MOVF    r0x10, W
00DC EC00 F000 00657         CALL    __gptrget2
00E0 6E00      00658         MOVWF   r0x0e
00E2 CFF3 F000 00659         MOVFF   PRODL, r0x0f
00E6 C000 F000 00660         MOVFF   r0x0a, r0x10
00EA C000 F000 00661         MOVFF   r0x0b, r0x11
00EE C000 F000 00662         MOVFF   r0x0c, r0x12
00F2 6A00      00663         CLRF    r0x13
00F4 00664 _00306_DS_:
00F4 C000 F000 00665         MOVFF   r0x13, r0x14
00F8 6A00      00666         CLRF    r0x15
00FA 0E00      00667         MOVLW   0x00
00FC 5C00      00668         SUBWF   r0x15, W
00FE E100      00669         BNZ     _00319_DS_
0100 0E0A      00670         MOVLW   0x0a
0102 5C00      00671         SUBWF   r0x14, W
0104 00672 _00319_DS_:
0104 B0D8      00673         BTFSC   STATUS, 0
0106 D000      00674         BRA     _00309_DS_
               00675 ;       .line   1035; TCPIP_Stack/UDP.c if ( p->localPort == h->DestinationPort )
0108 5000      00676         MOVF    r0x10, W
010A 0F0C      00677         ADDLW   0x0c
010C 6E00      00678         MOVWF   r0x14
010E 0E00      00679         MOVLW   0x00
0110 2000      00680         ADDWFC  r0x11, W
0112 6E00      00681         MOVWF   r0x15
0114 0E00      00682         MOVLW   0x00
0116 2000      00683         ADDWFC  r0x12, W
0118 6E00      00684         MOVWF   r0x16
011A C000 FFE9 00685         MOVFF   r0x14, FSR0L
011E C000 FFF3 00686         MOVFF   r0x15, PRODL
0122 5000      00687         MOVF    r0x16, W
0124 EC00 F000 00688         CALL    __gptrget2
0128 6E00      00689         MOVWF   r0x14
012A CFF3 F000 00690         MOVFF   PRODL, r0x15
012E 5000      00691         MOVF    r0x14, W
0130 1800      00692         XORWF   r0x0e, W
0132 E100      00693         BNZ     _00320_DS_
0134 5000      00694         MOVF    r0x15, W
0136 1800      00695         XORWF   r0x0f, W
0138 E000      00696         BZ      _00321_DS_
013A 00697 _00320_DS_:
013A D000      00698         BRA     _00303_DS_
013C 00699 _00321_DS_:
               00700 ;       .line   1037; TCPIP_Stack/UDP.c if(p->remotePort == h->SourcePort)
013C 5000      00701         MOVF    r0x10, W
013E 0F0A      00702         ADDLW   0x0a
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0140 6E00      00703         MOVWF   r0x14
0142 0E00      00704         MOVLW   0x00
0144 2000      00705         ADDWFC  r0x11, W
0146 6E00      00706         MOVWF   r0x15
0148 0E00      00707         MOVLW   0x00
014A 2000      00708         ADDWFC  r0x12, W
014C 6E00      00709         MOVWF   r0x16
014E C000 FFE9 00710         MOVFF   r0x14, FSR0L
0152 C000 FFF3 00711         MOVFF   r0x15, PRODL
0156 5000      00712         MOVF    r0x16, W
0158 EC00 F000 00713         CALL    __gptrget2
015C 6E00      00714         MOVWF   r0x14
015E CFF3 F000 00715         MOVFF   PRODL, r0x15
0162 C000 FFE9 00716         MOVFF   r0x00, FSR0L
0166 C000 FFF3 00717         MOVFF   r0x01, PRODL
016A 5000      00718         MOVF    r0x02, W
016C EC00 F000 00719         CALL    __gptrget2
0170 6E00      00720         MOVWF   r0x16
0172 CFF3 F000 00721         MOVFF   PRODL, r0x17
0176 5000      00722         MOVF    r0x14, W
0178 1800      00723         XORWF   r0x16, W
017A E100      00724         BNZ     _00322_DS_
017C 5000      00725         MOVF    r0x15, W
017E 1800      00726         XORWF   r0x17, W
0180 E000      00727         BZ      _00323_DS_
0182 00728 _00322_DS_:
0182 D000      00729         BRA     _00301_DS_
0184 00730 _00323_DS_:
               00731 ;       .line   1039; TCPIP_Stack/UDP.c if( (p->remoteNode.IPAddr.Val == remoteNode->IPAddr.Val) ||
0184 C000 FFE9 00732         MOVFF   r0x10, FSR0L
0188 C000 FFF3 00733         MOVFF   r0x11, PRODL
018C 5000      00734         MOVF    r0x12, W
018E EC00 F000 00735         CALL    __gptrget4
0192 6E00      00736         MOVWF   r0x14
0194 CFF3 F000 00737         MOVFF   PRODL, r0x15
0198 CFF4 F000 00738         MOVFF   PRODH, r0x16
019C CFE9 F000 00739         MOVFF   FSR0L, r0x17
01A0 C000 FFE9 00740         MOVFF   r0x03, FSR0L
01A4 C000 FFF3 00741         MOVFF   r0x04, PRODL
01A8 5000      00742         MOVF    r0x05, W
01AA EC00 F000 00743         CALL    __gptrget4
01AE 6E00      00744         MOVWF   r0x18
01B0 CFF3 F000 00745         MOVFF   PRODL, r0x19
01B4 CFF4 F000 00746         MOVFF   PRODH, r0x1a
01B8 CFE9 F000 00747         MOVFF   FSR0L, r0x1b
01BC 5000      00748         MOVF    r0x14, W
01BE 1800      00749         XORWF   r0x18, W
01C0 E100      00750         BNZ     _00325_DS_
01C2 5000      00751         MOVF    r0x15, W
01C4 1800      00752         XORWF   r0x19, W
01C6 E100      00753         BNZ     _00325_DS_
01C8 5000      00754         MOVF    r0x16, W
01CA 1800      00755         XORWF   r0x1a, W
01CC E100      00756         BNZ     _00325_DS_
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
01CE 5000      00757         MOVF    r0x17, W
01D0 1800      00758         XORWF   r0x1b, W
01D2 E100      00759         BNZ     _00325_DS_
01D4 D000      00760         BRA     _00296_DS_
01D6 00761 _00325_DS_:
               00762 ;       .line   1040; TCPIP_Stack/UDP.c (localIP->Val == 0xFFFFFFFFul) || (localIP->Val == 
01D6 C000 FFE9 00763         MOVFF   r0x06, FSR0L
01DA C000 FFF3 00764         MOVFF   r0x07, PRODL
01DE 5000      00765         MOVF    r0x08, W
01E0 EC00 F000 00766         CALL    __gptrget4
01E4 6E00      00767         MOVWF   r0x14
01E6 CFF3 F000 00768         MOVFF   PRODL, r0x15
01EA CFF4 F000 00769         MOVFF   PRODH, r0x16
01EE CFE9 F000 00770         MOVFF   FSR0L, r0x17
01F2 5000      00771         MOVF    r0x14, W
01F4 0AFF      00772         XORLW   0xff
01F6 E100      00773         BNZ     _00327_DS_
01F8 5000      00774         MOVF    r0x15, W
01FA 0AFF      00775         XORLW   0xff
01FC E100      00776         BNZ     _00327_DS_
01FE 5000      00777         MOVF    r0x16, W
0200 0AFF      00778         XORLW   0xff
0202 E100      00779         BNZ     _00327_DS_
0204 5000      00780         MOVF    r0x17, W
0206 0AFF      00781         XORLW   0xff
0208 E000      00782         BZ      _00296_DS_
020A 00783 _00327_DS_:
020A 0000      00784         BANKSEL (_AppConfig + 4)
               00785 ;       .line   1041; TCPIP_Stack/UDP.c (AppConfig.MyIPAddr.Val | (~AppConfig.MyMask.Val))))
020C 1D00      00786         COMF    (_AppConfig + 4), W, B
020E 6E00      00787         MOVWF   r0x18
0210 0000      00788         BANKSEL (_AppConfig + 5)
0212 1D00      00789         COMF    (_AppConfig + 5), W, B
0214 6E00      00790         MOVWF   r0x19
0216 0000      00791         BANKSEL (_AppConfig + 6)
0218 1D00      00792         COMF    (_AppConfig + 6), W, B
021A 6E00      00793         MOVWF   r0x1a
021C 0000      00794         BANKSEL (_AppConfig + 7)
021E 1D00      00795         COMF    (_AppConfig + 7), W, B
0220 6E00      00796         MOVWF   r0x1b
0222 0000      00797         BANKSEL _AppConfig
0224 5100      00798         MOVF    _AppConfig, W, B
0226 1200      00799         IORWF   r0x18, F
0228 0000      00800         BANKSEL (_AppConfig + 1)
022A 5100      00801         MOVF    (_AppConfig + 1), W, B
022C 1200      00802         IORWF   r0x19, F
022E 0000      00803         BANKSEL (_AppConfig + 2)
0230 5100      00804         MOVF    (_AppConfig + 2), W, B
0232 1200      00805         IORWF   r0x1a, F
0234 0000      00806         BANKSEL (_AppConfig + 3)
0236 5100      00807         MOVF    (_AppConfig + 3), W, B
0238 1200      00808         IORWF   r0x1b, F
023A 5000      00809         MOVF    r0x14, W
023C 1800      00810         XORWF   r0x18, W
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
023E E100      00811         BNZ     _00329_DS_
0240 5000      00812         MOVF    r0x15, W
0242 1800      00813         XORWF   r0x19, W
0244 E100      00814         BNZ     _00329_DS_
0246 5000      00815         MOVF    r0x16, W
0248 1800      00816         XORWF   r0x1a, W
024A E100      00817         BNZ     _00329_DS_
024C 5000      00818         MOVF    r0x17, W
024E 1800      00819         XORWF   r0x1b, W
0250 E000      00820         BZ      _00296_DS_
0252 00821 _00329_DS_:
0252 D000      00822         BRA     _00301_DS_
0254 00823 _00296_DS_:
               00824 ;       .line   1043; TCPIP_Stack/UDP.c return s;
0254 5000      00825         MOVF    r0x0d, W
0256 D000      00826         BRA     _00310_DS_
0258 00827 _00301_DS_:
               00828 ;       .line   1047; TCPIP_Stack/UDP.c partialMatch = s;
0258 C000 F000 00829         MOVFF   r0x13, r0x09
025C 00830 _00303_DS_:
               00831 ;       .line   1049; TCPIP_Stack/UDP.c p++;
025C 0E0E      00832         MOVLW   0x0e
025E 2600      00833         ADDWF   r0x10, F
0260 0E00      00834         MOVLW   0x00
0262 2200      00835         ADDWFC  r0x11, F
0264 0E00      00836         MOVLW   0x00
0266 2200      00837         ADDWFC  r0x12, F
               00838 ;       .line   1028; TCPIP_Stack/UDP.c for ( s = 0; s < MAX_UDP_SOCKETS; s++ )
0268 2A00      00839         INCF    r0x13, F
026A C000 F000 00840         MOVFF   r0x13, r0x0d
026E D000      00841         BRA     _00306_DS_
0270 00842 _00309_DS_:
               00843 ;       .line   1052; TCPIP_Stack/UDP.c if ( partialMatch != INVALID_UDP_SOCKET )
0270 C000 F000 00844         MOVFF   r0x09, r0x06
0274 6A00      00845         CLRF    r0x07
0276 5000      00846         MOVF    r0x06, W
0278 0AFF      00847         XORLW   0xff
027A E100      00848         BNZ     _00332_DS_
027C 5000      00849         MOVF    r0x07, W
027E E100      00850         BNZ     _00332_DS_
0280 D000      00851         BRA     _00305_DS_
               00852 ; ;multiply lit val:0x0e by variable r0x09 and store in r0x06
               00853 ; ;Unrolled 8 X 8 multiplication
               00854 ; ;FIXME: the function does not support result==WREG
0282 00855 _00332_DS_:
               00856 ;       .line   1054; TCPIP_Stack/UDP.c p = &UDPSocketInfo[partialMatch];
0282 5000      00857         MOVF    r0x09, W
0284 0D0E      00858         MULLW   0x0e
0286 CFF3 F000 00859         MOVFF   PRODL, r0x06
028A 6A00      00860         CLRF    r0x07
028C 0E00      00861         MOVLW   LOW(_UDPSocketInfo)
028E 2600      00862         ADDWF   r0x06, F
0290 0E00      00863         MOVLW   HIGH(_UDPSocketInfo)
0292 2200      00864         ADDWFC  r0x07, F
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0294 5000      00865         MOVF    r0x07, W
0296 6E00      00866         MOVWF   r0x0b
0298 5000      00867         MOVF    r0x06, W
029A 6E00      00868         MOVWF   r0x0a
029C 0E80      00869         MOVLW   0x80
029E 6E00      00870         MOVWF   r0x0c
               00871 ;       .line   1057; TCPIP_Stack/UDP.c (void*)remoteNode, sizeof(p->remoteNode) );
02A0 0E00      00872         MOVLW   0x00
02A2 6EE5      00873         MOVWF   POSTDEC1
02A4 0E0A      00874         MOVLW   0x0a
02A6 6EE5      00875         MOVWF   POSTDEC1
02A8 5000      00876         MOVF    r0x05, W
02AA 6EE5      00877         MOVWF   POSTDEC1
02AC 5000      00878         MOVF    r0x04, W
02AE 6EE5      00879         MOVWF   POSTDEC1
02B0 5000      00880         MOVF    r0x03, W
02B2 6EE5      00881         MOVWF   POSTDEC1
02B4 5000      00882         MOVF    r0x0c, W
02B6 6EE5      00883         MOVWF   POSTDEC1
02B8 5000      00884         MOVF    r0x0b, W
02BA 6EE5      00885         MOVWF   POSTDEC1
02BC 5000      00886         MOVF    r0x0a, W
02BE 6EE5      00887         MOVWF   POSTDEC1
02C0 EC00 F000 00888         CALL    _memcpy
02C4 0E08      00889         MOVLW   0x08
02C6 26E1      00890         ADDWF   FSR1L, F
               00891 ;       .line   1059; TCPIP_Stack/UDP.c p->remotePort = h->SourcePort;
02C8 0E0A      00892         MOVLW   0x0a
02CA 2600      00893         ADDWF   r0x0a, F
02CC 0E00      00894         MOVLW   0x00
02CE 2200      00895         ADDWFC  r0x0b, F
02D0 0E00      00896         MOVLW   0x00
02D2 2200      00897         ADDWFC  r0x0c, F
02D4 C000 FFE9 00898         MOVFF   r0x00, FSR0L
02D8 C000 FFF3 00899         MOVFF   r0x01, PRODL
02DC 5000      00900         MOVF    r0x02, W
02DE EC00 F000 00901         CALL    __gptrget2
02E2 6E00      00902         MOVWF   r0x00
02E4 CFF3 F000 00903         MOVFF   PRODL, r0x01
02E8 C000 FFE5 00904         MOVFF   r0x00, POSTDEC1
02EC C000 FFF4 00905         MOVFF   r0x01, PRODH
02F0 C000 FFE9 00906         MOVFF   r0x0a, FSR0L
02F4 C000 FFF3 00907         MOVFF   r0x0b, PRODL
02F8 5000      00908         MOVF    r0x0c, W
02FA EC00 F000 00909         CALL    __gptrput2
02FE 00910 _00305_DS_:
               00911 ;       .line   1061; TCPIP_Stack/UDP.c return partialMatch;
02FE 5000      00912         MOVF    r0x09, W
0300 00913 _00310_DS_:
0300 CFE4 F000 00914         MOVFF   PREINC1, r0x1b
0304 CFE4 F000 00915         MOVFF   PREINC1, r0x1a
0308 CFE4 F000 00916         MOVFF   PREINC1, r0x19
030C CFE4 F000 00917         MOVFF   PREINC1, r0x18
0310 CFE4 F000 00918         MOVFF   PREINC1, r0x17
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0314 CFE4 F000 00919         MOVFF   PREINC1, r0x16
0318 CFE4 F000 00920         MOVFF   PREINC1, r0x15
031C CFE4 F000 00921         MOVFF   PREINC1, r0x14
0320 CFE4 F000 00922         MOVFF   PREINC1, r0x13
0324 CFE4 F000 00923         MOVFF   PREINC1, r0x12
0328 CFE4 F000 00924         MOVFF   PREINC1, r0x11
032C CFE4 F000 00925         MOVFF   PREINC1, r0x10
0330 CFE4 F000 00926         MOVFF   PREINC1, r0x0f
0334 CFE4 F000 00927         MOVFF   PREINC1, r0x0e
0338 CFE4 F000 00928         MOVFF   PREINC1, r0x0d
033C CFE4 F000 00929         MOVFF   PREINC1, r0x0c
0340 CFE4 F000 00930         MOVFF   PREINC1, r0x0b
0344 CFE4 F000 00931         MOVFF   PREINC1, r0x0a
0348 CFE4 F000 00932         MOVFF   PREINC1, r0x09
034C CFE4 F000 00933         MOVFF   PREINC1, r0x08
0350 CFE4 F000 00934         MOVFF   PREINC1, r0x07
0354 CFE4 F000 00935         MOVFF   PREINC1, r0x06
0358 CFE4 F000 00936         MOVFF   PREINC1, r0x05
035C CFE4 F000 00937         MOVFF   PREINC1, r0x04
0360 CFE4 F000 00938         MOVFF   PREINC1, r0x03
0364 CFE4 F000 00939         MOVFF   PREINC1, r0x02
0368 CFE4 F000 00940         MOVFF   PREINC1, r0x01
036C CFE4 F000 00941         MOVFF   PREINC1, r0x00
0370 CFE4 FFD9 00942         MOVFF   PREINC1, FSR2L
0374 0012      00943         RETURN  
               00944 
               00945 ; ; Starting pCode block
               00946 S_UDP__UDPProcess       code
0000 00947 _UDPProcess:
               00948 ;       .line   929; TCPIP_Stack/UDP.c  BOOL UDPProcess(NODE_INFO *remoteNode, IP_ADDR *localIP, WORD len)
0000 CFD9 FFE5 00949         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 00950         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 00951         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 00952         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 00953         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 00954         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 00955         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 00956         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 00957         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 00958         MOVFF   r0x07, POSTDEC1
0028 C000 FFE5 00959         MOVFF   r0x08, POSTDEC1
002C C000 FFE5 00960         MOVFF   r0x09, POSTDEC1
0030 C000 FFE5 00961         MOVFF   r0x0a, POSTDEC1
0034 C000 FFE5 00962         MOVFF   r0x0b, POSTDEC1
0038 0E02      00963         MOVLW   0x02
003A CFDB F000 00964         MOVFF   PLUSW2, r0x00
003E 0E03      00965         MOVLW   0x03
0040 CFDB F000 00966         MOVFF   PLUSW2, r0x01
0044 0E04      00967         MOVLW   0x04
0046 CFDB F000 00968         MOVFF   PLUSW2, r0x02
004A 0E05      00969         MOVLW   0x05
004C CFDB F000 00970         MOVFF   PLUSW2, r0x03
0050 0E06      00971         MOVLW   0x06
0052 CFDB F000 00972         MOVFF   PLUSW2, r0x04
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0056 0E07      00973         MOVLW   0x07
0058 CFDB F000 00974         MOVFF   PLUSW2, r0x05
005C 0E08      00975         MOVLW   0x08
005E CFDB F000 00976         MOVFF   PLUSW2, r0x06
0062 0E09      00977         MOVLW   0x09
0064 CFDB F000 00978         MOVFF   PLUSW2, r0x07
0068 0000      00979         BANKSEL _UDPRxCount
               00980 ;       .line   936; TCPIP_Stack/UDP.c  UDPRxCount = 0;
006A 6B00      00981         CLRF    _UDPRxCount, B
006C 0000      00982         BANKSEL (_UDPRxCount + 1)
006E 6B00      00983         CLRF    (_UDPRxCount + 1), B
               00984 ;       .line   939; TCPIP_Stack/UDP.c  MACGetArray((BYTE*)&h, sizeof(h));
0070 0E00      00985         MOVLW   HIGH(_UDPProcess_h_1_1)
0072 6E00      00986         MOVWF   r0x09
0074 0E00      00987         MOVLW   LOW(_UDPProcess_h_1_1)
0076 6E00      00988         MOVWF   r0x08
0078 0E80      00989         MOVLW   0x80
007A 6E00      00990         MOVWF   r0x0a
007C 0E00      00991         MOVLW   0x00
007E 6EE5      00992         MOVWF   POSTDEC1
0080 0E08      00993         MOVLW   0x08
0082 6EE5      00994         MOVWF   POSTDEC1
0084 5000      00995         MOVF    r0x0a, W
0086 6EE5      00996         MOVWF   POSTDEC1
0088 5000      00997         MOVF    r0x09, W
008A 6EE5      00998         MOVWF   POSTDEC1
008C 5000      00999         MOVF    r0x08, W
008E 6EE5      01000         MOVWF   POSTDEC1
0090 EC00 F000 01001         CALL    _MACGetArray
0094 0E05      01002         MOVLW   0x05
0096 26E1      01003         ADDWF   FSR1L, F
0098 0000      01004         BANKSEL (_UDPProcess_h_1_1 + 1)
               01005 ;       .line   941; TCPIP_Stack/UDP.c  h.SourcePort        = swaps(h.SourcePort);
009A 5100      01006         MOVF    (_UDPProcess_h_1_1 + 1), W, B
009C 6EE5      01007         MOVWF   POSTDEC1
009E 0000      01008         BANKSEL _UDPProcess_h_1_1
00A0 5100      01009         MOVF    _UDPProcess_h_1_1, W, B
00A2 6EE5      01010         MOVWF   POSTDEC1
00A4 EC00 F000 01011         CALL    _swaps
00A8 6E00      01012         MOVWF   r0x08
00AA CFF3 F000 01013         MOVFF   PRODL, r0x09
00AE 0E02      01014         MOVLW   0x02
00B0 26E1      01015         ADDWF   FSR1L, F
00B2 5000      01016         MOVF    r0x08, W
00B4 0000      01017         BANKSEL _UDPProcess_h_1_1
00B6 6F00      01018         MOVWF   _UDPProcess_h_1_1, B
00B8 5000      01019         MOVF    r0x09, W
00BA 0000      01020         BANKSEL (_UDPProcess_h_1_1 + 1)
00BC 6F00      01021         MOVWF   (_UDPProcess_h_1_1 + 1), B
00BE 0000      01022         BANKSEL (_UDPProcess_h_1_1 + 3)
               01023 ;       .line   942; TCPIP_Stack/UDP.c  h.DestinationPort   = swaps(h.DestinationPort);
00C0 5100      01024         MOVF    (_UDPProcess_h_1_1 + 3), W, B
00C2 6EE5      01025         MOVWF   POSTDEC1
00C4 0000      01026         BANKSEL (_UDPProcess_h_1_1 + 2)
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00C6 5100      01027         MOVF    (_UDPProcess_h_1_1 + 2), W, B
00C8 6EE5      01028         MOVWF   POSTDEC1
00CA EC00 F000 01029         CALL    _swaps
00CE 6E00      01030         MOVWF   r0x08
00D0 CFF3 F000 01031         MOVFF   PRODL, r0x09
00D4 0E02      01032         MOVLW   0x02
00D6 26E1      01033         ADDWF   FSR1L, F
00D8 5000      01034         MOVF    r0x08, W
00DA 0000      01035         BANKSEL (_UDPProcess_h_1_1 + 2)
00DC 6F00      01036         MOVWF   (_UDPProcess_h_1_1 + 2), B
00DE 5000      01037         MOVF    r0x09, W
00E0 0000      01038         BANKSEL (_UDPProcess_h_1_1 + 3)
00E2 6F00      01039         MOVWF   (_UDPProcess_h_1_1 + 3), B
00E4 0000      01040         BANKSEL (_UDPProcess_h_1_1 + 5)
               01041 ;       .line   943; TCPIP_Stack/UDP.c  h.Length            = swaps(h.Length) - sizeof(UDP_HEADER);
00E6 5100      01042         MOVF    (_UDPProcess_h_1_1 + 5), W, B
00E8 6EE5      01043         MOVWF   POSTDEC1
00EA 0000      01044         BANKSEL (_UDPProcess_h_1_1 + 4)
00EC 5100      01045         MOVF    (_UDPProcess_h_1_1 + 4), W, B
00EE 6EE5      01046         MOVWF   POSTDEC1
00F0 EC00 F000 01047         CALL    _swaps
00F4 6E00      01048         MOVWF   r0x08
00F6 CFF3 F000 01049         MOVFF   PRODL, r0x09
00FA 0E02      01050         MOVLW   0x02
00FC 26E1      01051         ADDWF   FSR1L, F
00FE 0EF8      01052         MOVLW   0xf8
0100 2600      01053         ADDWF   r0x08, F
0102 A0D8      01054         BTFSS   STATUS, 0
0104 0600      01055         DECF    r0x09, F
0106 5000      01056         MOVF    r0x08, W
0108 0000      01057         BANKSEL (_UDPProcess_h_1_1 + 4)
010A 6F00      01058         MOVWF   (_UDPProcess_h_1_1 + 4), B
010C 5000      01059         MOVF    r0x09, W
010E 0000      01060         BANKSEL (_UDPProcess_h_1_1 + 5)
0110 6F00      01061         MOVWF   (_UDPProcess_h_1_1 + 5), B
0112 0000      01062         BANKSEL (_UDPProcess_h_1_1 + 6)
               01063 ;       .line   946; TCPIP_Stack/UDP.c  if(h.Checksum)
0114 5100      01064         MOVF    (_UDPProcess_h_1_1 + 6), W, B
0116 0000      01065         BANKSEL (_UDPProcess_h_1_1 + 7)
0118 1100      01066         IORWF   (_UDPProcess_h_1_1 + 7), W, B
011A B4D8      01067         BTFSC   STATUS, 2
011C D000      01068         BRA     _00279_DS_
               01069 ;       .line   949; TCPIP_Stack/UDP.c  pseudoHeader.SourceAddress.Val  = remoteNode->IPAddr.Val;
011E C000 FFE9 01070         MOVFF   r0x00, FSR0L
0122 C000 FFF3 01071         MOVFF   r0x01, PRODL
0126 5000      01072         MOVF    r0x02, W
0128 EC00 F000 01073         CALL    __gptrget4
012C 6E00      01074         MOVWF   r0x08
012E CFF3 F000 01075         MOVFF   PRODL, r0x09
0132 CFF4 F000 01076         MOVFF   PRODH, r0x0a
0136 CFE9 F000 01077         MOVFF   FSR0L, r0x0b
013A 5000      01078         MOVF    r0x08, W
013C 0000      01079         BANKSEL _UDPProcess_pseudoHeader_1_1
013E 6F00      01080         MOVWF   _UDPProcess_pseudoHeader_1_1, B
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0140 5000      01081         MOVF    r0x09, W
0142 0000      01082         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 1)
0144 6F00      01083         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 1), B
0146 5000      01084         MOVF    r0x0a, W
0148 0000      01085         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 2)
014A 6F00      01086         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 2), B
014C 5000      01087         MOVF    r0x0b, W
014E 0000      01088         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 3)
0150 6F00      01089         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 3), B
               01090 ;       .line   950; TCPIP_Stack/UDP.c  pseudoHeader.DestAddress.Val    = localIP->Val;
0152 C000 FFE9 01091         MOVFF   r0x03, FSR0L
0156 C000 FFF3 01092         MOVFF   r0x04, PRODL
015A 5000      01093         MOVF    r0x05, W
015C EC00 F000 01094         CALL    __gptrget4
0160 6E00      01095         MOVWF   r0x08
0162 CFF3 F000 01096         MOVFF   PRODL, r0x09
0166 CFF4 F000 01097         MOVFF   PRODH, r0x0a
016A CFE9 F000 01098         MOVFF   FSR0L, r0x0b
016E 5000      01099         MOVF    r0x08, W
0170 0000      01100         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 4)
0172 6F00      01101         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 4), B
0174 5000      01102         MOVF    r0x09, W
0176 0000      01103         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 5)
0178 6F00      01104         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 5), B
017A 5000      01105         MOVF    r0x0a, W
017C 0000      01106         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 6)
017E 6F00      01107         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 6), B
0180 5000      01108         MOVF    r0x0b, W
0182 0000      01109         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 7)
0184 6F00      01110         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 7), B
0186 0000      01111         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 8)
               01112 ;       .line   951; TCPIP_Stack/UDP.c  pseudoHeader.Zero               = 0x0;
0188 6B00      01113         CLRF    (_UDPProcess_pseudoHeader_1_1 + 8), B
               01114 ;       .line   952; TCPIP_Stack/UDP.c  pseudoHeader.Protocol           = IP_PROT_UDP;
018A 0E11      01115         MOVLW   0x11
018C 0000      01116         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 9)
018E 6F00      01117         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 9), B
               01118 ;       .line   953; TCPIP_Stack/UDP.c  pseudoHeader.Length             = len;
0190 5000      01119         MOVF    r0x06, W
0192 0000      01120         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 10)
0194 6F00      01121         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 10), B
0196 5000      01122         MOVF    r0x07, W
0198 0000      01123         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 11)
019A 6F00      01124         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 11), B
               01125 ;       .line   955; TCPIP_Stack/UDP.c  SwapPseudoHeader(pseudoHeader);
019C 5000      01126         MOVF    r0x07, W
019E 6EE5      01127         MOVWF   POSTDEC1
01A0 5000      01128         MOVF    r0x06, W
01A2 6EE5      01129         MOVWF   POSTDEC1
01A4 EC00 F000 01130         CALL    _swaps
01A8 6E00      01131         MOVWF   r0x08
01AA CFF3 F000 01132         MOVFF   PRODL, r0x09
01AE 0E02      01133         MOVLW   0x02
01B0 26E1      01134         ADDWF   FSR1L, F
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
01B2 5000      01135         MOVF    r0x08, W
01B4 0000      01136         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 10)
01B6 6F00      01137         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 10), B
01B8 5000      01138         MOVF    r0x09, W
01BA 0000      01139         BANKSEL (_UDPProcess_pseudoHeader_1_1 + 11)
01BC 6F00      01140         MOVWF   (_UDPProcess_pseudoHeader_1_1 + 11), B
               01141 ;       .line   957; TCPIP_Stack/UDP.c  checksums.w[0] = ~CalcIPChecksum((BYTE*)&pseudoHeader,
01BE 0E00      01142         MOVLW   HIGH(_UDPProcess_pseudoHeader_1_1)
01C0 6E00      01143         MOVWF   r0x09
01C2 0E00      01144         MOVLW   LOW(_UDPProcess_pseudoHeader_1_1)
01C4 6E00      01145         MOVWF   r0x08
01C6 0E80      01146         MOVLW   0x80
01C8 6E00      01147         MOVWF   r0x0a
               01148 ;       .line   958; TCPIP_Stack/UDP.c  sizeof(pseudoHeader));
01CA 0E00      01149         MOVLW   0x00
01CC 6EE5      01150         MOVWF   POSTDEC1
01CE 0E0C      01151         MOVLW   0x0c
01D0 6EE5      01152         MOVWF   POSTDEC1
01D2 5000      01153         MOVF    r0x0a, W
01D4 6EE5      01154         MOVWF   POSTDEC1
01D6 5000      01155         MOVF    r0x09, W
01D8 6EE5      01156         MOVWF   POSTDEC1
01DA 5000      01157         MOVF    r0x08, W
01DC 6EE5      01158         MOVWF   POSTDEC1
01DE EC00 F000 01159         CALL    _CalcIPChecksum
01E2 6E00      01160         MOVWF   r0x08
01E4 CFF3 F000 01161         MOVFF   PRODL, r0x09
01E8 0E05      01162         MOVLW   0x05
01EA 26E1      01163         ADDWF   FSR1L, F
01EC 1E00      01164         COMF    r0x08, F
01EE 1E00      01165         COMF    r0x09, F
01F0 5000      01166         MOVF    r0x08, W
01F2 0000      01167         BANKSEL _UDPProcess_checksums_1_1
01F4 6F00      01168         MOVWF   _UDPProcess_checksums_1_1, B
01F6 5000      01169         MOVF    r0x09, W
01F8 0000      01170         BANKSEL (_UDPProcess_checksums_1_1 + 1)
01FA 6F00      01171         MOVWF   (_UDPProcess_checksums_1_1 + 1), B
               01172 ;       .line   963; TCPIP_Stack/UDP.c  IPSetRxBuffer(0);
01FC 0E00      01173         MOVLW   0x00
01FE 6EE5      01174         MOVWF   POSTDEC1
0200 0E00      01175         MOVLW   0x00
0202 6EE5      01176         MOVWF   POSTDEC1
0204 EC00 F000 01177         CALL    _IPSetRxBuffer
0208 0E02      01178         MOVLW   0x02
020A 26E1      01179         ADDWF   FSR1L, F
               01180 ;       .line   964; TCPIP_Stack/UDP.c  checksums.w[1] = CalcIPBufferChecksum(len);
020C 5000      01181         MOVF    r0x07, W
020E 6EE5      01182         MOVWF   POSTDEC1
0210 5000      01183         MOVF    r0x06, W
0212 6EE5      01184         MOVWF   POSTDEC1
0214 EC00 F000 01185         CALL    _CalcIPBufferChecksum
0218 6E00      01186         MOVWF   r0x06
021A CFF3 F000 01187         MOVFF   PRODL, r0x07
021E 0E02      01188         MOVLW   0x02
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0220 26E1      01189         ADDWF   FSR1L, F
0222 5000      01190         MOVF    r0x06, W
0224 0000      01191         BANKSEL (_UDPProcess_checksums_1_1 + 2)
0226 6F00      01192         MOVWF   (_UDPProcess_checksums_1_1 + 2), B
0228 5000      01193         MOVF    r0x07, W
022A 0000      01194         BANKSEL (_UDPProcess_checksums_1_1 + 3)
022C 6F00      01195         MOVWF   (_UDPProcess_checksums_1_1 + 3), B
022E 0000      01196         BANKSEL _UDPProcess_checksums_1_1
               01197 ;       .line   966; TCPIP_Stack/UDP.c  if(checksums.w[0] != checksums.w[1])
0230 5100      01198         MOVF    _UDPProcess_checksums_1_1, W, B
0232 0000      01199         BANKSEL (_UDPProcess_checksums_1_1 + 2)
0234 1900      01200         XORWF   (_UDPProcess_checksums_1_1 + 2), W, B
0236 E100      01201         BNZ     _00289_DS_
0238 0000      01202         BANKSEL (_UDPProcess_checksums_1_1 + 1)
023A 5100      01203         MOVF    (_UDPProcess_checksums_1_1 + 1), W, B
023C 0000      01204         BANKSEL (_UDPProcess_checksums_1_1 + 3)
023E 1900      01205         XORWF   (_UDPProcess_checksums_1_1 + 3), W, B
0240 E000      01206         BZ      _00279_DS_
0242 01207 _00289_DS_:
               01208 ;       .line   968; TCPIP_Stack/UDP.c  MACDiscardRx();
0242 EC00 F000 01209         CALL    _MACDiscardRx
               01210 ;       .line   969; TCPIP_Stack/UDP.c  return FALSE;
0246 6AE8      01211         CLRF    WREG
0248 D000      01212         BRA     _00283_DS_
024A 01213 _00279_DS_:
               01214 ;       .line   973; TCPIP_Stack/UDP.c  s = FindMatchingSocket(&h, remoteNode, localIP);
024A 0E00      01215         MOVLW   HIGH(_UDPProcess_h_1_1)
024C 6E00      01216         MOVWF   r0x07
024E 0E00      01217         MOVLW   LOW(_UDPProcess_h_1_1)
0250 6E00      01218         MOVWF   r0x06
0252 0E80      01219         MOVLW   0x80
0254 6E00      01220         MOVWF   r0x08
0256 5000      01221         MOVF    r0x05, W
0258 6EE5      01222         MOVWF   POSTDEC1
025A 5000      01223         MOVF    r0x04, W
025C 6EE5      01224         MOVWF   POSTDEC1
025E 5000      01225         MOVF    r0x03, W
0260 6EE5      01226         MOVWF   POSTDEC1
0262 5000      01227         MOVF    r0x02, W
0264 6EE5      01228         MOVWF   POSTDEC1
0266 5000      01229         MOVF    r0x01, W
0268 6EE5      01230         MOVWF   POSTDEC1
026A 5000      01231         MOVF    r0x00, W
026C 6EE5      01232         MOVWF   POSTDEC1
026E 5000      01233         MOVF    r0x08, W
0270 6EE5      01234         MOVWF   POSTDEC1
0272 5000      01235         MOVF    r0x07, W
0274 6EE5      01236         MOVWF   POSTDEC1
0276 5000      01237         MOVF    r0x06, W
0278 6EE5      01238         MOVWF   POSTDEC1
027A EC00 F000 01239         CALL    _FindMatchingSocket
027E 6E00      01240         MOVWF   r0x00
0280 0E09      01241         MOVLW   0x09
0282 26E1      01242         ADDWF   FSR1L, F
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               01243 ;       .line   974; TCPIP_Stack/UDP.c  if(s == INVALID_UDP_SOCKET)
0284 C000 F000 01244         MOVFF   r0x00, r0x01
0288 6A00      01245         CLRF    r0x02
028A 5000      01246         MOVF    r0x01, W
028C 0AFF      01247         XORLW   0xff
028E E100      01248         BNZ     _00290_DS_
0290 5000      01249         MOVF    r0x02, W
0292 E000      01250         BZ      _00291_DS_
0294 01251 _00290_DS_:
0294 D000      01252         BRA     _00281_DS_
0296 01253 _00291_DS_:
               01254 ;       .line   978; TCPIP_Stack/UDP.c  MACDiscardRx();
0296 EC00 F000 01255         CALL    _MACDiscardRx
               01256 ;       .line   979; TCPIP_Stack/UDP.c  return FALSE;
029A 6AE8      01257         CLRF    WREG
029C D000      01258         BRA     _00283_DS_
029E 01259 _00281_DS_:
               01260 ;       .line   983; TCPIP_Stack/UDP.c  SocketWithRxData = s;
029E C000 F000 01261         MOVFF   r0x00, _SocketWithRxData
               01262 ;       .line   984; TCPIP_Stack/UDP.c  UDPRxCount = h.Length;
02A2 C000 F000 01263         MOVFF   (_UDPProcess_h_1_1 + 4), _UDPRxCount
02A6 C000 F000 01264         MOVFF   (_UDPProcess_h_1_1 + 5), (_UDPRxCount + 1)
02AA 0000      01265         BANKSEL _Flags
               01266 ;       .line   985; TCPIP_Stack/UDP.c  Flags.bFirstRead = 1;
02AC 8100      01267         BSF     _Flags, 0, B
02AE 0000      01268         BANKSEL _Flags
               01269 ;       .line   986; TCPIP_Stack/UDP.c  Flags.bWasDiscarded = 0;
02B0 9300      01270         BCF     _Flags, 1, B
               01271 ;       .line   990; TCPIP_Stack/UDP.c  return TRUE;
02B2 0E01      01272         MOVLW   0x01
02B4 01273 _00283_DS_:
02B4 CFE4 F000 01274         MOVFF   PREINC1, r0x0b
02B8 CFE4 F000 01275         MOVFF   PREINC1, r0x0a
02BC CFE4 F000 01276         MOVFF   PREINC1, r0x09
02C0 CFE4 F000 01277         MOVFF   PREINC1, r0x08
02C4 CFE4 F000 01278         MOVFF   PREINC1, r0x07
02C8 CFE4 F000 01279         MOVFF   PREINC1, r0x06
02CC CFE4 F000 01280         MOVFF   PREINC1, r0x05
02D0 CFE4 F000 01281         MOVFF   PREINC1, r0x04
02D4 CFE4 F000 01282         MOVFF   PREINC1, r0x03
02D8 CFE4 F000 01283         MOVFF   PREINC1, r0x02
02DC CFE4 F000 01284         MOVFF   PREINC1, r0x01
02E0 CFE4 F000 01285         MOVFF   PREINC1, r0x00
02E4 CFE4 FFD9 01286         MOVFF   PREINC1, FSR2L
02E8 0012      01287         RETURN  
               01288 
               01289 ; ; Starting pCode block
               01290 S_UDP__UDPDiscard       code
0000 01291 _UDPDiscard:
               01292 ;       .line   886; TCPIP_Stack/UDP.c  void UDPDiscard(void)
0000 CFD9 FFE5 01293         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01294         MOVFF   FSR1L, FSR2L
0008 0000      01295         BANKSEL _Flags
               01296 ;       .line   888; TCPIP_Stack/UDP.c  if(!Flags.bWasDiscarded)
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
000A B300      01297         BTFSC   _Flags, 1, B
000C D000      01298         BRA     _00271_DS_
               01299 ;       .line   890; TCPIP_Stack/UDP.c  MACDiscardRx();
000E EC00 F000 01300         CALL    _MACDiscardRx
0012 0000      01301         BANKSEL _UDPRxCount
               01302 ;       .line   891; TCPIP_Stack/UDP.c  UDPRxCount = 0;
0014 6B00      01303         CLRF    _UDPRxCount, B
0016 0000      01304         BANKSEL (_UDPRxCount + 1)
0018 6B00      01305         CLRF    (_UDPRxCount + 1), B
               01306 ;       .line   892; TCPIP_Stack/UDP.c  SocketWithRxData = INVALID_UDP_SOCKET;
001A 0EFF      01307         MOVLW   0xff
001C 0000      01308         BANKSEL _SocketWithRxData
001E 6F00      01309         MOVWF   _SocketWithRxData, B
0020 0000      01310         BANKSEL _Flags
               01311 ;       .line   893; TCPIP_Stack/UDP.c  Flags.bWasDiscarded = 1;
0022 8300      01312         BSF     _Flags, 1, B
0024 01313 _00271_DS_:
0024 CFE4 FFD9 01314         MOVFF   PREINC1, FSR2L
0028 0012      01315         RETURN  
               01316 
               01317 ; ; Starting pCode block
               01318 S_UDP__UDPGetArray      code
0000 01319 _UDPGetArray:
               01320 ;       .line   843; TCPIP_Stack/UDP.c  WORD UDPGetArray(BYTE *cData, WORD wDataLen)
0000 CFD9 FFE5 01321         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01322         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01323         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01324         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01325         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01326         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 01327         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 01328         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 01329         MOVFF   r0x06, POSTDEC1
0024 0E02      01330         MOVLW   0x02
0026 CFDB F000 01331         MOVFF   PLUSW2, r0x00
002A 0E03      01332         MOVLW   0x03
002C CFDB F000 01333         MOVFF   PLUSW2, r0x01
0030 0E04      01334         MOVLW   0x04
0032 CFDB F000 01335         MOVFF   PLUSW2, r0x02
0036 0E05      01336         MOVLW   0x05
0038 CFDB F000 01337         MOVFF   PLUSW2, r0x03
003C 0E06      01338         MOVLW   0x06
003E CFDB F000 01339         MOVFF   PLUSW2, r0x04
0042 0000      01340         BANKSEL (_UDPRxCount + 1)
               01341 ;       .line   848; TCPIP_Stack/UDP.c  if((wGetOffset >= UDPRxCount) || (SocketWithRxData != activeUDPSocket))
0044 5100      01342         MOVF    (_UDPRxCount + 1), W, B
0046 0000      01343         BANKSEL (_wGetOffset + 1)
0048 5D00      01344         SUBWF   (_wGetOffset + 1), W, B
004A E100      01345         BNZ     _00261_DS_
004C 0000      01346         BANKSEL _UDPRxCount
004E 5100      01347         MOVF    _UDPRxCount, W, B
0050 0000      01348         BANKSEL _wGetOffset
0052 5D00      01349         SUBWF   _wGetOffset, W, B
0054 01350 _00261_DS_:
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0054 E200      01351         BC      _00252_DS_
0056 0000      01352         BANKSEL _SocketWithRxData
0058 5100      01353         MOVF    _SocketWithRxData, W, B
005A 0000      01354         BANKSEL _activeUDPSocket
005C 1900      01355         XORWF   _activeUDPSocket, W, B
005E E000      01356         BZ      _00253_DS_
0060 01357 _00252_DS_:
               01358 ;       .line   849; TCPIP_Stack/UDP.c  return 0;
0060 6AF3      01359         CLRF    PRODL
0062 6AE8      01360         CLRF    WREG
0064 D000      01361         BRA     _00257_DS_
0066 01362 _00253_DS_:
0066 0000      01363         BANKSEL _wGetOffset
               01364 ;       .line   852; TCPIP_Stack/UDP.c  wBytesAvailable = UDPRxCount - wGetOffset;
0068 5100      01365         MOVF    _wGetOffset, W, B
006A 0000      01366         BANKSEL _UDPRxCount
006C 5D00      01367         SUBWF   _UDPRxCount, W, B
006E 6E00      01368         MOVWF   r0x05
0070 0000      01369         BANKSEL (_wGetOffset + 1)
0072 5100      01370         MOVF    (_wGetOffset + 1), W, B
0074 0000      01371         BANKSEL (_UDPRxCount + 1)
0076 5900      01372         SUBWFB  (_UDPRxCount + 1), W, B
0078 6E00      01373         MOVWF   r0x06
               01374 ;       .line   853; TCPIP_Stack/UDP.c  if(wBytesAvailable < wDataLen) wDataLen = wBytesAvailable;
007A 5000      01375         MOVF    r0x04, W
007C 5C00      01376         SUBWF   r0x06, W
007E E100      01377         BNZ     _00264_DS_
0080 5000      01378         MOVF    r0x03, W
0082 5C00      01379         SUBWF   r0x05, W
0084 01380 _00264_DS_:
0084 E200      01381         BC      _00256_DS_
0086 C000 F000 01382         MOVFF   r0x05, r0x03
008A C000 F000 01383         MOVFF   r0x06, r0x04
008E 01384 _00256_DS_:
               01385 ;       .line   855; TCPIP_Stack/UDP.c  wDataLen = MACGetArray(cData, wDataLen);
008E 5000      01386         MOVF    r0x04, W
0090 6EE5      01387         MOVWF   POSTDEC1
0092 5000      01388         MOVF    r0x03, W
0094 6EE5      01389         MOVWF   POSTDEC1
0096 5000      01390         MOVF    r0x02, W
0098 6EE5      01391         MOVWF   POSTDEC1
009A 5000      01392         MOVF    r0x01, W
009C 6EE5      01393         MOVWF   POSTDEC1
009E 5000      01394         MOVF    r0x00, W
00A0 6EE5      01395         MOVWF   POSTDEC1
00A2 EC00 F000 01396         CALL    _MACGetArray
00A6 6E00      01397         MOVWF   r0x03
00A8 CFF3 F000 01398         MOVFF   PRODL, r0x04
00AC 0E05      01399         MOVLW   0x05
00AE 26E1      01400         ADDWF   FSR1L, F
               01401 ;       .line   856; TCPIP_Stack/UDP.c  wGetOffset += wDataLen;
00B0 5000      01402         MOVF    r0x03, W
00B2 0000      01403         BANKSEL _wGetOffset
00B4 2700      01404         ADDWF   _wGetOffset, F, B
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00B6 5000      01405         MOVF    r0x04, W
00B8 0000      01406         BANKSEL (_wGetOffset + 1)
00BA 2300      01407         ADDWFC  (_wGetOffset + 1), F, B
               01408 ;       .line   858; TCPIP_Stack/UDP.c  return wDataLen;
00BC C000 FFF3 01409         MOVFF   r0x04, PRODL
00C0 5000      01410         MOVF    r0x03, W
00C2 01411 _00257_DS_:
00C2 CFE4 F000 01412         MOVFF   PREINC1, r0x06
00C6 CFE4 F000 01413         MOVFF   PREINC1, r0x05
00CA CFE4 F000 01414         MOVFF   PREINC1, r0x04
00CE CFE4 F000 01415         MOVFF   PREINC1, r0x03
00D2 CFE4 F000 01416         MOVFF   PREINC1, r0x02
00D6 CFE4 F000 01417         MOVFF   PREINC1, r0x01
00DA CFE4 F000 01418         MOVFF   PREINC1, r0x00
00DE CFE4 FFD9 01419         MOVFF   PREINC1, FSR2L
00E2 0012      01420         RETURN  
               01421 
               01422 ; ; Starting pCode block
               01423 S_UDP__UDPGet   code
0000 01424 _UDPGet:
               01425 ;       .line   805; TCPIP_Stack/UDP.c  BOOL UDPGet(BYTE *v)
0000 CFD9 FFE5 01426         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01427         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01428         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01429         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01430         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01431         MOVFF   r0x03, POSTDEC1
0018 0E02      01432         MOVLW   0x02
001A CFDB F000 01433         MOVFF   PLUSW2, r0x00
001E 0E03      01434         MOVLW   0x03
0020 CFDB F000 01435         MOVFF   PLUSW2, r0x01
0024 0E04      01436         MOVLW   0x04
0026 CFDB F000 01437         MOVFF   PLUSW2, r0x02
002A 0000      01438         BANKSEL (_UDPRxCount + 1)
               01439 ;       .line   808; TCPIP_Stack/UDP.c  if((wGetOffset >= UDPRxCount) || (SocketWithRxData != activeUDPSocket))
002C 5100      01440         MOVF    (_UDPRxCount + 1), W, B
002E 0000      01441         BANKSEL (_wGetOffset + 1)
0030 5D00      01442         SUBWF   (_wGetOffset + 1), W, B
0032 E100      01443         BNZ     _00245_DS_
0034 0000      01444         BANKSEL _UDPRxCount
0036 5100      01445         MOVF    _UDPRxCount, W, B
0038 0000      01446         BANKSEL _wGetOffset
003A 5D00      01447         SUBWF   _wGetOffset, W, B
003C 01448 _00245_DS_:
003C E200      01449         BC      _00239_DS_
003E 0000      01450         BANKSEL _SocketWithRxData
0040 5100      01451         MOVF    _SocketWithRxData, W, B
0042 0000      01452         BANKSEL _activeUDPSocket
0044 1900      01453         XORWF   _activeUDPSocket, W, B
0046 E000      01454         BZ      _00240_DS_
0048 01455 _00239_DS_:
               01456 ;       .line   809; TCPIP_Stack/UDP.c  return FALSE;
0048 6AE8      01457         CLRF    WREG
004A D000      01458         BRA     _00242_DS_
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
004C 01459 _00240_DS_:
               01460 ;       .line   811; TCPIP_Stack/UDP.c  *v = MACGet();
004C EC00 F000 01461         CALL    _MACGet
0050 6E00      01462         MOVWF   r0x03
0052 C000 FFE5 01463         MOVFF   r0x03, POSTDEC1
0056 C000 FFE9 01464         MOVFF   r0x00, FSR0L
005A C000 FFF3 01465         MOVFF   r0x01, PRODL
005E 5000      01466         MOVF    r0x02, W
0060 EC00 F000 01467         CALL    __gptrput1
0064 0000      01468         BANKSEL _wGetOffset
               01469 ;       .line   812; TCPIP_Stack/UDP.c  wGetOffset++;
0066 2B00      01470         INCF    _wGetOffset, F, B
0068 E300      01471         BNC     _10296_DS_
006A 0000      01472         BANKSEL (_wGetOffset + 1)
006C 2B00      01473         INCF    (_wGetOffset + 1), F, B
006E 01474 _10296_DS_:
               01475 ;       .line   814; TCPIP_Stack/UDP.c  return TRUE;
006E 0E01      01476         MOVLW   0x01
0070 01477 _00242_DS_:
0070 CFE4 F000 01478         MOVFF   PREINC1, r0x03
0074 CFE4 F000 01479         MOVFF   PREINC1, r0x02
0078 CFE4 F000 01480         MOVFF   PREINC1, r0x01
007C CFE4 F000 01481         MOVFF   PREINC1, r0x00
0080 CFE4 FFD9 01482         MOVFF   PREINC1, FSR2L
0084 0012      01483         RETURN  
               01484 
               01485 ; ; Starting pCode block
               01486 S_UDP__UDPIsGetReady    code
0000 01487 _UDPIsGetReady:
               01488 ;       .line   766; TCPIP_Stack/UDP.c  WORD UDPIsGetReady(UDP_SOCKET s)
0000 CFD9 FFE5 01489         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01490         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01491         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01492         MOVFF   r0x01, POSTDEC1
0010 0E02      01493         MOVLW   0x02
0012 CFDB F000 01494         MOVFF   PLUSW2, r0x00
               01495 ;       .line   768; TCPIP_Stack/UDP.c  activeUDPSocket = s;
0016 C000 F000 01496         MOVFF   r0x00, _activeUDPSocket
001A 0000      01497         BANKSEL _SocketWithRxData
               01498 ;       .line   769; TCPIP_Stack/UDP.c  if(SocketWithRxData != s) return 0;
001C 5100      01499         MOVF    _SocketWithRxData, W, B
001E 1800      01500         XORWF   r0x00, W
0020 E000      01501         BZ      _00226_DS_
0022 6AF3      01502         CLRF    PRODL
0024 6AE8      01503         CLRF    WREG
0026 D000      01504         BRA     _00229_DS_
0028 01505 _00226_DS_:
0028 0000      01506         BANKSEL _Flags
               01507 ;       .line   773; TCPIP_Stack/UDP.c  if(Flags.bFirstRead)
002A A100      01508         BTFSS   _Flags, 0, B
002C D000      01509         BRA     _00228_DS_
002E 0000      01510         BANKSEL _Flags
               01511 ;       .line   775; TCPIP_Stack/UDP.c  Flags.bFirstRead = 0;
0030 9100      01512         BCF     _Flags, 0, B
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               01513 ;       .line   776; TCPIP_Stack/UDP.c  UDPSetRxBuffer(0);
0032 0E00      01514         MOVLW   0x00
0034 6EE5      01515         MOVWF   POSTDEC1
0036 0E00      01516         MOVLW   0x00
0038 6EE5      01517         MOVWF   POSTDEC1
003A EC00 F000 01518         CALL    _UDPSetRxBuffer
003E 0E02      01519         MOVLW   0x02
0040 26E1      01520         ADDWF   FSR1L, F
0042 01521 _00228_DS_:
0042 0000      01522         BANKSEL _wGetOffset
               01523 ;       .line   779; TCPIP_Stack/UDP.c  return UDPRxCount - wGetOffset;
0044 5100      01524         MOVF    _wGetOffset, W, B
0046 0000      01525         BANKSEL _UDPRxCount
0048 5D00      01526         SUBWF   _UDPRxCount, W, B
004A 6E00      01527         MOVWF   r0x00
004C 0000      01528         BANKSEL (_wGetOffset + 1)
004E 5100      01529         MOVF    (_wGetOffset + 1), W, B
0050 0000      01530         BANKSEL (_UDPRxCount + 1)
0052 5900      01531         SUBWFB  (_UDPRxCount + 1), W, B
0054 6E00      01532         MOVWF   r0x01
0056 C000 FFF3 01533         MOVFF   r0x01, PRODL
005A 5000      01534         MOVF    r0x00, W
005C 01535 _00229_DS_:
005C CFE4 F000 01536         MOVFF   PREINC1, r0x01
0060 CFE4 F000 01537         MOVFF   PREINC1, r0x00
0064 CFE4 FFD9 01538         MOVFF   PREINC1, FSR2L
0068 0012      01539         RETURN  
               01540 
               01541 ; ; Starting pCode block
               01542 S_UDP__UDPFlush code
0000 01543 _UDPFlush:
               01544 ;       .line   671; TCPIP_Stack/UDP.c  void UDPFlush(void)
0000 CFD9 FFE5 01545         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01546         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01547         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01548         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01549         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01550         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 01551         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 01552         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 01553         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 01554         MOVFF   r0x07, POSTDEC1
0028 C000 FFE5 01555         MOVFF   r0x08, POSTDEC1
               01556 ; ;multiply lit val:0x0e by variable _activeUDPSocket and store in r0x00
               01557 ; ;Unrolled 8 X 8 multiplication
               01558 ; ;FIXME: the function does not support result==WREG
002C 0000      01559         BANKSEL _activeUDPSocket
               01560 ;       .line   679; TCPIP_Stack/UDP.c  p = &UDPSocketInfo[activeUDPSocket];
002E 5100      01561         MOVF    _activeUDPSocket, W, B
0030 0D0E      01562         MULLW   0x0e
0032 CFF3 F000 01563         MOVFF   PRODL, r0x00
0036 6A00      01564         CLRF    r0x01
0038 0E00      01565         MOVLW   LOW(_UDPSocketInfo)
003A 2600      01566         ADDWF   r0x00, F
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
003C 0E00      01567         MOVLW   HIGH(_UDPSocketInfo)
003E 2200      01568         ADDWFC  r0x01, F
0040 5000      01569         MOVF    r0x01, W
0042 6E00      01570         MOVWF   r0x01
0044 5000      01571         MOVF    r0x00, W
0046 6E00      01572         MOVWF   r0x00
0048 0E80      01573         MOVLW   0x80
004A 6E00      01574         MOVWF   r0x02
004C 0000      01575         BANKSEL _UDPTxCount
               01576 ;       .line   681; TCPIP_Stack/UDP.c  wUDPLength = UDPTxCount + sizeof(UDP_HEADER);
004E 5100      01577         MOVF    _UDPTxCount, W, B
0050 0F08      01578         ADDLW   0x08
0052 6E00      01579         MOVWF   r0x03
0054 0E00      01580         MOVLW   0x00
0056 0000      01581         BANKSEL (_UDPTxCount + 1)
0058 2100      01582         ADDWFC  (_UDPTxCount + 1), W, B
005A 6E00      01583         MOVWF   r0x04
               01584 ;       .line   684; TCPIP_Stack/UDP.c  h.SourcePort = swaps(p->localPort);
005C 5000      01585         MOVF    r0x00, W
005E 0F0C      01586         ADDLW   0x0c
0060 6E00      01587         MOVWF   r0x05
0062 0E00      01588         MOVLW   0x00
0064 2000      01589         ADDWFC  r0x01, W
0066 6E00      01590         MOVWF   r0x06
0068 0E00      01591         MOVLW   0x00
006A 2000      01592         ADDWFC  r0x02, W
006C 6E00      01593         MOVWF   r0x07
006E C000 FFE9 01594         MOVFF   r0x05, FSR0L
0072 C000 FFF3 01595         MOVFF   r0x06, PRODL
0076 5000      01596         MOVF    r0x07, W
0078 EC00 F000 01597         CALL    __gptrget2
007C 6E00      01598         MOVWF   r0x05
007E CFF3 F000 01599         MOVFF   PRODL, r0x06
0082 5000      01600         MOVF    r0x06, W
0084 6EE5      01601         MOVWF   POSTDEC1
0086 5000      01602         MOVF    r0x05, W
0088 6EE5      01603         MOVWF   POSTDEC1
008A EC00 F000 01604         CALL    _swaps
008E 6E00      01605         MOVWF   r0x05
0090 CFF3 F000 01606         MOVFF   PRODL, r0x06
0094 0E02      01607         MOVLW   0x02
0096 26E1      01608         ADDWF   FSR1L, F
0098 5000      01609         MOVF    r0x05, W
009A 0000      01610         BANKSEL _UDPFlush_h_1_1
009C 6F00      01611         MOVWF   _UDPFlush_h_1_1, B
009E 5000      01612         MOVF    r0x06, W
00A0 0000      01613         BANKSEL (_UDPFlush_h_1_1 + 1)
00A2 6F00      01614         MOVWF   (_UDPFlush_h_1_1 + 1), B
               01615 ;       .line   685; TCPIP_Stack/UDP.c  h.DestinationPort = swaps(p->remotePort);
00A4 5000      01616         MOVF    r0x00, W
00A6 0F0A      01617         ADDLW   0x0a
00A8 6E00      01618         MOVWF   r0x05
00AA 0E00      01619         MOVLW   0x00
00AC 2000      01620         ADDWFC  r0x01, W
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00AE 6E00      01621         MOVWF   r0x06
00B0 0E00      01622         MOVLW   0x00
00B2 2000      01623         ADDWFC  r0x02, W
00B4 6E00      01624         MOVWF   r0x07
00B6 C000 FFE9 01625         MOVFF   r0x05, FSR0L
00BA C000 FFF3 01626         MOVFF   r0x06, PRODL
00BE 5000      01627         MOVF    r0x07, W
00C0 EC00 F000 01628         CALL    __gptrget2
00C4 6E00      01629         MOVWF   r0x05
00C6 CFF3 F000 01630         MOVFF   PRODL, r0x06
00CA 5000      01631         MOVF    r0x06, W
00CC 6EE5      01632         MOVWF   POSTDEC1
00CE 5000      01633         MOVF    r0x05, W
00D0 6EE5      01634         MOVWF   POSTDEC1
00D2 EC00 F000 01635         CALL    _swaps
00D6 6E00      01636         MOVWF   r0x05
00D8 CFF3 F000 01637         MOVFF   PRODL, r0x06
00DC 0E02      01638         MOVLW   0x02
00DE 26E1      01639         ADDWF   FSR1L, F
00E0 5000      01640         MOVF    r0x05, W
00E2 0000      01641         BANKSEL (_UDPFlush_h_1_1 + 2)
00E4 6F00      01642         MOVWF   (_UDPFlush_h_1_1 + 2), B
00E6 5000      01643         MOVF    r0x06, W
00E8 0000      01644         BANKSEL (_UDPFlush_h_1_1 + 3)
00EA 6F00      01645         MOVWF   (_UDPFlush_h_1_1 + 3), B
               01646 ;       .line   686; TCPIP_Stack/UDP.c  h.Length = swaps(wUDPLength);
00EC 5000      01647         MOVF    r0x04, W
00EE 6EE5      01648         MOVWF   POSTDEC1
00F0 5000      01649         MOVF    r0x03, W
00F2 6EE5      01650         MOVWF   POSTDEC1
00F4 EC00 F000 01651         CALL    _swaps
00F8 6E00      01652         MOVWF   r0x05
00FA CFF3 F000 01653         MOVFF   PRODL, r0x06
00FE 0E02      01654         MOVLW   0x02
0100 26E1      01655         ADDWF   FSR1L, F
0102 5000      01656         MOVF    r0x05, W
0104 0000      01657         BANKSEL (_UDPFlush_h_1_1 + 4)
0106 6F00      01658         MOVWF   (_UDPFlush_h_1_1 + 4), B
0108 5000      01659         MOVF    r0x06, W
010A 0000      01660         BANKSEL (_UDPFlush_h_1_1 + 5)
010C 6F00      01661         MOVWF   (_UDPFlush_h_1_1 + 5), B
010E 0000      01662         BANKSEL (_UDPFlush_h_1_1 + 6)
               01663 ;       .line   687; TCPIP_Stack/UDP.c  h.Checksum = 0x0000;
0110 6B00      01664         CLRF    (_UDPFlush_h_1_1 + 6), B
0112 0000      01665         BANKSEL (_UDPFlush_h_1_1 + 7)
0114 6B00      01666         CLRF    (_UDPFlush_h_1_1 + 7), B
0116 0000      01667         BANKSEL _AppConfig
               01668 ;       .line   695; TCPIP_Stack/UDP.c  pseudoHeader.SourceAddress.Val = AppConfig.MyIPAddr.Val;
0118 5100      01669         MOVF    _AppConfig, W, B
011A 0000      01670         BANKSEL _UDPFlush_pseudoHeader_2_2
011C 6F00      01671         MOVWF   _UDPFlush_pseudoHeader_2_2, B
011E 0000      01672         BANKSEL (_AppConfig + 1)
0120 5100      01673         MOVF    (_AppConfig + 1), W, B
0122 0000      01674         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 1)
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0124 6F00      01675         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 1), B
0126 0000      01676         BANKSEL (_AppConfig + 2)
0128 5100      01677         MOVF    (_AppConfig + 2), W, B
012A 0000      01678         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 2)
012C 6F00      01679         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 2), B
012E 0000      01680         BANKSEL (_AppConfig + 3)
0130 5100      01681         MOVF    (_AppConfig + 3), W, B
0132 0000      01682         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 3)
0134 6F00      01683         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 3), B
               01684 ;       .line   696; TCPIP_Stack/UDP.c  pseudoHeader.DestAddress.Val = p->remoteNode.IPAddr.Val;
0136 C000 FFE9 01685         MOVFF   r0x00, FSR0L
013A C000 FFF3 01686         MOVFF   r0x01, PRODL
013E 5000      01687         MOVF    r0x02, W
0140 EC00 F000 01688         CALL    __gptrget4
0144 6E00      01689         MOVWF   r0x05
0146 CFF3 F000 01690         MOVFF   PRODL, r0x06
014A CFF4 F000 01691         MOVFF   PRODH, r0x07
014E CFE9 F000 01692         MOVFF   FSR0L, r0x08
0152 5000      01693         MOVF    r0x05, W
0154 0000      01694         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 4)
0156 6F00      01695         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 4), B
0158 5000      01696         MOVF    r0x06, W
015A 0000      01697         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 5)
015C 6F00      01698         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 5), B
015E 5000      01699         MOVF    r0x07, W
0160 0000      01700         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 6)
0162 6F00      01701         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 6), B
0164 5000      01702         MOVF    r0x08, W
0166 0000      01703         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 7)
0168 6F00      01704         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 7), B
016A 0000      01705         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 8)
               01706 ;       .line   697; TCPIP_Stack/UDP.c  pseudoHeader.Zero = 0x0;
016C 6B00      01707         CLRF    (_UDPFlush_pseudoHeader_2_2 + 8), B
               01708 ;       .line   698; TCPIP_Stack/UDP.c  pseudoHeader.Protocol = IP_PROT_UDP;
016E 0E11      01709         MOVLW   0x11
0170 0000      01710         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 9)
0172 6F00      01711         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 9), B
               01712 ;       .line   699; TCPIP_Stack/UDP.c  pseudoHeader.Length = wUDPLength;
0174 5000      01713         MOVF    r0x03, W
0176 0000      01714         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 10)
0178 6F00      01715         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 10), B
017A 5000      01716         MOVF    r0x04, W
017C 0000      01717         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 11)
017E 6F00      01718         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 11), B
               01719 ;       .line   700; TCPIP_Stack/UDP.c  SwapPseudoHeader(pseudoHeader);
0180 5000      01720         MOVF    r0x04, W
0182 6EE5      01721         MOVWF   POSTDEC1
0184 5000      01722         MOVF    r0x03, W
0186 6EE5      01723         MOVWF   POSTDEC1
0188 EC00 F000 01724         CALL    _swaps
018C 6E00      01725         MOVWF   r0x05
018E CFF3 F000 01726         MOVFF   PRODL, r0x06
0192 0E02      01727         MOVLW   0x02
0194 26E1      01728         ADDWF   FSR1L, F
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0196 5000      01729         MOVF    r0x05, W
0198 0000      01730         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 10)
019A 6F00      01731         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 10), B
019C 5000      01732         MOVF    r0x06, W
019E 0000      01733         BANKSEL (_UDPFlush_pseudoHeader_2_2 + 11)
01A0 6F00      01734         MOVWF   (_UDPFlush_pseudoHeader_2_2 + 11), B
               01735 ;       .line   701; TCPIP_Stack/UDP.c  h.Checksum = ~CalcIPChecksum((BYTE*)&pseudoHeader, 
01A2 0E00      01736         MOVLW   HIGH(_UDPFlush_pseudoHeader_2_2)
01A4 6E00      01737         MOVWF   r0x06
01A6 0E00      01738         MOVLW   LOW(_UDPFlush_pseudoHeader_2_2)
01A8 6E00      01739         MOVWF   r0x05
01AA 0E80      01740         MOVLW   0x80
01AC 6E00      01741         MOVWF   r0x07
               01742 ;       .line   702; TCPIP_Stack/UDP.c  sizeof(pseudoHeader));
01AE 0E00      01743         MOVLW   0x00
01B0 6EE5      01744         MOVWF   POSTDEC1
01B2 0E0C      01745         MOVLW   0x0c
01B4 6EE5      01746         MOVWF   POSTDEC1
01B6 5000      01747         MOVF    r0x07, W
01B8 6EE5      01748         MOVWF   POSTDEC1
01BA 5000      01749         MOVF    r0x06, W
01BC 6EE5      01750         MOVWF   POSTDEC1
01BE 5000      01751         MOVF    r0x05, W
01C0 6EE5      01752         MOVWF   POSTDEC1
01C2 EC00 F000 01753         CALL    _CalcIPChecksum
01C6 6E00      01754         MOVWF   r0x05
01C8 CFF3 F000 01755         MOVFF   PRODL, r0x06
01CC 0E05      01756         MOVLW   0x05
01CE 26E1      01757         ADDWF   FSR1L, F
01D0 1E00      01758         COMF    r0x05, F
01D2 1E00      01759         COMF    r0x06, F
01D4 5000      01760         MOVF    r0x05, W
01D6 0000      01761         BANKSEL (_UDPFlush_h_1_1 + 6)
01D8 6F00      01762         MOVWF   (_UDPFlush_h_1_1 + 6), B
01DA 5000      01763         MOVF    r0x06, W
01DC 0000      01764         BANKSEL (_UDPFlush_h_1_1 + 7)
01DE 6F00      01765         MOVWF   (_UDPFlush_h_1_1 + 7), B
               01766 ;       .line   708; TCPIP_Stack/UDP.c  MACSetWritePtr(BASE_TX_ADDR + sizeof(ETHER_HEADER));
01E0 0E1A      01767         MOVLW   0x1a
01E2 6EE5      01768         MOVWF   POSTDEC1
01E4 0E19      01769         MOVLW   0x19
01E6 6EE5      01770         MOVWF   POSTDEC1
01E8 EC00 F000 01771         CALL    _MACSetWritePtr
01EC 0E02      01772         MOVLW   0x02
01EE 26E1      01773         ADDWF   FSR1L, F
               01774 ;       .line   711; TCPIP_Stack/UDP.c  IPPutHeader(&p->remoteNode, IP_PROT_UDP, wUDPLength);
01F0 5000      01775         MOVF    r0x04, W
01F2 6EE5      01776         MOVWF   POSTDEC1
01F4 5000      01777         MOVF    r0x03, W
01F6 6EE5      01778         MOVWF   POSTDEC1
01F8 0E11      01779         MOVLW   0x11
01FA 6EE5      01780         MOVWF   POSTDEC1
01FC 5000      01781         MOVF    r0x02, W
01FE 6EE5      01782         MOVWF   POSTDEC1
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0200 5000      01783         MOVF    r0x01, W
0202 6EE5      01784         MOVWF   POSTDEC1
0204 5000      01785         MOVF    r0x00, W
0206 6EE5      01786         MOVWF   POSTDEC1
0208 EC00 F000 01787         CALL    _IPPutHeader
020C 0E06      01788         MOVLW   0x06
020E 26E1      01789         ADDWF   FSR1L, F
               01790 ;       .line   714; TCPIP_Stack/UDP.c  MACPutArray((BYTE*)&h, sizeof(h));
0210 0E00      01791         MOVLW   HIGH(_UDPFlush_h_1_1)
0212 6E00      01792         MOVWF   r0x01
0214 0E00      01793         MOVLW   LOW(_UDPFlush_h_1_1)
0216 6E00      01794         MOVWF   r0x00
0218 0E80      01795         MOVLW   0x80
021A 6E00      01796         MOVWF   r0x02
021C 0E00      01797         MOVLW   0x00
021E 6EE5      01798         MOVWF   POSTDEC1
0220 0E08      01799         MOVLW   0x08
0222 6EE5      01800         MOVWF   POSTDEC1
0224 5000      01801         MOVF    r0x02, W
0226 6EE5      01802         MOVWF   POSTDEC1
0228 5000      01803         MOVF    r0x01, W
022A 6EE5      01804         MOVWF   POSTDEC1
022C 5000      01805         MOVF    r0x00, W
022E 6EE5      01806         MOVWF   POSTDEC1
0230 EC00 F000 01807         CALL    _MACPutArray
0234 0E05      01808         MOVLW   0x05
0236 26E1      01809         ADDWF   FSR1L, F
               01810 ;       .line   720; TCPIP_Stack/UDP.c  sizeof(IP_HEADER));
0238 0E1A      01811         MOVLW   0x1a
023A 6EE5      01812         MOVWF   POSTDEC1
023C 0E2D      01813         MOVLW   0x2d
023E 6EE5      01814         MOVWF   POSTDEC1
0240 EC00 F000 01815         CALL    _MACSetReadPtr
0244 6E00      01816         MOVWF   r0x00
0246 CFF3 F000 01817         MOVFF   PRODL, r0x01
024A 0E02      01818         MOVLW   0x02
024C 26E1      01819         ADDWF   FSR1L, F
               01820 ;       .line   721; TCPIP_Stack/UDP.c  wChecksum = CalcIPBufferChecksum(wUDPLength);
024E 5000      01821         MOVF    r0x04, W
0250 6EE5      01822         MOVWF   POSTDEC1
0252 5000      01823         MOVF    r0x03, W
0254 6EE5      01824         MOVWF   POSTDEC1
0256 EC00 F000 01825         CALL    _CalcIPBufferChecksum
025A 0000      01826         BANKSEL _UDPFlush_wChecksum_1_1
025C 6F00      01827         MOVWF   _UDPFlush_wChecksum_1_1, B
025E CFF3 F000 01828         MOVFF   PRODL, (_UDPFlush_wChecksum_1_1 + 1)
0262 0E02      01829         MOVLW   0x02
0264 26E1      01830         ADDWF   FSR1L, F
               01831 ;       .line   722; TCPIP_Stack/UDP.c  MACSetReadPtr(wReadPtrSave);
0266 5000      01832         MOVF    r0x01, W
0268 6EE5      01833         MOVWF   POSTDEC1
026A 5000      01834         MOVF    r0x00, W
026C 6EE5      01835         MOVWF   POSTDEC1
026E EC00 F000 01836         CALL    _MACSetReadPtr
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0272 0E02      01837         MOVLW   0x02
0274 26E1      01838         ADDWF   FSR1L, F
               01839 ;       .line   724; TCPIP_Stack/UDP.c  + 6);    // 6 is the offset to the Checksum field in UDP_HEADER
0276 0E1A      01840         MOVLW   0x1a
0278 6EE5      01841         MOVWF   POSTDEC1
027A 0E33      01842         MOVLW   0x33
027C 6EE5      01843         MOVWF   POSTDEC1
027E EC00 F000 01844         CALL    _MACSetWritePtr
0282 0E02      01845         MOVLW   0x02
0284 26E1      01846         ADDWF   FSR1L, F
               01847 ;       .line   725; TCPIP_Stack/UDP.c  MACPutArray((BYTE*)&wChecksum, sizeof(wChecksum));
0286 0E00      01848         MOVLW   HIGH(_UDPFlush_wChecksum_1_1)
0288 6E00      01849         MOVWF   r0x01
028A 0E00      01850         MOVLW   LOW(_UDPFlush_wChecksum_1_1)
028C 6E00      01851         MOVWF   r0x00
028E 0E80      01852         MOVLW   0x80
0290 6E00      01853         MOVWF   r0x02
0292 0E00      01854         MOVLW   0x00
0294 6EE5      01855         MOVWF   POSTDEC1
0296 0E02      01856         MOVLW   0x02
0298 6EE5      01857         MOVWF   POSTDEC1
029A 5000      01858         MOVF    r0x02, W
029C 6EE5      01859         MOVWF   POSTDEC1
029E 5000      01860         MOVF    r0x01, W
02A0 6EE5      01861         MOVWF   POSTDEC1
02A2 5000      01862         MOVF    r0x00, W
02A4 6EE5      01863         MOVWF   POSTDEC1
02A6 EC00 F000 01864         CALL    _MACPutArray
02AA 0E05      01865         MOVLW   0x05
02AC 26E1      01866         ADDWF   FSR1L, F
               01867 ;       .line   730; TCPIP_Stack/UDP.c  MACFlush();
02AE EC00 F000 01868         CALL    _MACFlush
02B2 0000      01869         BANKSEL _UDPTxCount
               01870 ;       .line   733; TCPIP_Stack/UDP.c  UDPTxCount = 0;
02B4 6B00      01871         CLRF    _UDPTxCount, B
02B6 0000      01872         BANKSEL (_UDPTxCount + 1)
02B8 6B00      01873         CLRF    (_UDPTxCount + 1), B
               01874 ;       .line   734; TCPIP_Stack/UDP.c  LastPutSocket = INVALID_UDP_SOCKET;
02BA 0EFF      01875         MOVLW   0xff
02BC 0000      01876         BANKSEL _LastPutSocket
02BE 6F00      01877         MOVWF   _LastPutSocket, B
02C0 CFE4 F000 01878         MOVFF   PREINC1, r0x08
02C4 CFE4 F000 01879         MOVFF   PREINC1, r0x07
02C8 CFE4 F000 01880         MOVFF   PREINC1, r0x06
02CC CFE4 F000 01881         MOVFF   PREINC1, r0x05
02D0 CFE4 F000 01882         MOVFF   PREINC1, r0x04
02D4 CFE4 F000 01883         MOVFF   PREINC1, r0x03
02D8 CFE4 F000 01884         MOVFF   PREINC1, r0x02
02DC CFE4 F000 01885         MOVFF   PREINC1, r0x01
02E0 CFE4 F000 01886         MOVFF   PREINC1, r0x00
02E4 CFE4 FFD9 01887         MOVFF   PREINC1, FSR2L
02E8 0012      01888         RETURN  
               01889 
               01890 ; ; Starting pCode block
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               01891 S_UDP__UDPPutString     code
0000 01892 _UDPPutString:
               01893 ;       .line   601; TCPIP_Stack/UDP.c  BYTE* UDPPutString(BYTE *strData)
0000 CFD9 FFE5 01894         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01895         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01896         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01897         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01898         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01899         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 01900         MOVFF   r0x04, POSTDEC1
001C 0E02      01901         MOVLW   0x02
001E CFDB F000 01902         MOVFF   PLUSW2, r0x00
0022 0E03      01903         MOVLW   0x03
0024 CFDB F000 01904         MOVFF   PLUSW2, r0x01
0028 0E04      01905         MOVLW   0x04
002A CFDB F000 01906         MOVFF   PLUSW2, r0x02
               01907 ;       .line   603; TCPIP_Stack/UDP.c  return strData + UDPPutArray(strData, strlen((char*)strData));
002E 5000      01908         MOVF    r0x02, W
0030 6EE5      01909         MOVWF   POSTDEC1
0032 5000      01910         MOVF    r0x01, W
0034 6EE5      01911         MOVWF   POSTDEC1
0036 5000      01912         MOVF    r0x00, W
0038 6EE5      01913         MOVWF   POSTDEC1
003A EC00 F000 01914         CALL    _strlen
003E 6E00      01915         MOVWF   r0x03
0040 CFF3 F000 01916         MOVFF   PRODL, r0x04
0044 0E03      01917         MOVLW   0x03
0046 26E1      01918         ADDWF   FSR1L, F
0048 5000      01919         MOVF    r0x04, W
004A 6EE5      01920         MOVWF   POSTDEC1
004C 5000      01921         MOVF    r0x03, W
004E 6EE5      01922         MOVWF   POSTDEC1
0050 5000      01923         MOVF    r0x02, W
0052 6EE5      01924         MOVWF   POSTDEC1
0054 5000      01925         MOVF    r0x01, W
0056 6EE5      01926         MOVWF   POSTDEC1
0058 5000      01927         MOVF    r0x00, W
005A 6EE5      01928         MOVWF   POSTDEC1
005C EC00 F000 01929         CALL    _UDPPutArray
0060 6E00      01930         MOVWF   r0x03
0062 CFF3 F000 01931         MOVFF   PRODL, r0x04
0066 0E05      01932         MOVLW   0x05
0068 26E1      01933         ADDWF   FSR1L, F
006A 5000      01934         MOVF    r0x03, W
006C 2600      01935         ADDWF   r0x00, F
006E 5000      01936         MOVF    r0x04, W
0070 2200      01937         ADDWFC  r0x01, F
0072 6AE8      01938         CLRF    WREG
0074 2200      01939         ADDWFC  r0x02, F
0076 C000 FFF4 01940         MOVFF   r0x02, PRODH
007A C000 FFF3 01941         MOVFF   r0x01, PRODL
007E 5000      01942         MOVF    r0x00, W
0080 CFE4 F000 01943         MOVFF   PREINC1, r0x04
0084 CFE4 F000 01944         MOVFF   PREINC1, r0x03
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0088 CFE4 F000 01945         MOVFF   PREINC1, r0x02
008C CFE4 F000 01946         MOVFF   PREINC1, r0x01
0090 CFE4 F000 01947         MOVFF   PREINC1, r0x00
0094 CFE4 FFD9 01948         MOVFF   PREINC1, FSR2L
0098 0012      01949         RETURN  
               01950 
               01951 ; ; Starting pCode block
               01952 S_UDP__UDPPutArray      code
0000 01953 _UDPPutArray:
               01954 ;       .line   514; TCPIP_Stack/UDP.c  WORD UDPPutArray(BYTE *cData, WORD wDataLen)
0000 CFD9 FFE5 01955         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 01956         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 01957         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 01958         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 01959         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 01960         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 01961         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 01962         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 01963         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 01964         MOVFF   r0x07, POSTDEC1
0028 C000 FFE5 01965         MOVFF   r0x08, POSTDEC1
002C 0E02      01966         MOVLW   0x02
002E CFDB F000 01967         MOVFF   PLUSW2, r0x00
0032 0E03      01968         MOVLW   0x03
0034 CFDB F000 01969         MOVFF   PLUSW2, r0x01
0038 0E04      01970         MOVLW   0x04
003A CFDB F000 01971         MOVFF   PLUSW2, r0x02
003E 0E05      01972         MOVLW   0x05
0040 CFDB F000 01973         MOVFF   PLUSW2, r0x03
0044 0E06      01974         MOVLW   0x06
0046 CFDB F000 01975         MOVFF   PLUSW2, r0x04
               01976 ;       .line   518; TCPIP_Stack/UDP.c  wTemp=(MAC_TX_BUFFER_SIZE-sizeof(IP_HEADER)-sizeof(UDP_HEADER))-wPutOffset;
004A C000 F000 01977         MOVFF   _wPutOffset, r0x05
004E C000 F000 01978         MOVFF   (_wPutOffset + 1), r0x06
0052 6A00      01979         CLRF    r0x07
0054 6A00      01980         CLRF    r0x08
0056 5000      01981         MOVF    r0x05, W
0058 08C0      01982         SUBLW   0xc0
005A 6E00      01983         MOVWF   r0x05
005C 0E05      01984         MOVLW   0x05
005E 5600      01985         SUBFWB  r0x06, F
0060 0E00      01986         MOVLW   0x00
0062 5600      01987         SUBFWB  r0x07, F
0064 0E00      01988         MOVLW   0x00
0066 5600      01989         SUBFWB  r0x08, F
               01990 ;       .line   519; TCPIP_Stack/UDP.c  if(wTemp < wDataLen) wDataLen = wTemp;
0068 5000      01991         MOVF    r0x04, W
006A 5C00      01992         SUBWF   r0x06, W
006C E100      01993         BNZ     _00209_DS_
006E 5000      01994         MOVF    r0x03, W
0070 5C00      01995         SUBWF   r0x05, W
0072 01996 _00209_DS_:
0072 E200      01997         BC      _00202_DS_
0074 C000 F000 01998         MOVFF   r0x05, r0x03
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0078 C000 F000 01999         MOVFF   r0x06, r0x04
007C 02000 _00202_DS_:
               02001 ;       .line   521; TCPIP_Stack/UDP.c  wPutOffset += wDataLen;
007C 5000      02002         MOVF    r0x03, W
007E 0000      02003         BANKSEL _wPutOffset
0080 2700      02004         ADDWF   _wPutOffset, F, B
0082 5000      02005         MOVF    r0x04, W
0084 0000      02006         BANKSEL (_wPutOffset + 1)
0086 2300      02007         ADDWFC  (_wPutOffset + 1), F, B
0088 0000      02008         BANKSEL (_wPutOffset + 1)
               02009 ;       .line   522; TCPIP_Stack/UDP.c  if(wPutOffset > UDPTxCount) UDPTxCount = wPutOffset;
008A 5100      02010         MOVF    (_wPutOffset + 1), W, B
008C 0000      02011         BANKSEL (_UDPTxCount + 1)
008E 5D00      02012         SUBWF   (_UDPTxCount + 1), W, B
0090 E100      02013         BNZ     _00210_DS_
0092 0000      02014         BANKSEL _wPutOffset
0094 5100      02015         MOVF    _wPutOffset, W, B
0096 0000      02016         BANKSEL _UDPTxCount
0098 5D00      02017         SUBWF   _UDPTxCount, W, B
009A 02018 _00210_DS_:
009A E200      02019         BC      _00204_DS_
009C C000 F000 02020         MOVFF   _wPutOffset, _UDPTxCount
00A0 C000 F000 02021         MOVFF   (_wPutOffset + 1), (_UDPTxCount + 1)
00A4 02022 _00204_DS_:
               02023 ;       .line   525; TCPIP_Stack/UDP.c  MACPutArray(cData, wDataLen);
00A4 5000      02024         MOVF    r0x04, W
00A6 6EE5      02025         MOVWF   POSTDEC1
00A8 5000      02026         MOVF    r0x03, W
00AA 6EE5      02027         MOVWF   POSTDEC1
00AC 5000      02028         MOVF    r0x02, W
00AE 6EE5      02029         MOVWF   POSTDEC1
00B0 5000      02030         MOVF    r0x01, W
00B2 6EE5      02031         MOVWF   POSTDEC1
00B4 5000      02032         MOVF    r0x00, W
00B6 6EE5      02033         MOVWF   POSTDEC1
00B8 EC00 F000 02034         CALL    _MACPutArray
00BC 0E05      02035         MOVLW   0x05
00BE 26E1      02036         ADDWF   FSR1L, F
               02037 ;       .line   527; TCPIP_Stack/UDP.c  return wDataLen;
00C0 C000 FFF3 02038         MOVFF   r0x04, PRODL
00C4 5000      02039         MOVF    r0x03, W
00C6 CFE4 F000 02040         MOVFF   PREINC1, r0x08
00CA CFE4 F000 02041         MOVFF   PREINC1, r0x07
00CE CFE4 F000 02042         MOVFF   PREINC1, r0x06
00D2 CFE4 F000 02043         MOVFF   PREINC1, r0x05
00D6 CFE4 F000 02044         MOVFF   PREINC1, r0x04
00DA CFE4 F000 02045         MOVFF   PREINC1, r0x03
00DE CFE4 F000 02046         MOVFF   PREINC1, r0x02
00E2 CFE4 F000 02047         MOVFF   PREINC1, r0x01
00E6 CFE4 F000 02048         MOVFF   PREINC1, r0x00
00EA CFE4 FFD9 02049         MOVFF   PREINC1, FSR2L
00EE 0012      02050         RETURN  
               02051 
               02052 ; ; Starting pCode block
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               02053 S_UDP__UDPPut   code
0000 02054 _UDPPut:
               02055 ;       .line   472; TCPIP_Stack/UDP.c  BOOL UDPPut(BYTE v)
0000 CFD9 FFE5 02056         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02057         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02058         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02059         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02060         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02061         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02062         MOVFF   r0x04, POSTDEC1
001C 0E02      02063         MOVLW   0x02
001E CFDB F000 02064         MOVFF   PLUSW2, r0x00
               02065 ;       .line   475; TCPIP_Stack/UDP.c  if(wPutOffset >= (MAC_TX_BUFFER_SIZE-sizeof(IP_HEADER)-sizeof(UDP_HEADER)))
0022 C000 F000 02066         MOVFF   _wPutOffset, r0x01
0026 C000 F000 02067         MOVFF   (_wPutOffset + 1), r0x02
002A 6A00      02068         CLRF    r0x03
002C 6A00      02069         CLRF    r0x04
002E 0E00      02070         MOVLW   0x00
0030 5C00      02071         SUBWF   r0x04, W
0032 E100      02072         BNZ     _00195_DS_
0034 0E00      02073         MOVLW   0x00
0036 5C00      02074         SUBWF   r0x03, W
0038 E100      02075         BNZ     _00195_DS_
003A 0E05      02076         MOVLW   0x05
003C 5C00      02077         SUBWF   r0x02, W
003E E100      02078         BNZ     _00195_DS_
0040 0EC0      02079         MOVLW   0xc0
0042 5C00      02080         SUBWF   r0x01, W
0044 02081 _00195_DS_:
0044 E300      02082         BNC     _00188_DS_
               02083 ;       .line   477; TCPIP_Stack/UDP.c  return FALSE;
0046 6AE8      02084         CLRF    WREG
0048 D000      02085         BRA     _00191_DS_
004A 02086 _00188_DS_:
               02087 ;       .line   481; TCPIP_Stack/UDP.c  MACPut(v);
004A 5000      02088         MOVF    r0x00, W
004C 6EE5      02089         MOVWF   POSTDEC1
004E EC00 F000 02090         CALL    _MACPut
0052 2AE1      02091         INCF    FSR1L, F
0054 0000      02092         BANKSEL _wPutOffset
               02093 ;       .line   482; TCPIP_Stack/UDP.c  wPutOffset++;
0056 2B00      02094         INCF    _wPutOffset, F, B
0058 E300      02095         BNC     _20297_DS_
005A 0000      02096         BANKSEL (_wPutOffset + 1)
005C 2B00      02097         INCF    (_wPutOffset + 1), F, B
005E 02098 _20297_DS_:
005E 0000      02099         BANKSEL (_wPutOffset + 1)
               02100 ;       .line   483; TCPIP_Stack/UDP.c  if(wPutOffset > UDPTxCount)
0060 5100      02101         MOVF    (_wPutOffset + 1), W, B
0062 0000      02102         BANKSEL (_UDPTxCount + 1)
0064 5D00      02103         SUBWF   (_UDPTxCount + 1), W, B
0066 E100      02104         BNZ     _00196_DS_
0068 0000      02105         BANKSEL _wPutOffset
006A 5100      02106         MOVF    _wPutOffset, W, B
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
006C 0000      02107         BANKSEL _UDPTxCount
006E 5D00      02108         SUBWF   _UDPTxCount, W, B
0070 02109 _00196_DS_:
0070 E200      02110         BC      _00190_DS_
               02111 ;       .line   484; TCPIP_Stack/UDP.c  UDPTxCount = wPutOffset;
0072 C000 F000 02112         MOVFF   _wPutOffset, _UDPTxCount
0076 C000 F000 02113         MOVFF   (_wPutOffset + 1), (_UDPTxCount + 1)
007A 02114 _00190_DS_:
               02115 ;       .line   486; TCPIP_Stack/UDP.c  return TRUE;
007A 0E01      02116         MOVLW   0x01
007C 02117 _00191_DS_:
007C CFE4 F000 02118         MOVFF   PREINC1, r0x04
0080 CFE4 F000 02119         MOVFF   PREINC1, r0x03
0084 CFE4 F000 02120         MOVFF   PREINC1, r0x02
0088 CFE4 F000 02121         MOVFF   PREINC1, r0x01
008C CFE4 F000 02122         MOVFF   PREINC1, r0x00
0090 CFE4 FFD9 02123         MOVFF   PREINC1, FSR2L
0094 0012      02124         RETURN  
               02125 
               02126 ; ; Starting pCode block
               02127 S_UDP__UDPIsPutReady    code
0000 02128 _UDPIsPutReady:
               02129 ;       .line   434; TCPIP_Stack/UDP.c  WORD UDPIsPutReady(UDP_SOCKET s)
0000 CFD9 FFE5 02130         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02131         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02132         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02133         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02134         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02135         MOVFF   r0x03, POSTDEC1
0018 0E02      02136         MOVLW   0x02
001A CFDB F000 02137         MOVFF   PLUSW2, r0x00
               02138 ;       .line   436; TCPIP_Stack/UDP.c  if(!MACIsTxReady())
001E EC00 F000 02139         CALL    _MACIsTxReady
0022 6E00      02140         MOVWF   r0x01
0024 5000      02141         MOVF    r0x01, W
0026 E100      02142         BNZ     _00174_DS_
               02143 ;       .line   437; TCPIP_Stack/UDP.c  return 0;
0028 6AF3      02144         CLRF    PRODL
002A 6AE8      02145         CLRF    WREG
002C D000      02146         BRA     _00177_DS_
002E 02147 _00174_DS_:
002E 0000      02148         BANKSEL _LastPutSocket
               02149 ;       .line   439; TCPIP_Stack/UDP.c  if(LastPutSocket != s)
0030 5100      02150         MOVF    _LastPutSocket, W, B
0032 1800      02151         XORWF   r0x00, W
0034 E000      02152         BZ      _00176_DS_
               02153 ;       .line   441; TCPIP_Stack/UDP.c  LastPutSocket = s;
0036 C000 F000 02154         MOVFF   r0x00, _LastPutSocket
003A 0000      02155         BANKSEL _UDPTxCount
               02156 ;       .line   442; TCPIP_Stack/UDP.c  UDPTxCount = 0;
003C 6B00      02157         CLRF    _UDPTxCount, B
003E 0000      02158         BANKSEL (_UDPTxCount + 1)
0040 6B00      02159         CLRF    (_UDPTxCount + 1), B
               02160 ;       .line   443; TCPIP_Stack/UDP.c  UDPSetTxBuffer(0);
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0042 0E00      02161         MOVLW   0x00
0044 6EE5      02162         MOVWF   POSTDEC1
0046 0E00      02163         MOVLW   0x00
0048 6EE5      02164         MOVWF   POSTDEC1
004A EC00 F000 02165         CALL    _UDPSetTxBuffer
004E 0E02      02166         MOVLW   0x02
0050 26E1      02167         ADDWF   FSR1L, F
0052 02168 _00176_DS_:
               02169 ;       .line   445; TCPIP_Stack/UDP.c  activeUDPSocket = s;
0052 C000 F000 02170         MOVFF   r0x00, _activeUDPSocket
               02171 ;       .line   447; TCPIP_Stack/UDP.c  return MAC_TX_BUFFER_SIZE-sizeof(IP_HEADER)-sizeof(UDP_HEADER)-UDPTxCount;
0056 C000 F000 02172         MOVFF   _UDPTxCount, r0x00
005A C000 F000 02173         MOVFF   (_UDPTxCount + 1), r0x01
005E 6A00      02174         CLRF    r0x02
0060 6A00      02175         CLRF    r0x03
0062 5000      02176         MOVF    r0x00, W
0064 08C0      02177         SUBLW   0xc0
0066 6E00      02178         MOVWF   r0x00
0068 0E05      02179         MOVLW   0x05
006A 5600      02180         SUBFWB  r0x01, F
006C 0E00      02181         MOVLW   0x00
006E 5600      02182         SUBFWB  r0x02, F
0070 0E00      02183         MOVLW   0x00
0072 5600      02184         SUBFWB  r0x03, F
0074 C000 FFF3 02185         MOVFF   r0x01, PRODL
0078 5000      02186         MOVF    r0x00, W
007A 02187 _00177_DS_:
007A CFE4 F000 02188         MOVFF   PREINC1, r0x03
007E CFE4 F000 02189         MOVFF   PREINC1, r0x02
0082 CFE4 F000 02190         MOVFF   PREINC1, r0x01
0086 CFE4 F000 02191         MOVFF   PREINC1, r0x00
008A CFE4 FFD9 02192         MOVFF   PREINC1, FSR2L
008E 0012      02193         RETURN  
               02194 
               02195 ; ; Starting pCode block
               02196 S_UDP__UDPSetRxBuffer   code
0000 02197 _UDPSetRxBuffer:
               02198 ;       .line   400; TCPIP_Stack/UDP.c  void UDPSetRxBuffer(WORD wOffset)
0000 CFD9 FFE5 02199         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02200         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02201         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02202         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02203         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02204         MOVFF   r0x03, POSTDEC1
0018 0E02      02205         MOVLW   0x02
001A CFDB F000 02206         MOVFF   PLUSW2, r0x00
001E 0E03      02207         MOVLW   0x03
0020 CFDB F000 02208         MOVFF   PLUSW2, r0x01
               02209 ;       .line   402; TCPIP_Stack/UDP.c  IPSetRxBuffer(wOffset+sizeof(UDP_HEADER));
0024 5000      02210         MOVF    r0x00, W
0026 0F08      02211         ADDLW   0x08
0028 6E00      02212         MOVWF   r0x02
002A 0E00      02213         MOVLW   0x00
002C 2000      02214         ADDWFC  r0x01, W
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
002E 6E00      02215         MOVWF   r0x03
0030 5000      02216         MOVF    r0x03, W
0032 6EE5      02217         MOVWF   POSTDEC1
0034 5000      02218         MOVF    r0x02, W
0036 6EE5      02219         MOVWF   POSTDEC1
0038 EC00 F000 02220         CALL    _IPSetRxBuffer
003C 0E02      02221         MOVLW   0x02
003E 26E1      02222         ADDWF   FSR1L, F
               02223 ;       .line   403; TCPIP_Stack/UDP.c  wGetOffset = wOffset;
0040 C000 F000 02224         MOVFF   r0x00, _wGetOffset
0044 C000 F000 02225         MOVFF   r0x01, (_wGetOffset + 1)
0048 CFE4 F000 02226         MOVFF   PREINC1, r0x03
004C CFE4 F000 02227         MOVFF   PREINC1, r0x02
0050 CFE4 F000 02228         MOVFF   PREINC1, r0x01
0054 CFE4 F000 02229         MOVFF   PREINC1, r0x00
0058 CFE4 FFD9 02230         MOVFF   PREINC1, FSR2L
005C 0012      02231         RETURN  
               02232 
               02233 ; ; Starting pCode block
               02234 S_UDP__UDPSetTxBuffer   code
0000 02235 _UDPSetTxBuffer:
               02236 ;       .line   370; TCPIP_Stack/UDP.c  void UDPSetTxBuffer(WORD wOffset)
0000 CFD9 FFE5 02237         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02238         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02239         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02240         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02241         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02242         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02243         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02244         MOVFF   r0x05, POSTDEC1
0020 0E02      02245         MOVLW   0x02
0022 CFDB F000 02246         MOVFF   PLUSW2, r0x00
0026 0E03      02247         MOVLW   0x03
0028 CFDB F000 02248         MOVFF   PLUSW2, r0x01
               02249 ;       .line   372; TCPIP_Stack/UDP.c  IPSetTxBuffer(wOffset+sizeof(UDP_HEADER));
002C C000 F000 02250         MOVFF   r0x00, r0x02
0030 C000 F000 02251         MOVFF   r0x01, r0x03
0034 6A00      02252         CLRF    r0x04
0036 6A00      02253         CLRF    r0x05
0038 0E35      02254         MOVLW   0x35
003A 2600      02255         ADDWF   r0x02, F
003C 0E1A      02256         MOVLW   0x1a
003E 2200      02257         ADDWFC  r0x03, F
0040 0E00      02258         MOVLW   0x00
0042 2200      02259         ADDWFC  r0x04, F
0044 0E00      02260         MOVLW   0x00
0046 2200      02261         ADDWFC  r0x05, F
0048 5000      02262         MOVF    r0x03, W
004A 6EE5      02263         MOVWF   POSTDEC1
004C 5000      02264         MOVF    r0x02, W
004E 6EE5      02265         MOVWF   POSTDEC1
0050 EC00 F000 02266         CALL    _MACSetWritePtr
0054 0E02      02267         MOVLW   0x02
0056 26E1      02268         ADDWF   FSR1L, F
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               02269 ;       .line   373; TCPIP_Stack/UDP.c  wPutOffset = wOffset;
0058 C000 F000 02270         MOVFF   r0x00, _wPutOffset
005C C000 F000 02271         MOVFF   r0x01, (_wPutOffset + 1)
0060 CFE4 F000 02272         MOVFF   PREINC1, r0x05
0064 CFE4 F000 02273         MOVFF   PREINC1, r0x04
0068 CFE4 F000 02274         MOVFF   PREINC1, r0x03
006C CFE4 F000 02275         MOVFF   PREINC1, r0x02
0070 CFE4 F000 02276         MOVFF   PREINC1, r0x01
0074 CFE4 F000 02277         MOVFF   PREINC1, r0x00
0078 CFE4 FFD9 02278         MOVFF   PREINC1, FSR2L
007C 0012      02279         RETURN  
               02280 
               02281 ; ; Starting pCode block
               02282 S_UDP__UDPClose code
0000 02283 _UDPClose:
               02284 ;       .line   339; TCPIP_Stack/UDP.c  void UDPClose(UDP_SOCKET s)
0000 CFD9 FFE5 02285         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02286         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02287         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02288         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02289         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02290         MOVFF   r0x03, POSTDEC1
0018 0E02      02291         MOVLW   0x02
001A CFDB F000 02292         MOVFF   PLUSW2, r0x00
               02293 ;       .line   341; TCPIP_Stack/UDP.c  if(s >= MAX_UDP_SOCKETS) return;
001E C000 F000 02294         MOVFF   r0x00, r0x01
0022 6A00      02295         CLRF    r0x02
0024 0E00      02296         MOVLW   0x00
0026 5C00      02297         SUBWF   r0x02, W
0028 E100      02298         BNZ     _00158_DS_
002A 0E0A      02299         MOVLW   0x0a
002C 5C00      02300         SUBWF   r0x01, W
002E 02301 _00158_DS_:
002E E200      02302         BC      _00155_DS_
               02303 ; ;multiply lit val:0x0e by variable r0x00 and store in r0x00
               02304 ; ;Unrolled 8 X 8 multiplication
               02305 ; ;FIXME: the function does not support result==WREG
               02306 ;       .line   342; TCPIP_Stack/UDP.c  UDPSocketInfo[s].localPort = INVALID_UDP_PORT;
0030 5000      02307         MOVF    r0x00, W
0032 0D0E      02308         MULLW   0x0e
0034 CFF3 F000 02309         MOVFF   PRODL, r0x00
0038 6A00      02310         CLRF    r0x01
003A 0E00      02311         MOVLW   LOW(_UDPSocketInfo)
003C 2600      02312         ADDWF   r0x00, F
003E 0E00      02313         MOVLW   HIGH(_UDPSocketInfo)
0040 2200      02314         ADDWFC  r0x01, F
0042 5000      02315         MOVF    r0x00, W
0044 0F0C      02316         ADDLW   0x0c
0046 6E00      02317         MOVWF   r0x02
0048 0E00      02318         MOVLW   0x00
004A 2000      02319         ADDWFC  r0x01, W
004C 6E00      02320         MOVWF   r0x03
004E C000 FFE9 02321         MOVFF   r0x02, FSR0L
0052 C000 FFEA 02322         MOVFF   r0x03, FSR0H
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0056 0E00      02323         MOVLW   0x00
0058 6EEE      02324         MOVWF   POSTINC0
005A 0E00      02325         MOVLW   0x00
005C 6EEF      02326         MOVWF   INDF0
               02327 ;       .line   343; TCPIP_Stack/UDP.c  UDPSocketInfo[s].remoteNode.IPAddr.Val = 0x00000000;
005E C000 FFE9 02328         MOVFF   r0x00, FSR0L
0062 C000 FFEA 02329         MOVFF   r0x01, FSR0H
0066 0E00      02330         MOVLW   0x00
0068 6EEE      02331         MOVWF   POSTINC0
006A 0E00      02332         MOVLW   0x00
006C 6EEE      02333         MOVWF   POSTINC0
006E 0E00      02334         MOVLW   0x00
0070 6EEE      02335         MOVWF   POSTINC0
0072 0E00      02336         MOVLW   0x00
0074 6EEF      02337         MOVWF   INDF0
0076 02338 _00155_DS_:
0076 CFE4 F000 02339         MOVFF   PREINC1, r0x03
007A CFE4 F000 02340         MOVFF   PREINC1, r0x02
007E CFE4 F000 02341         MOVFF   PREINC1, r0x01
0082 CFE4 F000 02342         MOVFF   PREINC1, r0x00
0086 CFE4 FFD9 02343         MOVFF   PREINC1, FSR2L
008A 0012      02344         RETURN  
               02345 
               02346 ; ; Starting pCode block
               02347 S_UDP__UDPOpen  code
0000 02348 _UDPOpen:
               02349 ;       .line   258; TCPIP_Stack/UDP.c  UDP_SOCKET UDPOpen(UDP_PORT this_localPort,
0000 CFD9 FFE5 02350         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02351         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02352         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02353         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02354         MOVFF   r0x02, POSTDEC1
0014 C000 FFE5 02355         MOVFF   r0x03, POSTDEC1
0018 C000 FFE5 02356         MOVFF   r0x04, POSTDEC1
001C C000 FFE5 02357         MOVFF   r0x05, POSTDEC1
0020 C000 FFE5 02358         MOVFF   r0x06, POSTDEC1
0024 C000 FFE5 02359         MOVFF   r0x07, POSTDEC1
0028 C000 FFE5 02360         MOVFF   r0x08, POSTDEC1
002C C000 FFE5 02361         MOVFF   r0x09, POSTDEC1
0030 C000 FFE5 02362         MOVFF   r0x0a, POSTDEC1
0034 C000 FFE5 02363         MOVFF   r0x0b, POSTDEC1
0038 C000 FFE5 02364         MOVFF   r0x0c, POSTDEC1
003C C000 FFE5 02365         MOVFF   r0x0d, POSTDEC1
0040 C000 FFE5 02366         MOVFF   r0x0e, POSTDEC1
0044 C000 FFE5 02367         MOVFF   r0x0f, POSTDEC1
0048 C000 FFE5 02368         MOVFF   r0x10, POSTDEC1
004C C000 FFE5 02369         MOVFF   r0x11, POSTDEC1
0050 C000 FFE5 02370         MOVFF   r0x12, POSTDEC1
0054 C000 FFE5 02371         MOVFF   r0x13, POSTDEC1
0058 0E02      02372         MOVLW   0x02
005A CFDB F000 02373         MOVFF   PLUSW2, r0x00
005E 0E03      02374         MOVLW   0x03
0060 CFDB F000 02375         MOVFF   PLUSW2, r0x01
0064 0E04      02376         MOVLW   0x04
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0066 CFDB F000 02377         MOVFF   PLUSW2, r0x02
006A 0E05      02378         MOVLW   0x05
006C CFDB F000 02379         MOVFF   PLUSW2, r0x03
0070 0E06      02380         MOVLW   0x06
0072 CFDB F000 02381         MOVFF   PLUSW2, r0x04
0076 0E07      02382         MOVLW   0x07
0078 CFDB F000 02383         MOVFF   PLUSW2, r0x05
007C 0E08      02384         MOVLW   0x08
007E CFDB F000 02385         MOVFF   PLUSW2, r0x06
               02386 ;       .line   269; TCPIP_Stack/UDP.c  p = UDPSocketInfo; //pointer to the table of UDP sockets
0082 0E00      02387         MOVLW   HIGH(_UDPSocketInfo)
0084 6E00      02388         MOVWF   r0x08
0086 0E00      02389         MOVLW   LOW(_UDPSocketInfo)
0088 6E00      02390         MOVWF   r0x07
008A 0E80      02391         MOVLW   0x80
008C 6E00      02392         MOVWF   r0x09
               02393 ;       .line   270; TCPIP_Stack/UDP.c  for ( s = 0; s < MAX_UDP_SOCKETS; s++ )
008E 6A00      02394         CLRF    r0x0a
0090 C000 F000 02395         MOVFF   r0x07, r0x0b
0094 C000 F000 02396         MOVFF   r0x08, r0x0c
0098 C000 F000 02397         MOVFF   r0x09, r0x0d
009C 6A00      02398         CLRF    r0x0e
009E 02399 _00134_DS_:
009E C000 F000 02400         MOVFF   r0x0e, r0x0f
00A2 6A00      02401         CLRF    r0x10
00A4 0E00      02402         MOVLW   0x00
00A6 5C00      02403         SUBWF   r0x10, W
00A8 E100      02404         BNZ     _00146_DS_
00AA 0E0A      02405         MOVLW   0x0a
00AC 5C00      02406         SUBWF   r0x0f, W
00AE 02407 _00146_DS_:
00AE B0D8      02408         BTFSC   STATUS, 0
00B0 D000      02409         BRA     _00137_DS_
               02410 ;       .line   272; TCPIP_Stack/UDP.c  if(p->localPort == INVALID_UDP_PORT)
00B2 5000      02411         MOVF    r0x0b, W
00B4 0F0C      02412         ADDLW   0x0c
00B6 6E00      02413         MOVWF   r0x0f
00B8 0E00      02414         MOVLW   0x00
00BA 2000      02415         ADDWFC  r0x0c, W
00BC 6E00      02416         MOVWF   r0x10
00BE 0E00      02417         MOVLW   0x00
00C0 2000      02418         ADDWFC  r0x0d, W
00C2 6E00      02419         MOVWF   r0x11
00C4 C000 FFE9 02420         MOVFF   r0x0f, FSR0L
00C8 C000 FFF3 02421         MOVFF   r0x10, PRODL
00CC 5000      02422         MOVF    r0x11, W
00CE EC00 F000 02423         CALL    __gptrget2
00D2 6E00      02424         MOVWF   r0x12
00D4 CFF3 F000 02425         MOVFF   PRODL, r0x13
00D8 5000      02426         MOVF    r0x12, W
00DA 1000      02427         IORWF   r0x13, W
00DC A4D8      02428         BTFSS   STATUS, 2
00DE D000      02429         BRA     _00133_DS_
               02430 ;       .line   274; TCPIP_Stack/UDP.c  p->localPort = this_localPort;  
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00E0 C000 FFE5 02431         MOVFF   r0x00, POSTDEC1
00E4 C000 FFF4 02432         MOVFF   r0x01, PRODH
00E8 C000 FFE9 02433         MOVFF   r0x0f, FSR0L
00EC C000 FFF3 02434         MOVFF   r0x10, PRODL
00F0 5000      02435         MOVF    r0x11, W
00F2 EC00 F000 02436         CALL    __gptrput2
               02437 ;       .line   276; TCPIP_Stack/UDP.c  if(this_localPort == 0x0000u) //select any free port
00F6 5000      02438         MOVF    r0x00, W
00F8 1000      02439         IORWF   r0x01, W
00FA E100      02440         BNZ     _00128_DS_
               02441 ;       .line   278; TCPIP_Stack/UDP.c  if(NextPort > LOCAL_UDP_PORT_END_NUMBER || 
00FC 0E20      02442         MOVLW   0x20
00FE 0000      02443         BANKSEL (_UDPOpen_NextPort_1_1 + 1)
0100 5D00      02444         SUBWF   (_UDPOpen_NextPort_1_1 + 1), W, B
0102 E100      02445         BNZ     _00147_DS_
0104 0E01      02446         MOVLW   0x01
0106 0000      02447         BANKSEL _UDPOpen_NextPort_1_1
0108 5D00      02448         SUBWF   _UDPOpen_NextPort_1_1, W, B
010A 02449 _00147_DS_:
010A E200      02450         BC      _00124_DS_
               02451 ;       .line   279; TCPIP_Stack/UDP.c  NextPort < LOCAL_UDP_PORT_START_NUMBER)
010C 0E10      02452         MOVLW   0x10
010E 0000      02453         BANKSEL (_UDPOpen_NextPort_1_1 + 1)
0110 5D00      02454         SUBWF   (_UDPOpen_NextPort_1_1 + 1), W, B
0112 E100      02455         BNZ     _00148_DS_
0114 0E00      02456         MOVLW   0x00
0116 0000      02457         BANKSEL _UDPOpen_NextPort_1_1
0118 5D00      02458         SUBWF   _UDPOpen_NextPort_1_1, W, B
011A 02459 _00148_DS_:
011A E200      02460         BC      _00125_DS_
011C 02461 _00124_DS_:
011C 0000      02462         BANKSEL _UDPOpen_NextPort_1_1
               02463 ;       .line   280; TCPIP_Stack/UDP.c  NextPort = LOCAL_UDP_PORT_START_NUMBER;
011E 6B00      02464         CLRF    _UDPOpen_NextPort_1_1, B
0120 0E10      02465         MOVLW   0x10
0122 0000      02466         BANKSEL (_UDPOpen_NextPort_1_1 + 1)
0124 6F00      02467         MOVWF   (_UDPOpen_NextPort_1_1 + 1), B
0126 02468 _00125_DS_:
               02469 ;       .line   282; TCPIP_Stack/UDP.c  p->localPort    = NextPort++;
0126 5000      02470         MOVF    r0x07, W
0128 0F0C      02471         ADDLW   0x0c
012A 6E00      02472         MOVWF   r0x0f
012C 0E00      02473         MOVLW   0x00
012E 2000      02474         ADDWFC  r0x08, W
0130 6E00      02475         MOVWF   r0x10
0132 0E00      02476         MOVLW   0x00
0134 2000      02477         ADDWFC  r0x09, W
0136 6E00      02478         MOVWF   r0x11
0138 C000 F000 02479         MOVFF   _UDPOpen_NextPort_1_1, r0x12
013C C000 F000 02480         MOVFF   (_UDPOpen_NextPort_1_1 + 1), r0x13
0140 0000      02481         BANKSEL _UDPOpen_NextPort_1_1
0142 2B00      02482         INCF    _UDPOpen_NextPort_1_1, F, B
0144 E300      02483         BNC     _30298_DS_
0146 0000      02484         BANKSEL (_UDPOpen_NextPort_1_1 + 1)
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0148 2B00      02485         INCF    (_UDPOpen_NextPort_1_1 + 1), F, B
014A 02486 _30298_DS_:
014A C000 FFE5 02487         MOVFF   r0x12, POSTDEC1
014E C000 FFF4 02488         MOVFF   r0x13, PRODH
0152 C000 FFE9 02489         MOVFF   r0x0f, FSR0L
0156 C000 FFF3 02490         MOVFF   r0x10, PRODL
015A 5000      02491         MOVF    r0x11, W
015C EC00 F000 02492         CALL    __gptrput2
0160 02493 _00128_DS_:
               02494 ;       .line   286; TCPIP_Stack/UDP.c  if(this_remoteNode)
0160 5000      02495         MOVF    r0x02, W
0162 1000      02496         IORWF   r0x03, W
0164 1000      02497         IORWF   r0x04, W
0166 E000      02498         BZ      _00130_DS_
               02499 ;       .line   289; TCPIP_Stack/UDP.c  sizeof(p->remoteNode));
0168 0E00      02500         MOVLW   0x00
016A 6EE5      02501         MOVWF   POSTDEC1
016C 0E0A      02502         MOVLW   0x0a
016E 6EE5      02503         MOVWF   POSTDEC1
0170 5000      02504         MOVF    r0x04, W
0172 6EE5      02505         MOVWF   POSTDEC1
0174 5000      02506         MOVF    r0x03, W
0176 6EE5      02507         MOVWF   POSTDEC1
0178 5000      02508         MOVF    r0x02, W
017A 6EE5      02509         MOVWF   POSTDEC1
017C 5000      02510         MOVF    r0x09, W
017E 6EE5      02511         MOVWF   POSTDEC1
0180 5000      02512         MOVF    r0x08, W
0182 6EE5      02513         MOVWF   POSTDEC1
0184 5000      02514         MOVF    r0x07, W
0186 6EE5      02515         MOVWF   POSTDEC1
0188 EC00 F000 02516         CALL    _memcpy
018C 0E08      02517         MOVLW   0x08
018E 26E1      02518         ADDWF   FSR1L, F
0190 D000      02519         BRA     _00131_DS_
0192 02520 _00130_DS_:
               02521 ;       .line   294; TCPIP_Stack/UDP.c  memset((void*)&(p->remoteNode), 0xFF, sizeof(p->remoteNode));
0192 C000 F000 02522         MOVFF   r0x07, r0x0f
0196 C000 F000 02523         MOVFF   r0x08, r0x10
019A C000 F000 02524         MOVFF   r0x09, r0x11
019E 0E00      02525         MOVLW   0x00
01A0 6EE5      02526         MOVWF   POSTDEC1
01A2 0E0A      02527         MOVLW   0x0a
01A4 6EE5      02528         MOVWF   POSTDEC1
01A6 0EFF      02529         MOVLW   0xff
01A8 6EE5      02530         MOVWF   POSTDEC1
01AA 5000      02531         MOVF    r0x10, W
01AC 6EE5      02532         MOVWF   POSTDEC1
01AE 5000      02533         MOVF    r0x0f, W
01B0 6EE5      02534         MOVWF   POSTDEC1
01B2 EC00 F000 02535         CALL    _memset
01B6 0E05      02536         MOVLW   0x05
01B8 26E1      02537         ADDWF   FSR1L, F
01BA 02538 _00131_DS_:
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               02539 ;       .line   297; TCPIP_Stack/UDP.c  p->remotePort = this_remotePort;
01BA 5000      02540         MOVF    r0x07, W
01BC 0F0A      02541         ADDLW   0x0a
01BE 6E00      02542         MOVWF   r0x0f
01C0 0E00      02543         MOVLW   0x00
01C2 2000      02544         ADDWFC  r0x08, W
01C4 6E00      02545         MOVWF   r0x10
01C6 0E00      02546         MOVLW   0x00
01C8 2000      02547         ADDWFC  r0x09, W
01CA 6E00      02548         MOVWF   r0x11
01CC C000 FFE5 02549         MOVFF   r0x05, POSTDEC1
01D0 C000 FFF4 02550         MOVFF   r0x06, PRODH
01D4 C000 FFE9 02551         MOVFF   r0x0f, FSR0L
01D8 C000 FFF3 02552         MOVFF   r0x10, PRODL
01DC 5000      02553         MOVF    r0x11, W
01DE EC00 F000 02554         CALL    __gptrput2
               02555 ;       .line   302; TCPIP_Stack/UDP.c  activeUDPSocket = s;
01E2 C000 F000 02556         MOVFF   r0x0a, _activeUDPSocket
               02557 ;       .line   303; TCPIP_Stack/UDP.c  return s;
01E6 5000      02558         MOVF    r0x0a, W
01E8 D000      02559         BRA     _00138_DS_
01EA 02560 _00133_DS_:
               02561 ;       .line   305; TCPIP_Stack/UDP.c  p++;
01EA 0E0E      02562         MOVLW   0x0e
01EC 2600      02563         ADDWF   r0x0b, F
01EE 0E00      02564         MOVLW   0x00
01F0 2200      02565         ADDWFC  r0x0c, F
01F2 0E00      02566         MOVLW   0x00
01F4 2200      02567         ADDWFC  r0x0d, F
01F6 C000 F000 02568         MOVFF   r0x0b, r0x07
01FA C000 F000 02569         MOVFF   r0x0c, r0x08
01FE C000 F000 02570         MOVFF   r0x0d, r0x09
               02571 ;       .line   270; TCPIP_Stack/UDP.c  for ( s = 0; s < MAX_UDP_SOCKETS; s++ )
0202 2A00      02572         INCF    r0x0e, F
0204 C000 F000 02573         MOVFF   r0x0e, r0x0a
0208 D000      02574         BRA     _00134_DS_
020A 02575 _00137_DS_:
               02576 ;       .line   308; TCPIP_Stack/UDP.c  return (UDP_SOCKET)INVALID_UDP_SOCKET;
020A 68E8      02577         SETF    WREG
020C 02578 _00138_DS_:
020C CFE4 F000 02579         MOVFF   PREINC1, r0x13
0210 CFE4 F000 02580         MOVFF   PREINC1, r0x12
0214 CFE4 F000 02581         MOVFF   PREINC1, r0x11
0218 CFE4 F000 02582         MOVFF   PREINC1, r0x10
021C CFE4 F000 02583         MOVFF   PREINC1, r0x0f
0220 CFE4 F000 02584         MOVFF   PREINC1, r0x0e
0224 CFE4 F000 02585         MOVFF   PREINC1, r0x0d
0228 CFE4 F000 02586         MOVFF   PREINC1, r0x0c
022C CFE4 F000 02587         MOVFF   PREINC1, r0x0b
0230 CFE4 F000 02588         MOVFF   PREINC1, r0x0a
0234 CFE4 F000 02589         MOVFF   PREINC1, r0x09
0238 CFE4 F000 02590         MOVFF   PREINC1, r0x08
023C CFE4 F000 02591         MOVFF   PREINC1, r0x07
0240 CFE4 F000 02592         MOVFF   PREINC1, r0x06
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0244 CFE4 F000 02593         MOVFF   PREINC1, r0x05
0248 CFE4 F000 02594         MOVFF   PREINC1, r0x04
024C CFE4 F000 02595         MOVFF   PREINC1, r0x03
0250 CFE4 F000 02596         MOVFF   PREINC1, r0x02
0254 CFE4 F000 02597         MOVFF   PREINC1, r0x01
0258 CFE4 F000 02598         MOVFF   PREINC1, r0x00
025C CFE4 FFD9 02599         MOVFF   PREINC1, FSR2L
0260 0012      02600         RETURN  
               02601 
               02602 ; ; Starting pCode block
               02603 S_UDP__UDPTask  code
0000 02604 _UDPTask:
               02605 ;       .line   215; TCPIP_Stack/UDP.c  void UDPTask(void)
0000 CFD9 FFE5 02606         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02607         MOVFF   FSR1L, FSR2L
               02608 ;       .line   217; TCPIP_Stack/UDP.c  LastPutSocket = INVALID_UDP_SOCKET;
0008 0EFF      02609         MOVLW   0xff
000A 0000      02610         BANKSEL _LastPutSocket
000C 6F00      02611         MOVWF   _LastPutSocket, B
000E CFE4 FFD9 02612         MOVFF   PREINC1, FSR2L
0012 0012      02613         RETURN  
               02614 
               02615 ; ; Starting pCode block
               02616 S_UDP__UDPInit  code
0000 02617 _UDPInit:
               02618 ;       .line   177; TCPIP_Stack/UDP.c  void UDPInit(void)
0000 CFD9 FFE5 02619         MOVFF   FSR2L, POSTDEC1
0004 CFE1 FFD9 02620         MOVFF   FSR1L, FSR2L
0008 C000 FFE5 02621         MOVFF   r0x00, POSTDEC1
000C C000 FFE5 02622         MOVFF   r0x01, POSTDEC1
0010 C000 FFE5 02623         MOVFF   r0x02, POSTDEC1
               02624 ;       .line   182; TCPIP_Stack/UDP.c  for ( s = 0; s < MAX_UDP_SOCKETS; s++ )
0014 6A00      02625         CLRF    r0x00
0016 02626 _00105_DS_:
0016 C000 F000 02627         MOVFF   r0x00, r0x01
001A 6A00      02628         CLRF    r0x02
001C 0E00      02629         MOVLW   0x00
001E 5C00      02630         SUBWF   r0x02, W
0020 E100      02631         BNZ     _00114_DS_
0022 0E0A      02632         MOVLW   0x0a
0024 5C00      02633         SUBWF   r0x01, W
0026 02634 _00114_DS_:
0026 E200      02635         BC      _00108_DS_
               02636 ;       .line   184; TCPIP_Stack/UDP.c  UDPClose(s);
0028 5000      02637         MOVF    r0x00, W
002A 6EE5      02638         MOVWF   POSTDEC1
002C EC00 F000 02639         CALL    _UDPClose
0030 2AE1      02640         INCF    FSR1L, F
               02641 ;       .line   182; TCPIP_Stack/UDP.c  for ( s = 0; s < MAX_UDP_SOCKETS; s++ )
0032 2A00      02642         INCF    r0x00, F
0034 D000      02643         BRA     _00105_DS_
0036 02644 _00108_DS_:
0036 0000      02645         BANKSEL _Flags
               02646 ;       .line   186; TCPIP_Stack/UDP.c  Flags.bWasDiscarded = 1;
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 50


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0038 8300      02647         BSF     _Flags, 1, B
003A CFE4 F000 02648         MOVFF   PREINC1, r0x02
003E CFE4 F000 02649         MOVFF   PREINC1, r0x01
0042 CFE4 F000 02650         MOVFF   PREINC1, r0x00
0046 CFE4 FFD9 02651         MOVFF   PREINC1, FSR2L
004A 0012      02652         RETURN  
               02653 
               02654 
               02655 
               02656 ; Statistics:
               02657 ; code size:     4642 (0x1222) bytes ( 3.54%)
               02658 ;                2321 (0x0911) words
               02659 ; udata size:     198 (0x00c6) bytes ( 5.16%)
               02660 ; access size:     28 (0x001c) bytes
               02661 
               02662 
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1L                             00000FE1
FSR2L                             00000FD9
INDF0                             00000FEF
PLUSW2                            00000FDB
POSTDEC1                          00000FE5
POSTINC0                          00000FEE
PREINC1                           00000FE4
PRODH                             00000FF4
PRODL                             00000FF3
STATUS                            00000FD8
WREG                              00000FE8
_00105_DS_                        00000016
_00108_DS_                        00000036
_00114_DS_                        00000026
_00124_DS_                        0000011C
_00125_DS_                        00000126
_00128_DS_                        00000160
_00130_DS_                        00000192
_00131_DS_                        000001BA
_00133_DS_                        000001EA
_00134_DS_                        0000009E
_00137_DS_                        0000020A
_00138_DS_                        0000020C
_00146_DS_                        000000AE
_00147_DS_                        0000010A
_00148_DS_                        0000011A
_00155_DS_                        00000076
_00158_DS_                        0000002E
_00174_DS_                        0000002E
_00176_DS_                        00000052
_00177_DS_                        0000007A
_00188_DS_                        0000004A
_00190_DS_                        0000007A
_00191_DS_                        0000007C
_00195_DS_                        00000044
_00196_DS_                        00000070
_00202_DS_                        0000007C
_00204_DS_                        000000A4
_00209_DS_                        00000072
_00210_DS_                        0000009A
_00226_DS_                        00000028
_00228_DS_                        00000042
_00229_DS_                        0000005C
_00239_DS_                        00000048
_00240_DS_                        0000004C
_00242_DS_                        00000070
_00245_DS_                        0000003C
_00252_DS_                        00000060
_00253_DS_                        00000066
_00256_DS_                        0000008E
_00257_DS_                        000000C2
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 52


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_00261_DS_                        00000054
_00264_DS_                        00000084
_00271_DS_                        00000024
_00279_DS_                        0000024A
_00281_DS_                        0000029E
_00283_DS_                        000002B4
_00289_DS_                        00000242
_00290_DS_                        00000294
_00291_DS_                        00000296
_00296_DS_                        00000254
_00301_DS_                        00000258
_00303_DS_                        0000025C
_00305_DS_                        000002FE
_00306_DS_                        000000F4
_00309_DS_                        00000270
_00310_DS_                        00000300
_00319_DS_                        00000104
_00320_DS_                        0000013A
_00321_DS_                        0000013C
_00322_DS_                        00000182
_00323_DS_                        00000184
_00325_DS_                        000001D6
_00327_DS_                        0000020A
_00329_DS_                        00000252
_00332_DS_                        00000282
_10296_DS_                        0000006E
_20297_DS_                        0000005E
_30298_DS_                        0000014A
_ADCON0                           00000000
_ADCON0bits                       00000000
_ADCON1                           00000000
_ADCON1bits                       00000000
_ADCON2                           00000000
_ADCON2bits                       00000000
_ADRES                            00000000
_ADRESH                           00000000
_ADRESL                           00000000
_AN0String                        00000000
_AppConfig                        00000000
_BAUDCON                          00000000
_BAUDCON1                         00000000
_BAUDCON1bits                     00000000
_BAUDCON2                         00000000
_BAUDCON2bits                     00000000
_BAUDCONbits                      00000000
_BAUDCTL                          00000000
_BAUDCTL1                         00000000
_BAUDCTL1bits                     00000000
_BAUDCTL2                         00000000
_BAUDCTL2bits                     00000000
_BAUDCTLbits                      00000000
_BSR                              00000000
_CCP1CON                          00000000
_CCP1CONbits                      00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 53


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_CCP2CON                          00000000
_CCP2CONbits                      00000000
_CCP3CON                          00000000
_CCP3CONbits                      00000000
_CCP4CON                          00000000
_CCP4CONbits                      00000000
_CCP5CON                          00000000
_CCP5CONbits                      00000000
_CCPR1                            00000000
_CCPR1H                           00000000
_CCPR1L                           00000000
_CCPR2                            00000000
_CCPR2H                           00000000
_CCPR2L                           00000000
_CCPR3                            00000000
_CCPR3H                           00000000
_CCPR3L                           00000000
_CCPR4                            00000000
_CCPR4H                           00000000
_CCPR4L                           00000000
_CCPR5                            00000000
_CCPR5H                           00000000
_CCPR5L                           00000000
_CMCON                            00000000
_CMCONbits                        00000000
_CVRCON                           00000000
_CVRCONbits                       00000000
_CalcIPBufferChecksum             00000000
_CalcIPChecksum                   00000000
_DDRA                             00000000
_DDRAbits                         00000000
_DDRB                             00000000
_DDRBbits                         00000000
_DDRC                             00000000
_DDRCbits                         00000000
_DDRD                             00000000
_DDRDbits                         00000000
_DDRE                             00000000
_DDREbits                         00000000
_DDRF                             00000000
_DDRFbits                         00000000
_DDRG                             00000000
_DDRGbits                         00000000
_DDRH                             00000000
_DDRHbits                         00000000
_DDRJ                             00000000
_DDRJbits                         00000000
_EBSTCON                          00000000
_EBSTCONbits                      00000000
_EBSTCS                           00000000
_EBSTCSH                          00000000
_EBSTCSL                          00000000
_EBSTSD                           00000000
_ECCP1AS                          00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 54


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_ECCP1ASbits                      00000000
_ECCP1CON                         00000000
_ECCP1CONbits                     00000000
_ECCP1DEL                         00000000
_ECCP1DELbits                     00000000
_ECCP2AS                          00000000
_ECCP2ASbits                      00000000
_ECCP2CON                         00000000
_ECCP2CONbits                     00000000
_ECCP2DEL                         00000000
_ECCP2DELbits                     00000000
_ECCP3AS                          00000000
_ECCP3ASbits                      00000000
_ECCP3CON                         00000000
_ECCP3CONbits                     00000000
_ECCP3DEL                         00000000
_ECCP3DELbits                     00000000
_ECON1                            00000000
_ECON1bits                        00000000
_ECON2                            00000000
_ECON2bits                        00000000
_EDATA                            00000000
_EDATAbits                        00000000
_EDMACS                           00000000
_EDMACSH                          00000000
_EDMACSL                          00000000
_EDMADST                          00000000
_EDMADSTH                         00000000
_EDMADSTL                         00000000
_EDMAND                           00000000
_EDMANDH                          00000000
_EDMANDL                          00000000
_EDMAST                           00000000
_EDMASTH                          00000000
_EDMASTL                          00000000
_EECON1                           00000000
_EECON1bits                       00000000
_EECON2                           00000000
_EFLOCON                          00000000
_EFLOCONbits                      00000000
_EHT0                             00000000
_EHT1                             00000000
_EHT2                             00000000
_EHT3                             00000000
_EHT4                             00000000
_EHT5                             00000000
_EHT6                             00000000
_EHT7                             00000000
_EIE                              00000000
_EIEbits                          00000000
_EIR                              00000000
_EIRbits                          00000000
_EPAUS                            00000000
_EPAUSH                           00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 55


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_EPAUSL                           00000000
_EPKTCNT                          00000000
_EPMCS                            00000000
_EPMCSH                           00000000
_EPMCSL                           00000000
_EPMM0                            00000000
_EPMM1                            00000000
_EPMM2                            00000000
_EPMM3                            00000000
_EPMM4                            00000000
_EPMM5                            00000000
_EPMM6                            00000000
_EPMM7                            00000000
_EPMO                             00000000
_EPMOH                            00000000
_EPMOL                            00000000
_ERDPT                            00000000
_ERDPTH                           00000000
_ERDPTL                           00000000
_ERXFCON                          00000000
_ERXFCONbits                      00000000
_ERXND                            00000000
_ERXNDH                           00000000
_ERXNDL                           00000000
_ERXRDPT                          00000000
_ERXRDPTH                         00000000
_ERXRDPTL                         00000000
_ERXST                            00000000
_ERXSTH                           00000000
_ERXSTL                           00000000
_ERXWRPT                          00000000
_ERXWRPTH                         00000000
_ERXWRPTL                         00000000
_ESTAT                            00000000
_ESTATbits                        00000000
_ETXND                            00000000
_ETXNDH                           00000000
_ETXNDL                           00000000
_ETXST                            00000000
_ETXSTH                           00000000
_ETXSTL                           00000000
_EWOLIE                           00000000
_EWOLIEbits                       00000000
_EWOLIR                           00000000
_EWOLIRbits                       00000000
_EWRPT                            00000000
_EWRPTH                           00000000
_EWRPTL                           00000000
_FSR0H                            00000000
_FSR0L                            00000000
_FSR1H                            00000000
_FSR1L                            00000000
_FSR2H                            00000000
_FSR2L                            00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 56


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_FindMatchingSocket               00000000
_Flags                            00000000
_INDF0                            00000000
_INDF1                            00000000
_INDF2                            00000000
_INTCON                           00000000
_INTCON2                          00000000
_INTCON2bits                      00000000
_INTCON3                          00000000
_INTCON3bits                      00000000
_INTCONbits                       00000000
_IPPutHeader                      00000000
_IPR1                             00000000
_IPR1bits                         00000000
_IPR2                             00000000
_IPR2bits                         00000000
_IPR3                             00000000
_IPR3bits                         00000000
_IPSetRxBuffer                    00000000
_LATA                             00000000
_LATAbits                         00000000
_LATB                             00000000
_LATBbits                         00000000
_LATC                             00000000
_LATCbits                         00000000
_LATD                             00000000
_LATDbits                         00000000
_LATE                             00000000
_LATEbits                         00000000
_LATF                             00000000
_LATFbits                         00000000
_LATG                             00000000
_LATGbits                         00000000
_LATH                             00000000
_LATHbits                         00000000
_LATJ                             00000000
_LATJbits                         00000000
_LCDText                          00000000
_LastPutSocket                    00000000
_MAADR1                           00000000
_MAADR2                           00000000
_MAADR3                           00000000
_MAADR4                           00000000
_MAADR5                           00000000
_MAADR6                           00000000
_MABBIPG                          00000000
_MACDiscardRx                     00000000
_MACFlush                         00000000
_MACGet                           00000000
_MACGetArray                      00000000
_MACIsTxReady                     00000000
_MACLCON1                         00000000
_MACLCON1bits                     00000000
_MACLCON2                         00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 57


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_MACLCON2bits                     00000000
_MACON1                           00000000
_MACON1bits                       00000000
_MACON2                           00000000
_MACON2bits                       00000000
_MACON3                           00000000
_MACON3bits                       00000000
_MACON4                           00000000
_MACON4bits                       00000000
_MACPut                           00000000
_MACPutArray                      00000000
_MACSetReadPtr                    00000000
_MACSetWritePtr                   00000000
_MAIPG                            00000000
_MAIPGH                           00000000
_MAIPGL                           00000000
_MAMXFL                           00000000
_MAMXFLH                          00000000
_MAMXFLL                          00000000
_MEMCON                           00000000
_MEMCONbits                       00000000
_MICMD                            00000000
_MICMDbits                        00000000
_MICON                            00000000
_MICONbits                        00000000
_MIRD                             00000000
_MIRDH                            00000000
_MIRDL                            00000000
_MIREGADR                         00000000
_MISTAT                           00000000
_MISTATbits                       00000000
_MIWR                             00000000
_MIWRH                            00000000
_MIWRL                            00000000
_OSCCON                           00000000
_OSCCONbits                       00000000
_OSCTUNE                          00000000
_OSCTUNEbits                      00000000
_PC                               00000000
_PCL                              00000000
_PCLATH                           00000000
_PCLATU                           00000000
_PIE1                             00000000
_PIE1bits                         00000000
_PIE2                             00000000
_PIE2bits                         00000000
_PIE3                             00000000
_PIE3bits                         00000000
_PIR1                             00000000
_PIR1bits                         00000000
_PIR2                             00000000
_PIR2bits                         00000000
_PIR3                             00000000
_PIR3bits                         00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 58


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_PLUSW0                           00000000
_PLUSW1                           00000000
_PLUSW2                           00000000
_PORTA                            00000000
_PORTAbits                        00000000
_PORTB                            00000000
_PORTBbits                        00000000
_PORTC                            00000000
_PORTCbits                        00000000
_PORTD                            00000000
_PORTDbits                        00000000
_PORTE                            00000000
_PORTEbits                        00000000
_PORTF                            00000000
_PORTFbits                        00000000
_PORTG                            00000000
_PORTGbits                        00000000
_PORTH                            00000000
_PORTHbits                        00000000
_PORTJ                            00000000
_PORTJbits                        00000000
_POSTDEC0                         00000000
_POSTDEC1                         00000000
_POSTDEC2                         00000000
_POSTINC0                         00000000
_POSTINC1                         00000000
_POSTINC2                         00000000
_PR2                              00000000
_PR4                              00000000
_PREINC0                          00000000
_PREINC1                          00000000
_PREINC2                          00000000
_PROD                             00000000
_PRODH                            00000000
_PRODL                            00000000
_PSPCON                           00000000
_PSPCONbits                       00000000
_RCON                             00000000
_RCONbits                         00000000
_RCREG                            00000000
_RCREG1                           00000000
_RCREG2                           00000000
_RCSTA                            00000000
_RCSTA1                           00000000
_RCSTA1bits                       00000000
_RCSTA2                           00000000
_RCSTA2bits                       00000000
_RCSTAbits                        00000000
_SPBRG                            00000000
_SPBRG1                           00000000
_SPBRG2                           00000000
_SPBRGH                           00000000
_SPBRGH1                          00000000
_SPBRGH2                          00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 59


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_SSP1ADD                          00000000
_SSP1BUF                          00000000
_SSP1CON1                         00000000
_SSP1CON1bits                     00000000
_SSP1CON2                         00000000
_SSP1CON2bits                     00000000
_SSP1STAT                         00000000
_SSP1STATbits                     00000000
_SSP2ADD                          00000000
_SSP2BUF                          00000000
_SSP2CON1                         00000000
_SSP2CON1bits                     00000000
_SSP2CON2                         00000000
_SSP2CON2bits                     00000000
_SSP2STAT                         00000000
_SSP2STATbits                     00000000
_SSPADD                           00000000
_SSPBUF                           00000000
_SSPCON1                          00000000
_SSPCON1bits                      00000000
_SSPCON2                          00000000
_SSPCON2bits                      00000000
_SSPSTAT                          00000000
_SSPSTATbits                      00000000
_STATUS                           00000000
_STATUSbits                       00000000
_STKPTR                           00000000
_STKPTRbits                       00000000
_SocketWithRxData                 00000001
_T0CON                            00000000
_T0CONbits                        00000000
_T1CON                            00000000
_T1CONbits                        00000000
_T2CON                            00000000
_T2CONbits                        00000000
_T3CON                            00000000
_T3CONbits                        00000000
_T4CON                            00000000
_T4CONbits                        00000000
_TABLAT                           00000000
_TBLPTR                           00000000
_TBLPTRH                          00000000
_TBLPTRL                          00000000
_TBLPTRU                          00000000
_TMR0H                            00000000
_TMR0L                            00000000
_TMR1H                            00000000
_TMR1L                            00000000
_TMR2                             00000000
_TMR3H                            00000000
_TMR3L                            00000000
_TMR4                             00000000
_TOS                              00000000
_TOSH                             00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 60


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_TOSL                             00000000
_TOSU                             00000000
_TRISA                            00000000
_TRISAbits                        00000000
_TRISB                            00000000
_TRISBbits                        00000000
_TRISC                            00000000
_TRISCbits                        00000000
_TRISD                            00000000
_TRISDbits                        00000000
_TRISE                            00000000
_TRISEbits                        00000000
_TRISF                            00000000
_TRISFbits                        00000000
_TRISG                            00000000
_TRISGbits                        00000000
_TRISH                            00000000
_TRISHbits                        00000000
_TRISJ                            00000000
_TRISJbits                        00000000
_TXREG                            00000000
_TXREG1                           00000000
_TXREG2                           00000000
_TXSTA                            00000000
_TXSTA1                           00000000
_TXSTA1bits                       00000000
_TXSTA2                           00000000
_TXSTA2bits                       00000000
_TXSTAbits                        00000000
_UDPClose                         00000000
_UDPDiscard                       00000000
_UDPFlush                         00000000
_UDPFlush_h_1_1                   00000000
_UDPFlush_pseudoHeader_2_2        00000000
_UDPFlush_wChecksum_1_1           00000000
_UDPGet                           00000000
_UDPGetArray                      00000000
_UDPInit                          00000000
_UDPIsGetReady                    00000000
_UDPIsPutReady                    00000000
_UDPOpen                          00000000
_UDPOpen_NextPort_1_1             00000000
_UDPProcess                       00000000
_UDPProcess_checksums_1_1         00000000
_UDPProcess_h_1_1                 00000000
_UDPProcess_pseudoHeader_1_1      00000000
_UDPPut                           00000000
_UDPPutArray                      00000000
_UDPPutString                     00000000
_UDPRxCount                       00000000
_UDPSetRxBuffer                   00000000
_UDPSetTxBuffer                   00000000
_UDPSocketInfo                    00000000
_UDPTask                          00000000
gpasm-0.13.7 beta               Objects/UDP.asm3-15-2010  11:43:33          PAGE 61


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_UDPTxCount                       00000000
_WDTCON                           00000000
_WDTCONbits                       00000000
_WREG                             00000000
__18F97J60                        00000001
__gptrget2                        00000000
__gptrget4                        00000000
__gptrput1                        00000000
__gptrput2                        00000000
_activeUDPSocket                  00000000
_memcpy                           00000000
_memset                           00000000
_stdin                            00000000
_stdout                           00000000
_strlen                           00000000
_swaps                            00000000
_wGetOffset                       00000000
_wPutOffset                       00000000
r0x00                             00000000
r0x01                             00000001
r0x02                             00000002
r0x03                             00000003
r0x04                             00000004
r0x05                             00000005
r0x06                             00000006
r0x07                             00000007
r0x08                             00000008
r0x09                             00000009
r0x0a                             0000000A
r0x0b                             0000000B
r0x0c                             0000000C
r0x0d                             0000000D
r0x0e                             0000000E
r0x0f                             0000000F
r0x10                             00000010
r0x11                             00000011
r0x12                             00000012
r0x13                             00000013
r0x14                             00000014
r0x15                             00000015
r0x16                             00000016
r0x17                             00000017
r0x18                             00000018
r0x19                             00000019
r0x1a                             0000001A
r0x1b                             0000001B


Errors   :       0
Warnings :       0 reported,       0 suppressed
Messages :       0 reported,       0 suppressed

